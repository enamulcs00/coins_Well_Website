(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"6Uf2":function(t,e,n){"use strict";(function(t){var e=n("zIRd"),r=n("/6Yf"),i=n("qOnz"),o=n("mrSG"),a=n("q/0M"),s="";function u(t){s=t}var c,l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(i.stringify)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(i.jsonEval)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(i.contains)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),f=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},d=f("localStorage"),p=f("sessionStorage"),g=new a.Logger("@firebase/database"),m=(c=1,function(){return c++}),v=function(t){var e=Object(i.stringToByteArray)(t),n=new i.Sha1;n.update(e);var r=n.digest();return i.base64.encodeByteArray(r)},y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var o=t[r];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?n+=y.apply(null,o):n+="object"==typeof o?Object(i.stringify)(o):o,n+=" "}return n},b=null,_=!0,w=function(t,e){Object(i.assert)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(g.logLevel=a.LogLevel.VERBOSE,b=g.log.bind(g),e&&p.set("logging_enabled",!0)):"function"==typeof t?b=t:(b=null,p.remove("logging_enabled"))},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===b&&!0===p.get("logging_enabled")&&w(!0)),b){var n=y.apply(null,t);b(n)}},T=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];I.apply(void 0,Object(o.__spreadArray)([t],Object(o.__read)(e)))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+y.apply(void 0,Object(o.__spreadArray)([],Object(o.__read)(t)));g.error(n)},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+y.apply(void 0,Object(o.__spreadArray)([],Object(o.__read)(t)));throw g.error(n),new Error(n)},k=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+y.apply(void 0,Object(o.__spreadArray)([],Object(o.__read)(t)));g.warn(n)},O=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},S="[MIN_NAME]",R="[MAX_NAME]",A=function(t,e){if(t===e)return 0;if(t===S||e===R)return-1;if(e===S||t===R)return 1;var n=F(t),r=F(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},P=function(t,e){return t===e?0:t<e?-1:1},N=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(i.stringify)(e))},x=function(t){if("object"!=typeof t||null===t)return Object(i.stringify)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",o=0;o<e.length;o++)0!==o&&(r+=","),r+=Object(i.stringify)(e[o]),r+=":",r+=x(t[e[o]]);return r+"}"},D=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function j(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var M=function(t){var e,n,r,o,a;Object(i.assert)(!O(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(a=52;a;a-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(u.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},L=new RegExp("^-?(0*)\\d{1,10}$"),F=function(t){if(L.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},U=function(t){try{t()}catch(e){setTimeout((function(){throw k("Exception was thrown by user callback.",e.stack||""),e}),Math.floor(0))}},q=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},G=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){k('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),Q=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(I("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';k(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),V=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),B=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,K=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=d.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&d.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function z(t,e,n){var r;if(Object(i.assert)("string"==typeof e,"typeof type must == string"),Object(i.assert)("object"==typeof n,"typeof params must == object"),"websocket"===e)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var o=[];return j(n,(function(t,e){o.push(t+"="+e)})),r+o.join("&")}var W=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(i.contains)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(i.deepCopy)(this.counters_)},t}(),H={},Y={};function X(t){var e=t.toString();return H[e]||(H[e]=new W),H[e]}var $=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&U((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),J=function(){function t(t,e,n,r,i,o,a){var s=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=T(t),this.stats_=X(e),this.urlFn=function(t){return s.appCheckToken&&(t.ac=s.appCheckToken),z(e,"long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new $(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Object(i.isNodeSdk)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Z((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.__read)(t,5),i=r[0],a=r[1],s=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=a,n.password=s;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.__read)(t,2),i=r[0],a=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&B.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(i.isNodeSdk)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(i.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(i.base64Encode)(e),r=D(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(i.isNodeSdk)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(i.stringify)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Z=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(i.isNodeSdk)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(a='<script>document.domain="'+document.domain+'";<\/script>');var s="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(s),this.myIFrame.doc.close()}catch(u){I("frame writing exception"),u.stack&&I(u.stack),I(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||I("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Object(i.isNodeSdk)()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){I("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))},t}(),tt=null;"undefined"!=typeof MozWebSocket?tt=MozWebSocket:"undefined"!=typeof WebSocket&&(tt=WebSocket);var et=function(){function t(e,n,r,i,o,a,s){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=T(this.connId),this.stats_=X(n),this.connURL=t.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var o={v:"5"};return!Object(i.isNodeSdk)()&&"undefined"!=typeof location&&location.hostname&&B.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o.ac=r),z(t,"websocket",o)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,d.set("previous_websocket_failure",!0);try{if(Object(i.isNodeSdk)()){var r={headers:{"User-Agent":"Firebase/5/"+s+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(r.headers.Authorization="Bearer "+this.authToken),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var o=process.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a}),this.mySock=new tt(this.connURL,[],r)}else this.mySock=new tt(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==tt&&!t.forceDisallow_},t.previouslyFailed=function(){return d.isInMemoryStorage||!0===d.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){d.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(i.jsonEval)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(i.assert)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(i.stringify)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=D(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),nt=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[J,et]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=et&&et.isAvailable(),a=i&&!et.previouslyFailed();if(e.webSocketOnly&&(i||k("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[et];else{var s=this.transports_=[];try{for(var u=Object(o.__values)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&s.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),rt=function(){function t(t,e,n,r,i,o,a,s,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=T("c:"+this.id+":"),this.transportManager_=new nt(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=q((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=N("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&k("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),q((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):q((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(d.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),it=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ot=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(i.assert)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.__spreadArray)([],Object(o.__read)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(i.assert)(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),at=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(i.isMobileCordova)()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return Object(o.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.assert)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ot),st=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function ut(){return new st("")}function ct(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function lt(t){return t.pieces_.length-t.pieceNum_}function ht(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new st(t.pieces_,e)}function ft(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function dt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function pt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new st(e,0)}function gt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof st)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new st(n,0)}function mt(t){return t.pieceNum_>=t.pieces_.length}function vt(t,e){var n=ct(t),r=ct(e);if(null===n)return e;if(n===r)return vt(ht(t),ht(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function yt(t,e){for(var n=dt(t,0),r=dt(e,0),i=0;i<n.length&&i<r.length;i++){var o=A(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function bt(t,e){if(lt(t)!==lt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function _t(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(lt(t)>lt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var wt=function(){return function(t,e){this.errorPrefix_=e,this.parts_=dt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(i.stringLength)(this.parts_[n]);It(this)}}();function It(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Tt(t))}function Tt(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Et,Ct,kt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return Object(o.__extends)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.assert)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ot),Ot=function(t){function e(n,r,o,a,s,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=o,h.onConnectStatus_=a,h.onServerInfoUpdate_=s,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=T("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=1e3,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(i.isNodeSdk)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return kt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&at.getInstance().on("online",h.onOnline_,h),h}return Object(o.__extends)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,o={r:r,a:t,b:e};this.log_(Object(i.stringify)(o)),Object(i.assert)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new i.Deferred,r={p:t._path.toString(),q:t._queryObject},o={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var a=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[a];void 0!==t&&o===t&&(delete e.outstandingGets_[a],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+a+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(a),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var o=t._queryIdentifier,a=t._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),Object(i.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(i.assert)(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(a).set(o,s),this.connected_&&this.sendListen_(s)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(i.contains)(t,"w")){var n=Object(i.safeGet)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();k("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(i.isAdmin)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(i.isValidFormat)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(i.assert)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(i.stringify)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(i.stringify)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(i.assert)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(o.__awaiter)(this,void 0,void 0,(function(){var t,n,r,a,s,u,c,l,h,f,d,p,g,m=this;return Object(o.__generator)(this,(function(v){switch(v.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+e.nextConnectionId_++,s=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){Object(i.assert)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,v.label=1;case 1:return v.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return f=o.__read.apply(void 0,[v.sent(),2]),d=f[0],p=f[1],u?I("getToken() completed but was canceled"):(I("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=p&&p.token,c=new rt(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){k(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")}),s)),[3,4];case 3:return g=v.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&k(g),l()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){I("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){I("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(i.isEmpty)(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return x(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new st(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){I("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){I("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(o.__values)(this.listens.values()),a=i.next();!a.done;a=i.next()){var s=a.value;try{for(var u=(n=void 0,Object(o.__values)(s.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(f){n={error:f}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(d){t={error:d}}finally{try{a&&!a.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(i.isNodeSdk)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+s.replace(/\./g,"-")]=1,Object(i.isMobileCordova)()?t["framework.cordova"]=1:Object(i.isReactNative)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=at.getInstance().currentlyOnline();return Object(i.isEmpty)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(it),St=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Rt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new St(S,t),r=new St(S,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return St.MIN},t}(),At=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Et},set:function(t){Et=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return A(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(i.assertionError)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return St.MIN},e.prototype.maxPost=function(){return new St(R,Et)},e.prototype.makePost=function(t,e){return Object(i.assert)("string"==typeof t,"KeyIndex indexValue must always be a string."),new St(t,Et)},e.prototype.toString=function(){return".key"},e}(Rt),Pt=new At,Nt=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),xt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:jt.EMPTY_NODE,this.right=null!=o?o:jt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return jt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return jt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Dt=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new xt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),jt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,xt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,xt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Nt(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Nt(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Nt(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Dt,t}();function Mt(t,e){return A(t.name,e.name)}function Lt(t,e){return A(t,e)}var Ft,Ut,qt,Gt,Qt,Vt=function(t){return"number"==typeof t?"number:"+M(t):"string:"+t},Bt=function(t){if(t.isLeafNode()){var e=t.val();Object(i.assert)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(i.contains)(e,".sv"),"Priority must be a string or number.")}else Object(i.assert)(t===Ct||t.isEmpty(),"priority of unexpected type.");Object(i.assert)(t===Ct||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Kt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(i.assert)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Bt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Ft},set:function(t){Ft=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return mt(e)?this:".priority"===ct(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ct(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(i.assert)(".priority"!==r||1===lt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(ht(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Vt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?M(this.value_):this.value_,this.lazyHash_=v(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(i.assert)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),a=t.VALUE_TYPE_ORDER.indexOf(r);return Object(i.assert)(o>=0,"Unknown leaf type: "+n),Object(i.assert)(a>=0,"Unknown leaf type: "+r),o===a?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),zt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return St.MIN},e.prototype.maxPost=function(){return new St(R,new Kt("[PRIORITY-POST]",qt))},e.prototype.makePost=function(t,e){var n=Ut(t);return new St(e,new Kt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Rt)),Wt=Math.log(2),Ht=function(){function t(t){this.count=parseInt(Math.log(t+1)/Wt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),Yt=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new xt(a,o.node,xt.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new xt(a,o.node,xt.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new xt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,xt.BLACK):(s(h,xt.BLACK),s(h,xt.RED))}return o}(new Ht(t.length));return new jt(r||e,o)},Xt={},$t=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(i.assert)(Xt&&zt,"ChildrenNode.ts has not been loaded"),Gt=Gt||new t({".priority":Xt},{".priority":zt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(i.safeGet)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof jt?e:null},t.prototype.hasIndex=function(t){return Object(i.contains)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(i.assert)(e!==Pt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,a=[],s=!1,u=n.getIterator(St.Wrap),c=u.getNext();c;)s=s||e.isDefinedOn(c.node),a.push(c),c=u.getNext();r=s?Yt(a,e.getCompare()):Xt;var l=e.toString(),h=Object(o.__assign)({},this.indexSet_);h[l]=e;var f=Object(o.__assign)({},this.indexes_);return f[l]=r,new t(f,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(i.map)(this.indexes_,(function(t,o){var a=Object(i.safeGet)(r.indexSet_,o);if(Object(i.assert)(a,"Missing index implementation for "+o),t===Xt){if(a.isDefinedOn(e.node)){for(var s=[],u=n.getIterator(St.Wrap),c=u.getNext();c;)c.name!==e.name&&s.push(c),c=u.getNext();return s.push(e),Yt(s,a.getCompare())}return Xt}var l=n.get(e.name),h=t;return l&&(h=h.remove(new St(e.name,l))),h.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(i.map)(this.indexes_,(function(t){if(t===Xt)return t;var r=n.get(e.name);return r?t.remove(new St(e.name,r)):t})),this.indexSet_)},t}(),Jt=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Bt(this.priorityNode_),this.children_.isEmpty()&&Object(i.assert)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Qt||(Qt=new t(new jt(Lt),null,$t.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Qt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Qt:e},t.prototype.getChild=function(t){var e=ct(t);return null===e?this:this.getImmediateChild(e).getChild(ht(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(i.assert)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new St(e,n),o=void 0,a=void 0;n.isEmpty()?(o=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),a=this.indexMap_.addToIndexes(r,this.children_));var s=o.isEmpty()?Qt:this.priorityNode_;return new t(o,s,a)},t.prototype.updateChild=function(t,e){var n=ct(t);if(null===n)return e;Object(i.assert)(".priority"!==ct(t)||1===lt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(ht(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(zt,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Vt(this.getPriority().val())+":"),this.forEachChild(zt,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":v(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new St(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new St(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new St(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,St.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,St.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Zt?-1:0},t.prototype.withIndex=function(e){if(e===Pt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Pt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(zt),r=e.getIterator(zt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Pt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Zt=new(function(t){function e(){return t.call(this,new jt(Lt),Jt.EMPTY_NODE,$t.Default)||this}return Object(o.__extends)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Jt.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Jt));function te(t,e){if(void 0===e&&(e=null),null===t)return Jt.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(i.assert)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Kt(t,te(e));if(t instanceof Array){var n=Jt.EMPTY_NODE;return j(t,(function(e,r){if(Object(i.contains)(t,e)&&"."!==e.substring(0,1)){var o=te(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}})),n.updatePriority(te(e))}var r=[],o=!1;if(j(t,(function(t,e){if("."!==t.substring(0,1)){var n=te(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new St(t,n)))}})),0===r.length)return Jt.EMPTY_NODE;var a=Yt(r,Mt,(function(t){return t.name}),Lt);if(o){var s=Yt(r,zt.getCompare());return new Jt(a,te(e),new $t({".priority":s},{".priority":zt}))}return new Jt(a,te(e),$t.Default)}Object.defineProperties(St,{MIN:{value:new St(S,Jt.EMPTY_NODE)},MAX:{value:new St(R,Zt)}}),At.__EMPTY_NODE=Jt.EMPTY_NODE,Kt.__childrenNodeConstructor=Jt,Ct=Zt,function(t){qt=t}(Zt),function(t){Ut=t}(te);var ee,ne,re=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(i.assert)(!mt(e)&&".priority"!==ct(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.__extends)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?A(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=te(t),r=Jt.EMPTY_NODE.updateChild(this.indexPath_,n);return new St(e,r)},e.prototype.maxPost=function(){var t=Jt.EMPTY_NODE.updateChild(this.indexPath_,Zt);return new St(R,t)},e.prototype.toString=function(){return dt(this.indexPath_,0).join("/")},e}(Rt),ie=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?A(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return St.MIN},e.prototype.maxPost=function(){return St.MAX},e.prototype.makePost=function(t,e){var n=te(t);return new St(e,n)},e.prototype.toString=function(){return".value"},e}(Rt)),oe="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ae=(ee=0,ne=[],function(t){var e,n=t===ee;ee=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=oe.charAt(t%64),t=Math.floor(t/64);Object(i.assert)(0===t,"Cannot push at time == 0");var o=r.join("");if(n){for(e=11;e>=0&&63===ne[e];e--)ne[e]=0;ne[e]++}else for(e=0;e<12;e++)ne[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)o+=oe.charAt(ne[e]);return Object(i.assert)(20===o.length,"nextPushId: Length should be 20."),o}),se=function(t){if("2147483647"===t)return"-";var e=F(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return R;var o=oe.charAt(oe.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},ue=function(t){if("-2147483648"===t)return S;var e=F(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=oe.charAt(oe.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ce(t){return{type:"value",snapshotNode:t}}function le(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function he(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function fe(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var de=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,o,a){Object(i.assert)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=a&&(n.isEmpty()?t.hasChild(e)?a.trackChildChange(he(e,s)):Object(i.assert)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?a.trackChildChange(le(e,n)):a.trackChildChange(fe(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(zt,(function(t,r){e.hasChild(t)||n.trackChildChange(he(t,r))})),e.isLeafNode()||e.forEachChild(zt,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(fe(e,r,i))}else n.trackChildChange(le(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Jt.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),pe=function(){function t(e){this.indexedFilter_=new de(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new St(e,n))||(n=Jt.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Jt.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Jt.EMPTY_NODE);var i=this;return e.forEachChild(zt,(function(t,e){i.matches(new St(t,e))||(r=r.updateImmediateChild(t,Jt.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),ge=function(){function t(t){this.rangedFilter_=new pe(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new St(e,n))||(n=Jt.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Jt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Jt.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Jt.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Jt.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,o){var a;if(this.reverse_){var s=this.index_.getCompare();a=function(t,e){return s(e,t)}}else a=this.index_.getCompare();var u=t;Object(i.assert)(u.numChildren()===this.limit_,"");var c=new St(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var f=u.getImmediateChild(e),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===e||u.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var p=null==d?1:a(d,c);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(fe(e,n,f)),u.updateImmediateChild(e,n);null!=o&&o.trackChildChange(he(e,f));var g=u.updateImmediateChild(e,Jt.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=o&&o.trackChildChange(le(d.name,d.node)),g.updateImmediateChild(d.name,d.node)):g}return n.isEmpty()?t:h&&a(l,c)>=0?(null!=o&&(o.trackChildChange(he(l.name,l.node)),o.trackChildChange(le(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,Jt.EMPTY_NODE)):t},t}(),me=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=zt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(i.assert)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(i.assert)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:S},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(i.assert)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(i.assert)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:R},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(i.assert)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===zt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function ve(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function ye(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function be(t,e){var n=t.copy();return n.index_=e,n}function _e(t){var e,n={};return t.isDefault()||(t.index_===zt?e="$priority":t.index_===ie?e="$value":t.index_===Pt?e="$key":(Object(i.assert)(t.index_ instanceof re,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(i.stringify)(e),t.startSet_&&(n.startAt=Object(i.stringify)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(i.stringify)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(i.stringify)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(i.stringify)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function we(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==zt&&(e.i=t.index_.toString()),e}var Ie=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=T("p:rest:"),o.listens_={},o}return Object(o.__extends)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(i.assert)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,o){var a=this,s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=_e(t._queryParams);this.restRequest_(s+".json",l,(function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&a.onDataUpdate_(s,n,!1,r),Object(i.safeGet)(a.listens_,u)===c&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=_e(t._queryParams),r=t._path.toString(),o=new i.Deferred;return this.restRequest_(r+".json",n,(function(t,n){var i=n;404===t&&(i=null,t=null),null===t?(e.onDataUpdate_(r,i,!1,null),o.resolve(i)):o.reject(new Error(i))})),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(a){var s=Object(o.__read)(a,2),u=s[0],c=s[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(i.querystring)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(i.jsonEval)(h.responseText)}catch(e){k("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&k("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()}))},e}(it),Te=function(){function t(){this.rootNode_=Jt.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function Ee(){return{value:null,children:new Map}}function Ce(t,e,n){if(mt(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ct(e);t.children.has(r)||t.children.set(r,Ee()),Ce(t.children.get(r),e=ht(e),n)}}function ke(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}(t,(function(t,r){ke(r,new st(e.toString()+"/"+t),n)}))}var Oe=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.__assign)({},t);return this.last_&&j(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),Se=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Oe(t);var n=1e4+2e4*Math.random();q(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;j(e,(function(e,o){o>0&&Object(i.contains)(t.statsToReport_,e)&&(n[e]=o,r=!0)})),r&&this.server_.reportStats(n),q(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Re=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Ae(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Pe,Ne=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Re.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(mt(this.path)){if(null!=this.affectedTree.value)return Object(i.assert)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new st(e));return new t(ut(),n,this.revert)}return Object(i.assert)(ct(this.path)===e,"operationForChild called for unrelated child."),new t(ht(this.path),this.affectedTree,this.revert)},t}(),xe=function(){function t(t,e){this.source=t,this.path=e,this.type=Re.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return mt(this.path)?new t(this.source,ut()):new t(this.source,ht(this.path))},t}(),De=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Re.OVERWRITE}return t.prototype.operationForChild=function(e){return mt(this.path)?new t(this.source,ut(),this.snap.getImmediateChild(e)):new t(this.source,ht(this.path),this.snap)},t}(),je=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Re.MERGE}return t.prototype.operationForChild=function(e){if(mt(this.path)){var n=this.children.subtree(new st(e));return n.isEmpty()?null:n.value?new De(this.source,ut(),n.value):new t(this.source,ut(),n)}return Object(i.assert)(ct(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,ht(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Me=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(mt(t))return this.isFullyInitialized()&&!this.filtered_;var e=ct(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Le=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function Fe(t,e,n,r,o,a){var s=r.filter((function(t){return t.type===n}));s.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(i.assertionError)("Should only compare child_ events.");var r=new St(e.childName,e.snapshotNode),o=new St(n.childName,n.snapshotNode);return t.index_.compare(r,o)}(t,e,n)})),s.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,a);o.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function Ue(t,e){return{eventCache:t,serverCache:e}}function qe(t,e,n,r){return Ue(new Me(e,n,r),t.serverCache)}function Ge(t,e,n,r){return Ue(t.eventCache,new Me(e,n,r))}function Qe(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ve(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Be=function(){function t(t,e){void 0===e&&(Pe||(Pe=new jt(P)),e=Pe),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return j(e,(function(t,e){n=n.set(new st(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ut(),value:this.value};if(mt(t))return null;var n=ct(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(ht(t),e);return null!=i?{path:gt(new st(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(mt(e))return this;var n=ct(e),r=this.children.get(n);return null!==r?r.subtree(ht(e)):new t(null)},t.prototype.set=function(e,n){if(mt(e))return new t(n,this.children);var r=ct(e),i=(this.children.get(r)||new t(null)).set(ht(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(mt(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ct(e),r=this.children.get(n);if(r){var i=r.remove(ht(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(mt(t))return this.value;var e=ct(t),n=this.children.get(e);return n?n.get(ht(t)):null},t.prototype.setTree=function(e,n){if(mt(e))return n;var r,i=ct(e),o=(this.children.get(i)||new t(null)).setTree(ht(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(ut(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(gt(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ut(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(mt(t))return null;var i=ct(t),o=this.children.get(i);return o?o.findOnPath_(ht(t),gt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ut(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(mt(e))return this;this.value&&r(n,this.value);var i=ct(e),o=this.children.get(i);return o?o.foreachOnPath_(ht(e),gt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(ut(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(gt(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Ke=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Be(null))},t}();function ze(t,e,n){if(mt(e))return new Ke(new Be(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=vt(i,e);return o=o.updateChild(a,n),new Ke(t.writeTree_.set(i,o))}var s=new Be(n),u=t.writeTree_.setTree(e,s);return new Ke(u)}function We(t,e,n){var r=t;return j(n,(function(t,n){r=ze(r,gt(e,t),n)})),r}function He(t,e){if(mt(e))return Ke.empty();var n=t.writeTree_.setTree(e,new Be(null));return new Ke(n)}function Ye(t,e){return null!=Xe(t,e)}function Xe(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(vt(n.path,e)):null}function $e(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(zt,(function(t,n){e.push(new St(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new St(t,n.value))})),e}function Je(t,e){if(mt(e))return t;var n=Xe(t,e);return new Ke(null!=n?new Be(n):t.writeTree_.subtree(e))}function Ze(t){return t.writeTree_.isEmpty()}function tn(t,e){return function t(e,n,r){if(null!=n.value)return r.updateChild(e,n.value);var o=null;return n.children.inorderTraversal((function(n,a){".priority"===n?(Object(i.assert)(null!==a.value,"Priority writes must always be leaf nodes"),o=a.value):r=t(gt(e,n),a,r)})),r.getChild(e).isEmpty()||null===o||(r=r.updateChild(gt(e,".priority"),o)),r}(ut(),t.writeTree_,e)}function en(t,e){return dn(e,t)}function nn(t,e){if(t.snap)return _t(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&_t(gt(t.path,n),e))return!0;return!1}function rn(t){return t.visible}function on(t,e,n){for(var r=Ke.empty(),o=0;o<t.length;++o){var a=t[o];if(e(a)){var s=a.path,u=void 0;if(a.snap)_t(n,s)?r=ze(r,u=vt(n,s),a.snap):_t(s,n)&&(u=vt(s,n),r=ze(r,ut(),a.snap.getChild(u)));else{if(!a.children)throw Object(i.assertionError)("WriteRecord should have .snap or .children");if(_t(n,s))r=We(r,u=vt(n,s),a.children);else if(_t(s,n))if(mt(u=vt(s,n)))r=We(r,ut(),a.children);else{var c=Object(i.safeGet)(a.children,ct(u));if(c){var l=c.getChild(ht(u));r=ze(r,ut(),l)}}}}}return r}function an(t,e,n,r,i){if(r||i){var o=Je(t.visibleWrites,e);return!i&&Ze(o)?n:i||null!=n||Ye(o,ut())?tn(on(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(_t(t.path,e)||_t(e,t.path))}),e),n||Jt.EMPTY_NODE):null}var a=Xe(t.visibleWrites,e);if(null!=a)return a;var s=Je(t.visibleWrites,e);return Ze(s)?n:null!=n||Ye(s,ut())?tn(s,n||Jt.EMPTY_NODE):null}function sn(t,e,n,r){return an(t.writeTree,t.treePath,e,n,r)}function un(t,e){return function(t,e,n){var r=Jt.EMPTY_NODE,i=Xe(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(zt,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=Je(t.visibleWrites,e);return n.forEachChild(zt,(function(t,e){var n=tn(Je(o,new st(t)),e);r=r.updateImmediateChild(t,n)})),$e(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return $e(Je(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function cn(t,e,n,r){return function(t,e,n,r,o){Object(i.assert)(r||o,"Either existingEventSnap or existingServerSnap must exist");var a=gt(e,n);if(Ye(t.visibleWrites,a))return null;var s=Je(t.visibleWrites,a);return Ze(s)?o.getChild(n):tn(s,o.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function ln(t,e){return function(t,e){return Xe(t.visibleWrites,e)}(t.writeTree,gt(t.treePath,e))}function hn(t,e,n){return function(t,e,n,r){var i=gt(e,n),o=Xe(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?tn(Je(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function fn(t,e){return dn(gt(t.treePath,e),t.writeTree)}function dn(t,e){return{treePath:t,writeTree:e}}var pn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(i.assert)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(i.assert)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,fe(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,he(n,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,le(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw Object(i.assertionError)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,fe(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),gn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),mn=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Me(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return hn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ve(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s,u=Je(t.visibleWrites,e),c=Xe(u,ut());if(null!=c)s=c;else{if(null==n)return[];s=tn(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function vn(t,e,n,r,o,a){var s=e.eventCache;if(null!=ln(r,n))return e;var u=void 0,c=void 0;if(mt(n))if(Object(i.assert)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Ve(e),h=un(r,l instanceof Jt?l:Jt.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,a)}else{var f=sn(r,Ve(e));u=t.filter.updateFullNode(e.eventCache.getNode(),f,a)}else{var d=ct(n);if(".priority"===d){Object(i.assert)(1===lt(n),"Can't have a priority with additional path components");var p=s.getNode(),g=cn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):s.getNode()}else{var m=ht(n),v=void 0;if(s.isCompleteForChild(d)){c=e.serverCache.getNode();var y=cn(r,n,s.getNode(),c);v=null!=y?s.getNode().getImmediateChild(d).updateChild(m,y):s.getNode().getImmediateChild(d)}else v=hn(r,d,e.serverCache);u=null!=v?t.filter.updateChild(s.getNode(),d,v,m,o,a):s.getNode()}}return qe(e,u,s.isFullyInitialized()||mt(n),t.filter.filtersNodes())}function yn(t,e,n,r,i,o,a,s){var u,c=e.serverCache,l=a?t.filter:t.filter.getIndexedFilter();if(mt(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=ct(n);if(!c.isCompleteForPath(n)&&lt(n)>1)return e;var d=ht(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);u=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,gn,null)}var g=Ge(e,u,c.isFullyInitialized()||mt(n),l.filtersNodes());return vn(t,g,n,i,new mn(i,g,o),s)}function bn(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new mn(i,e,o);if(mt(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=qe(e,u,!0,t.filter.filtersNodes());else{var h=ct(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=qe(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=ht(n),d=c.getNode().getImmediateChild(h),p=void 0;if(mt(f))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===ft(f)&&g.getChild(pt(f)).isEmpty()?g:g.updateChild(f,r):Jt.EMPTY_NODE}s=d.equals(p)?e:qe(e,t.filter.updateChild(c.getNode(),h,p,f,l,a),c.isFullyInitialized(),t.filter.filtersNodes())}}return s}function _n(t,e){return t.eventCache.isCompleteForChild(e)}function wn(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function In(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=mt(n)?r:new Be(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=wn(0,e.serverCache.getNode().getImmediateChild(n),r);c=yn(t,c,new st(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=wn(0,e.serverCache.getNode().getImmediateChild(n),r);c=yn(t,c,new st(n),h,i,o,a,s)}})),c}var Tn,En=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new de(r.getIndex()),o=(n=r).loadsAllData()?new de(n.getIndex()):n.hasLimit()?new ge(n):new pe(n);this.processor_=function(t){return{filter:t}}(o);var a=e.serverCache,s=e.eventCache,u=i.updateFullNode(Jt.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(Jt.EMPTY_NODE,s.getNode(),null),l=new Me(u,a.isFullyInitialized(),i.filtersNodes()),h=new Me(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=Ue(h,l),this.eventGenerator_=new Le(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Cn(t,e){var n=Ve(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!mt(e)&&!n.getImmediateChild(ct(e)).isEmpty())?n.getChild(e):null}function kn(t){return 0===t.eventRegistrations_.length}function On(t,e,n){var r=[];if(n){Object(i.assert)(null==e,"A cancel should cancel all event registrations.");var o=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,o);e&&r.push(e)}))}if(e){for(var a=[],s=0;s<t.eventRegistrations_.length;++s){var u=t.eventRegistrations_[s];if(u.matches(e)){if(e.hasAnyCallback()){a=a.concat(t.eventRegistrations_.slice(s+1));break}}else a.push(u)}t.eventRegistrations_=a}else t.eventRegistrations_=[];return r}function Sn(t,e,n,r){e.type===Re.MERGE&&null!==e.source.queryId&&(Object(i.assert)(Ve(t.viewCache_),"We should always have a full cache before handling merges"),Object(i.assert)(Qe(t.viewCache_),"Missing event cache, even though we have a server cache"));var o,a,s=t.viewCache_,u=function(t,e,n,r,o){var a,s,u=new pn;if(n.type===Re.OVERWRITE){var c=n;c.source.fromUser?a=bn(t,e,c.path,c.snap,r,o,u):(Object(i.assert)(c.source.fromServer,"Unknown source."),s=c.source.tagged||e.serverCache.isFiltered()&&!mt(c.path),a=yn(t,e,c.path,c.snap,r,o,s,u))}else if(n.type===Re.MERGE){var l=n;l.source.fromUser?a=function(t,e,n,r,i,o,a){var s=e;return r.foreach((function(r,u){var c=gt(n,r);_n(e,ct(c))&&(s=bn(t,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=gt(n,r);_n(e,ct(c))||(s=bn(t,s,c,u,i,o,a))})),s}(t,e,l.path,l.children,r,o,u):(Object(i.assert)(l.source.fromServer,"Unknown source."),s=l.source.tagged||e.serverCache.isFiltered(),a=In(t,e,l.path,l.children,r,o,s,u))}else if(n.type===Re.ACK_USER_WRITE){var h=n;a=h.revert?function(t,e,n,r,o,a){var s;if(null!=ln(r,n))return e;var u=new mn(r,e,o),c=e.eventCache.getNode(),l=void 0;if(mt(n)||".priority"===ct(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=sn(r,Ve(e));else{var f=e.serverCache.getNode();Object(i.assert)(f instanceof Jt,"serverChildren would be complete if leaf node"),h=un(r,f)}l=t.filter.updateFullNode(c,h=h,a)}else{var d=ct(n),p=hn(r,d,e.serverCache);null==p&&e.serverCache.isCompleteForChild(d)&&(p=c.getImmediateChild(d)),(l=null!=p?t.filter.updateChild(c,d,p,ht(n),u,a):e.eventCache.getNode().hasChild(d)?t.filter.updateChild(c,d,Jt.EMPTY_NODE,ht(n),u,a):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(s=sn(r,Ve(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,s,a))}return s=e.serverCache.isFullyInitialized()||null!=ln(r,ut()),qe(e,l,s,t.filter.filtersNodes())}(t,e,h.path,r,o,u):function(t,e,n,r,i,o,a){if(null!=ln(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(mt(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return yn(t,e,n,u.getNode().getChild(n),i,o,s,a);if(mt(n)){var c=new Be(null);return u.getNode().forEachChild(Pt,(function(t,e){c=c.set(new st(t),e)})),In(t,e,n,c,i,o,s,a)}return e}var l=new Be(null);return r.foreach((function(t,e){var r=gt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),In(t,e,n,l,i,o,s,a)}(t,e,h.path,h.affectedTree,r,o,u)}else{if(n.type!==Re.LISTEN_COMPLETE)throw Object(i.assertionError)("Unknown operation type: "+n.type);a=function(t,e,n,r,i){var o=e.serverCache;return vn(t,Ge(e,o.getNode(),o.isFullyInitialized()||mt(n),o.isFiltered()),n,r,gn,i)}(t,e,n.path,r,u)}var f=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Qe(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(ce(Qe(e)))}}(e,a,f),{viewCache:a,changes:f}}(t.processor_,s,e,n,r);return o=t.processor_,a=u.viewCache,Object(i.assert)(a.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Object(i.assert)(a.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Object(i.assert)(u.viewCache.serverCache.isFullyInitialized()||!s.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Rn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Rn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})})),Fe(t,i,"child_removed",e,r,n),Fe(t,i,"child_added",e,r,n),Fe(t,i,"child_moved",o,r,n),Fe(t,i,"child_changed",e,r,n),Fe(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var An,Pn=function(){return function(){this.views=new Map}}();function Nn(t,e,n,r){var a,s,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(i.assert)(null!=c,"SyncTree gave us an op for an invalid query."),Sn(c,e,n,r)}var l=[];try{for(var h=Object(o.__values)(t.views.values()),f=h.next();!f.done;f=h.next())l=l.concat(Sn(c=f.value,e,n,r))}catch(d){a={error:d}}finally{try{f&&!f.done&&(s=h.return)&&s.call(h)}finally{if(a)throw a.error}}return l}function xn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var a=sn(n,i?r:null),s=!1;a?s=!0:r instanceof Jt?(a=un(n,r),s=!1):(a=Jt.EMPTY_NODE,s=!1);var u=Ue(new Me(a,s,!1),new Me(r,i,!1));return new En(e,u)}return o}function Dn(t){var e,n,r=[];try{for(var i=Object(o.__values)(t.views.values()),a=i.next();!a.done;a=i.next()){var s=a.value;s.query._queryParams.loadsAllData()||r.push(s)}}catch(u){e={error:u}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function jn(t,e){var n,r,i=null;try{for(var a=Object(o.__values)(t.views.values()),s=a.next();!s.done;s=a.next())i=i||Cn(s.value,e)}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return i}function Mn(t,e){return e._queryParams.loadsAllData()?Un(t):t.views.get(e._queryIdentifier)}function Ln(t,e){return null!=Mn(t,e)}function Fn(t){return null!=Un(t)}function Un(t){var e,n;try{for(var r=Object(o.__values)(t.views.values()),i=r.next();!i.done;i=r.next()){var a=i.value;if(a.query._queryParams.loadsAllData())return a}}catch(s){e={error:s}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var qn=1,Gn=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Be(null),this.pendingWriteTree_={visibleWrites:Ke.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Qn(t,e,n,r,o){return function(t,e,n,r,o){Object(i.assert)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=ze(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,o),o?Hn(t,new De({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Vn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));Object(i.assert)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var o=r.visible,a=!1,s=t.allWrites.length-1;o&&s>=0;){var u=t.allWrites[s];u.visible&&(s>=n&&nn(u,r.path)?o=!1:_t(r.path,u.path)&&(a=!0)),s--}return!!o&&(a?(function(t){t.visibleWrites=on(t.allWrites,rn,ut()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=He(t.visibleWrites,r.path):j(r.children,(function(e){t.visibleWrites=He(t.visibleWrites,gt(r.path,e))})),!0))}(t.pendingWriteTree_,e)){var o=new Be(null);return null!=r.snap?o=o.set(ut(),!0):j(r.children,(function(t){o=o.set(new st(t),!0)})),Hn(t,new Ne(r.path,o,n))}return[]}function Bn(t,e,n){return Hn(t,new De({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Kn(t,e,n,r){var a=e._path,s=t.syncPointTree_.get(a),u=[];if(s&&("default"===e._queryIdentifier||Ln(s,e))){var c=function(t,e,n,r){var a,s,u=e._queryIdentifier,c=[],l=[],h=Fn(t);if("default"===u)try{for(var f=Object(o.__values)(t.views.entries()),d=f.next();!d.done;d=f.next()){var p,g=Object(o.__read)(d.value,2),m=g[0];l=l.concat(On(p=g[1],n,r)),kn(p)&&(t.views.delete(m),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(v){a={error:v}}finally{try{d&&!d.done&&(s=f.return)&&s.call(f)}finally{if(a)throw a.error}}else(p=t.views.get(u))&&(l=l.concat(On(p,n,r)),kn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Fn(t)&&c.push(new(Object(i.assert)(Tn,"Reference.ts has not been loaded"),Tn)(e._repo,e._path)),{removed:c,events:l}}(s,e,n,r);0===s.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(a));var l=c.removed;u=c.events;var h=-1!==l.findIndex((function(t){return t._queryParams.loadsAllData()})),f=t.syncPointTree_.findOnPath(a,(function(t,e){return Fn(e)}));if(h&&!f){var d=t.syncPointTree_.subtree(a);if(!d.isEmpty())for(var p=function(t){return t.fold((function(t,e,n){if(e&&Fn(e))return[Un(e)];var r=[];return e&&(r=Dn(e)),j(n,(function(t,e){r=r.concat(e)})),r}))}(d),g=0;g<p.length;++g){var m=p[g],v=m.query,y=Yn(t,m);t.listenProvider_.startListening(er(v),Xn(t,v),y.hashFn,y.onComplete)}}!f&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(er(e),null):l.forEach((function(e){var n=t.queryToTagMap.get($n(e));t.listenProvider_.stopListening(er(e),n)}))),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=$n(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function zn(t,e,n){var r=e._path,o=null,a=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=vt(t,r);o=o||jn(e,n),a=a||Fn(e)}));var s,u=t.syncPointTree_.get(r);u?(a=a||Fn(u),o=o||jn(u,ut())):(u=new Pn,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=o?s=!0:(s=!1,o=Jt.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=jn(e,ut());n&&(o=o.updateImmediateChild(t,n))})));var c=Ln(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=$n(e);Object(i.assert)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=qn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var f=function(t,e,n,r,i,o){var a=xn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),function(t,e){t.eventRegistrations_.push(e)}(a,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(zt,(function(t,e){r.push(le(t,e))})),n.isFullyInitialized()&&r.push(ce(n.getNode())),Rn(t,r,n.getNode(),e)}(a,n)}(u,e,n,en(t.pendingWriteTree_,r),o,s);if(!c&&!a){var d=Mn(u,e);f=f.concat(function(t,e,n){var r=e._path,o=Xn(t,e),a=Yn(t,n),s=t.listenProvider_.startListening(er(e),o,a.hashFn,a.onComplete),u=t.syncPointTree_.subtree(r);if(o)Object(i.assert)(!Fn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold((function(t,e,n){if(!mt(t)&&e&&Fn(e))return[Un(e).query];var r=[];return e&&(r=r.concat(Dn(e).map((function(t){return t.query})))),j(n,(function(t,e){r=r.concat(e)})),r})),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(er(h),Xn(t,h))}return s}(t,e,d))}return f}function Wn(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=jn(n,vt(t,e));if(r)return r}));return an(r,e,i,n,!0)}function Hn(t,e){return function t(e,n,r,i){if(mt(e.path))return function t(e,n,r,i){var o=n.get(ut());null==r&&null!=o&&(r=jn(o,ut()));var a=[];return n.children.inorderTraversal((function(n,o){var s=r?r.getImmediateChild(n):null,u=fn(i,n),c=e.operationForChild(n);c&&(a=a.concat(t(c,o,s,u)))})),o&&(a=a.concat(Nn(o,e,i,r))),a}(e,n,r,i);var o=n.get(ut());null==r&&null!=o&&(r=jn(o,ut()));var a=[],s=ct(e.path),u=e.operationForChild(s),c=n.children.get(s);if(c&&u){var l=r?r.getImmediateChild(s):null,h=fn(i,s);a=a.concat(t(u,c,l,h))}return o&&(a=a.concat(Nn(o,e,i,r))),a}(e,t.syncPointTree_,null,en(t.pendingWriteTree_,ut()))}function Yn(t,e){var n=e.query,r=Xn(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||Jt.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=Jn(t,n);if(r){var i=Zn(r),o=i.path,a=i.queryId,s=vt(o,e);return tr(t,o,new xe(Ae(a),s))}return[]}(t,n._path,r):function(t,e){return Hn(t,new xe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Kn(t,n,null,i)}}}function Xn(t,e){var n=$n(e);return t.queryToTagMap.get(n)}function $n(t){return t._path.toString()+"$"+t._queryIdentifier}function Jn(t,e){return t.tagToQueryMap.get(e)}function Zn(t){var e=t.indexOf("$");return Object(i.assert)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new st(t.substr(0,e))}}function tr(t,e,n){var r=t.syncPointTree_.get(e);return Object(i.assert)(r,"Missing sync point for query tag that we're tracking"),Nn(r,n,en(t.pendingWriteTree_,e),null)}function er(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(i.assert)(An,"Reference.ts has not been loaded"),An)(t._repo,t._path):t}var nr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),rr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=gt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return Wn(this.syncTree_,this.path_)},t}(),ir=function(t,e,n){return t&&"object"==typeof t?(Object(i.assert)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?or(t[".sv"],e,n):"object"==typeof t[".sv"]?ar(t[".sv"],e):void Object(i.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},or=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(i.assert)(!1,"Unexpected server value: "+t)}},ar=function(t,e,n){t.hasOwnProperty("increment")||Object(i.assert)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(i.assert)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(i.assert)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var a=o.getValue();return"number"!=typeof a?r:a+r},sr=function(t,e,n,r){return cr(e,new rr(n,t),r)},ur=function(t,e,n){return cr(t,new nr(e),n)};function cr(t,e,n){var r,i=t.getPriority().val(),o=ir(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=ir(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new Kt(s,te(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Kt(o))),u.forEachChild(zt,(function(t,i){var o=cr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}var lr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function hr(t,e){for(var n=e instanceof st?e:new st(e),r=t,o=ct(n);null!==o;){var a=Object(i.safeGet)(r.node.children,o)||{children:{},childCount:0};r=new lr(o,r,a),o=ct(n=ht(n))}return r}function fr(t){return t.node.value}function dr(t,e){t.node.value=e,function t(e){null!==e.parent&&function(e,n,r){var o=function(t){return void 0===fr(t)&&!pr(t)}(r),a=Object(i.contains)(e.node.children,n);o&&a?(delete e.node.children[n],e.node.childCount--,t(e)):o||a||(e.node.children[n]=r.node,e.node.childCount++,t(e))}(e.parent,e.name,e)}(t)}function pr(t){return t.node.childCount>0}function gr(t,e){j(t.node.children,(function(n,r){e(new lr(n,t,r))}))}function mr(t){return new st(null===t.parent?t.name:mr(t.parent)+"/"+t.name)}var vr=/[\[\].#$\/\u0000-\u001F\u007F]/,yr=/[\[\].#$\u0000-\u001F\u007F]/,br=function(t){return"string"==typeof t&&0!==t.length&&!vr.test(t)},_r=function(t){return"string"==typeof t&&0!==t.length&&!yr.test(t)},wr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!O(t)||t&&"object"==typeof t&&Object(i.contains)(t,".sv")},Ir=function(t,e,n,r){r&&void 0===e||Tr(Object(i.errorPrefix)(t,"value"),e,n)},Tr=function(t,e,n){var r=n instanceof st?new wt(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+Tt(r));if("function"==typeof e)throw new Error(t+"contains a function "+Tt(r)+" with contents = "+e.toString());if(O(e))throw new Error(t+"contains "+e.toString()+" "+Tt(r));if("string"==typeof e&&e.length>10485760/3&&Object(i.stringLength)(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+Tt(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var o=!1,a=!1;if(j(e,(function(e,n){if(".value"===e)o=!0;else if(".priority"!==e&&".sv"!==e&&(a=!0,!br(e)))throw new Error(t+" contains an invalid key ("+e+") "+Tt(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var s,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(i.stringLength)(e),It(t)}(r,e),Tr(t,n,r),u=(s=r).parts_.pop(),s.byteLength_-=Object(i.stringLength)(u),s.parts_.length>0&&(s.byteLength_-=1)})),o&&a)throw new Error(t+' contains ".value" child '+Tt(r)+" in addition to actual children.")}},Er=function(t,e,n,r){if(!r||void 0!==e){var o=Object(i.errorPrefix)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");var a=[];j(e,(function(t,e){var r=new st(t);if(Tr(o,e,gt(n,r)),".priority"===ft(r)&&!wr(e))throw new Error(o+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(r)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=dt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!br(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(yt);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&_t(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}},Cr=function(t,e,n){if(!n||void 0!==e){if(O(e))throw new Error(Object(i.errorPrefix)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!wr(e))throw new Error(Object(i.errorPrefix)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},kr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(i.errorPrefix)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Or=function(t,e,n,r){if(!(r&&void 0===n||br(n)))throw new Error(Object(i.errorPrefix)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Sr=function(t,e,n,r){if(!(r&&void 0===n||_r(n)))throw new Error(Object(i.errorPrefix)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Rr=function(t,e){if(".info"===ct(e))throw new Error(t+" failed = Can't modify data under /.info/")},Ar=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!br(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),_r(t)}(n))throw new Error(Object(i.errorPrefix)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Pr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(i.errorPrefix)(t,e)+"must be a boolean.")},Nr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function xr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||bt(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Dr(t,e,n){xr(t,n),Mr(t,(function(t){return bt(t,e)}))}function jr(t,e,n){xr(t,n),Mr(t,(function(t){return _t(t,e)||_t(e,t)}))}function Mr(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Lr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Lr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();b&&I("event: "+n.toString()),U(r)}}}var Fr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Nr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Ee(),this.transactionQueueTree_=new lr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Ur(t){var e=t.infoData_.getNode(new st(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function qr(t){return(e=(e={timestamp:Ur(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function Gr(t,e,n,r,o){t.dataUpdateCount++;var a=new st(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var s=[];if(o)if(r){var u=Object(i.map)(n,(function(t){return te(t)}));s=function(t,e,n,r){var i=Jn(t,r);if(i){var o=Zn(i),a=o.path,s=o.queryId,u=vt(a,e),c=Be.fromObject(n);return tr(t,a,new je(Ae(s),u,c))}return[]}(t.serverSyncTree_,a,u,o)}else{var c=te(n);s=function(t,e,n,r){var i=Jn(t,r);if(null!=i){var o=Zn(i),a=o.path,s=o.queryId,u=vt(a,e);return tr(t,a,new De(Ae(s),u,n))}return[]}(t.serverSyncTree_,a,c,o)}else if(r){var l=Object(i.map)(n,(function(t){return te(t)}));s=function(t,e,n){var r=Be.fromObject(n);return Hn(t,new je({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,a,l)}else{var h=te(n);s=Bn(t.serverSyncTree_,a,h)}var f=a;s.length>0&&(f=Zr(t,a)),jr(t.eventQueue_,f,s)}function Qr(t,e){Vr(t,"connected",e),!1===e&&function(t){Yr(t,"onDisconnectEvents");var e=qr(t),n=Ee();ke(t.onDisconnect_,ut(),(function(r,i){var o=sr(r,i,t.serverSyncTree_,e);Ce(n,r,o)}));var r=[];ke(n,ut(),(function(e,n){r=r.concat(Bn(t.serverSyncTree_,e,n));var i=ri(t,e);Zr(t,i)})),t.onDisconnect_=Ee(),jr(t.eventQueue_,ut(),r)}(t)}function Vr(t,e,n){var r=new st("/.info/"+e),i=te(n);t.infoData_.updateSnapshot(r,i);var o=Bn(t.infoSyncTree_,r,i);jr(t.eventQueue_,r,o)}function Br(t){return t.nextWriteId_++}function Kr(t,e,n,r,i){Yr(t,"set",{path:e.toString(),value:n,priority:r});var o=qr(t),a=te(n,r),s=Wn(t.serverSyncTree_,e),u=ur(a,s,o),c=Br(t),l=Qn(t.serverSyncTree_,e,u,c,!0);xr(t.eventQueue_,l),t.server_.put(e.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||k("set at "+e+" failed: "+n);var a=Vn(t.serverSyncTree_,c,!o);jr(t.eventQueue_,e,a),Xr(0,i,n,r)}));var h=ri(t,e);Zr(t,h),jr(t.eventQueue_,h,[])}function zr(t,e,n,r){var i=te(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&Ce(t.onDisconnect_,e,i),Xr(0,r,n,o)}))}function Wr(t,e,n){var r;r=".info"===ct(e._path)?Kn(t.infoSyncTree_,e,n):Kn(t.serverSyncTree_,e,n),Dr(t.eventQueue_,e._path,r)}function Hr(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}function Yr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),I.apply(void 0,Object(o.__spreadArray)([r],Object(o.__read)(e)))}function Xr(t,e,n,r){e&&U((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function $r(t,e,n){return Wn(t.serverSyncTree_,e,n)||Jt.EMPTY_NODE}function Jr(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||ni(t,e),fr(e)){var n=ei(t,e);Object(i.assert)(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),o=$r(t,e,r),a=o,s=o.hash(),u=0;u<n.length;u++){var c=n[u];Object(i.assert)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=vt(e,c.path);a=a.updateChild(l,c.currentOutputSnapshotRaw)}var h=a.val(!0),f=e;t.server_.put(f.toString(),h,(function(r){Yr(t,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(e){n[e].status=2,i=i.concat(Vn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},s=0;s<n.length;s++)a(s);for(ni(t,hr(t.transactionQueueTree_,e)),Jr(t,t.transactionQueueTree_),jr(t.eventQueue_,e,i),s=0;s<o.length;s++)U(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)n[s].status=3===n[s].status?4:0;else for(k("transaction at "+f.toString()+" failed: "+r),s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r;Zr(t,e)}}),s)}(t,mr(e),n)}else pr(e)&&gr(e,(function(e){Jr(t,e)}))}function Zr(t,e){var n=ti(t,e),r=mr(n);return function(t,e,n){if(0!==e.length){for(var r=[],o=[],a=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),s=function(s){var u,c=e[s],l=vt(n,c.path),h=!1;if(Object(i.assert)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,o=o.concat(Vn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",o=o.concat(Vn(t.serverSyncTree_,c.currentWriteId,!0));else{var f=$r(t,c.path,a);c.currentInputSnapshot=f;var d=e[s].update(f.val());if(void 0!==d){Tr("transaction failed: Data returned ",d,c.path);var p=te(d);"object"==typeof d&&null!=d&&Object(i.contains)(d,".priority")||(p=p.updatePriority(f.getPriority()));var g=c.currentWriteId,m=qr(t),v=ur(p,f,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=v,c.currentWriteId=Br(t),a.splice(a.indexOf(g),1),o=(o=o.concat(Qn(t.serverSyncTree_,c.path,v,c.currentWriteId,c.applyLocally))).concat(Vn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",o=o.concat(Vn(t.serverSyncTree_,c.currentWriteId,!0))}jr(t.eventQueue_,n,o),o=[],h&&(e[s].status=2,setTimeout(e[s].unwatcher,Math.floor(0)),e[s].onComplete&&r.push("nodata"===u?function(){return e[s].onComplete(null,!1,e[s].currentInputSnapshot)}:function(){return e[s].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)s(u);for(ni(t,t.transactionQueueTree_),u=0;u<r.length;u++)U(r[u]);Jr(t,t.transactionQueueTree_)}}(t,ei(t,n),r),r}function ti(t,e){var n,r=t.transactionQueueTree_;for(n=ct(e);null!==n&&void 0===fr(r);)r=hr(r,n),n=ct(e=ht(e));return r}function ei(t,e){var n=[];return function t(e,n,r){var i=fr(n);if(i)for(var o=0;o<i.length;o++)r.push(i[o]);gr(n,(function(n){t(e,n,r)}))}(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function ni(t,e){var n=fr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,dr(e,n.length>0?n:void 0)}gr(e,(function(e){ni(t,e)}))}function ri(t,e){var n=mr(ti(t,e)),r=hr(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){ii(t,e)})),ii(t,r),function t(e,n,r,i){r&&!i&&n(e),gr(e,(function(e){t(e,n,!0,i)})),r&&i&&n(e)}(r,(function(e){ii(t,e)})),n}function ii(t,e){var n=fr(e);if(n){for(var r=[],o=[],a=-1,s=0;s<n.length;s++)3===n[s].status||(1===n[s].status?(Object(i.assert)(a===s-1,"All SENT items should be at beginning of queue."),a=s,n[s].status=3,n[s].abortReason="set"):(Object(i.assert)(0===n[s].status,"Unexpected transaction status in abort"),n[s].unwatcher(),o=o.concat(Vn(t.serverSyncTree_,n[s].currentWriteId,!0)),n[s].onComplete&&r.push(n[s].onComplete.bind(null,new Error("set"),!1,null))));for(-1===a?dr(e,void 0):n.length=a+1,jr(t.eventQueue_,mr(e),o),s=0;s<r.length;s++)U(r[s])}}var oi=function(t,e){var n=ai(t),r=n.namespace;return"firebase.com"===n.domain&&C(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||C("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&k("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new K(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new st(n.pathString)}},ai=function(t){var e="",n="",r="",i="",a="",s=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var f=t.indexOf("?");-1===f&&(f=t.length),e=t.substring(0,Math.min(h,f)),h<f&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,f)));var d=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.__values)(t.split("&")),a=i.next();!a.done;a=i.next()){var s=a.value;if(0!==s.length){var u=s.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):k("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,f)));(l=e.indexOf(":"))>=0?(s="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),a=r}"ns"in d&&(a=d.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:s,scheme:u,pathString:i,namespace:a}},si=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(i.stringify)(this.snapshot.exportVal())},t}(),ui=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),ci=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(i.assert)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),li=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t,e,n,r=new i.Deferred;return t=this._repo,e=this._path,n=r.wrapCallback((function(){})),t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&function t(e,n){if(mt(n))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;var r=e.value;return e.value=null,r.forEachChild(zt,(function(t,n){Ce(e,new st(t),n)})),t(e,n)}if(e.children.size>0){var i=ct(n);return n=ht(n),e.children.has(i)&&t(e.children.get(i),n)&&e.children.delete(i),0===e.children.size}return!0}(t.onDisconnect_,e),Xr(0,n,r,i)})),r.promise},t.prototype.remove=function(){Rr("OnDisconnect.remove",this._path);var t=new i.Deferred;return zr(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){Rr("OnDisconnect.set",this._path),Ir("OnDisconnect.set",t,this._path,!1);var e=new i.Deferred;return zr(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){Rr("OnDisconnect.setWithPriority",this._path),Ir("OnDisconnect.setWithPriority",t,this._path,!1),Cr("OnDisconnect.setWithPriority",e,!1);var n=new i.Deferred;return function(t,e,n,r,i){var o=te(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&Ce(t.onDisconnect_,e,o),Xr(0,i,n,r)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){Rr("OnDisconnect.update",this._path),Er("OnDisconnect.update",t,this._path,!1);var e=new i.Deferred;return function(t,e,n,r){if(Object(i.isEmpty)(n))return I("onDisconnect().update() called with empty data.  Don't do anything."),void Xr(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&j(n,(function(n,r){var i=te(r);Ce(t.onDisconnect_,gt(e,n),i)})),Xr(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),hi=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return mt(this._path)?null:ft(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new gi(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=we(this._queryParams),e=x(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return we(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(i.getModularInstance)(e))instanceof t))return!1;var n=this._repo===e._repo,r=bt(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function fi(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function di(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Pt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==S)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==R)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===zt){if(null!=e&&!wr(e)||null!=n&&!wr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(i.assert)(t.getIndex()instanceof re||t.getIndex()===ie,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function pi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var gi=function(t){function e(e,n){return t.call(this,e,n,new me,!1)||this}return Object(o.__extends)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=pt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(hi),mi=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new st(e),r=bi(this.ref,e);return new t(this._node.getChild(n),r,zt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return e(new t(i,bi(n.ref,r),zt))}))},t.prototype.hasChild=function(t){var e=new st(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function vi(t,e){return(t=Object(i.getModularInstance)(t))._checkNotDeleted("ref"),void 0!==e?bi(t._root,e):t._root}function yi(t,e){(t=Object(i.getModularInstance)(t))._checkNotDeleted("refFromURL");var n=oi(e,t._repo.repoInfo_.nodeAdmin);Ar("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||C("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),vi(t,n.path.toString())}function bi(t,e){var n;return null===ct((t=Object(i.getModularInstance)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Sr("child","path",n,!1)):Sr("child","path",e,!1),new gi(t._repo,gt(t._path,e))}function _i(t,e){t=Object(i.getModularInstance)(t),Rr("push",t._path),Ir("push",e,t._path,!0);var n,r=Ur(t._repo),o=ae(r),a=bi(t,o),s=bi(t,o);return n=null!=e?Ii(s,e).then((function(){return s})):Promise.resolve(s),a.then=n.then.bind(n),a.catch=n.then.bind(n,void 0),a}function wi(t){return Rr("remove",t._path),Ii(t,null)}function Ii(t,e){t=Object(i.getModularInstance)(t),Rr("set",t._path),Ir("set",e,t._path,!1);var n=new i.Deferred;return Kr(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Ti(t,e){t=Object(i.getModularInstance)(t),Rr("setPriority",t._path),Cr("setPriority",e,!1);var n=new i.Deferred;return Kr(t._repo,gt(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function Ei(t,e,n){if(Rr("setWithPriority",t._path),Ir("setWithPriority",e,t._path,!1),Cr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new i.Deferred;return Kr(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function Ci(t,e){Er("update",e,t._path,!1);var n=new i.Deferred;return function(t,e,n,r){Yr(t,"update",{path:e.toString(),value:n});var o=!0,a=qr(t),s={};if(j(n,(function(n,r){o=!1,s[n]=sr(gt(e,n),te(r),t.serverSyncTree_,a)})),o)I("update() called with empty data.  Don't do anything."),Xr(0,r,"ok",void 0);else{var u=Br(t),c=function(t,e,n,r){!function(t,e,n,r){Object(i.assert)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=We(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var o=Be.fromObject(n);return Hn(t,new je({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(t.serverSyncTree_,e,s,u);xr(t.eventQueue_,c),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||k("update at "+e+" failed: "+n);var a=Vn(t.serverSyncTree_,u,!o),s=a.length>0?Zr(t,e):e;jr(t.eventQueue_,s,a),Xr(0,r,n,i)})),j(n,(function(n){var r=ri(t,gt(e,n));Zr(t,r)})),jr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}var ki=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new si("value",this,new mi(t.snapshotNode,new gi(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new ui(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Oi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new ui(this,t,e):null},t.prototype.createEvent=function(t,e){Object(i.assert)(null!=t.childName,"Child events should have a childName.");var n=bi(new gi(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new si(t.type,this,new mi(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Si(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(e,n){Wr(t._repo,t,c),a(e,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new ci(n,o||void 0),c="value"===e?new ki(u):new Oi(e,u);return function(t,e,n){var r;r=".info"===ct(e._path)?zn(t.infoSyncTree_,e,n):zn(t.serverSyncTree_,e,n),Dr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return Wr(t._repo,t,c)}}function Ri(t,e,n,r){return Si(t,"value",e,n,r)}function Ai(t,e,n,r){return Si(t,"child_added",e,n,r)}function Pi(t,e,n,r){return Si(t,"child_changed",e,n,r)}function Ni(t,e,n,r){return Si(t,"child_moved",e,n,r)}function xi(t,e,n,r){return Si(t,"child_removed",e,n,r)}function Di(t,e,n){var r=null,i=n?new ci(n):null;"value"===e?r=new ki(i):e&&(r=new Oi(e,i)),Wr(t._repo,t,r)}var ji=function(){return function(){}}(),Mi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Ir("endAt",this._value,t._path,!0);var e=ye(t._queryParams,this._value,this._key);if(pi(e),di(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hi(t._repo,t._path,e,t._orderByCalled)},e}(ji);function Li(t,e){return Or("endAt","key",e,!0),new Mi(t,e)}var Fi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Ir("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Pt?("string"==typeof n&&(n=ue(n)),i=ye(e,n,r)):i=ye(e,n,null==r?S:ue(r)),i.endBeforeSet_=!0,i);if(pi(o),di(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new hi(t._repo,t._path,o,t._orderByCalled)},e}(ji);function Ui(t,e){return Or("endBefore","key",e,!0),new Fi(t,e)}var qi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Ir("startAt",this._value,t._path,!0);var e=ve(t._queryParams,this._value,this._key);if(pi(e),di(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new hi(t._repo,t._path,e,t._orderByCalled)},e}(ji);function Gi(t,e){return void 0===t&&(t=null),Or("startAt","key",e,!0),new qi(t,e)}var Qi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){Ir("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Pt?("string"==typeof n&&(n=se(n)),i=ve(e,n,r)):i=ve(e,n,null==r?R:se(r)),i.startAfterSet_=!0,i);if(pi(o),di(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new hi(t._repo,t._path,o,t._orderByCalled)},e}(ji);function Vi(t,e){return Or("startAfter","key",e,!0),new Qi(t,e)}var Bi=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new hi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(ji);function Ki(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Bi(t)}var zi=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.__extends)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new hi(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(ji);function Wi(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new zi(t)}var Hi=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(o.__extends)(e,t),e.prototype._apply=function(t){fi(t,"orderByChild");var e=new st(this._path);if(mt(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new re(e),r=be(t._queryParams,n);return di(r),new hi(t._repo,t._path,r,!0)},e}(ji);function Yi(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Sr("orderByChild","path",t,!1),new Hi(t)}var Xi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype._apply=function(t){fi(t,"orderByKey");var e=be(t._queryParams,Pt);return di(e),new hi(t._repo,t._path,e,!0)},e}(ji);function $i(){return new Xi}var Ji=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype._apply=function(t){fi(t,"orderByPriority");var e=be(t._queryParams,zt);return di(e),new hi(t._repo,t._path,e,!0)},e}(ji);function Zi(){return new Ji}var to=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.__extends)(e,t),e.prototype._apply=function(t){fi(t,"orderByValue");var e=be(t._queryParams,ie);return di(e),new hi(t._repo,t._path,e,!0)},e}(ji);function eo(){return new to}var no=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.__extends)(e,t),e.prototype._apply=function(t){if(Ir("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Mi(this._value,this._key)._apply(new qi(this._value,this._key)._apply(t))},e}(ji);function ro(t,e){return Or("equalTo","key",e,!0),new no(t,e)}function io(t){for(var e,n,r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];var s=Object(i.getModularInstance)(t);try{for(var u=Object(o.__values)(r),c=u.next();!c.done;c=u.next()){var l=c.value;s=l._apply(s)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return s}!function(t){Object(i.assert)(!Tn,"__referenceConstructor has already been defined"),Tn=t}(gi),function(t){Object(i.assert)(!An,"__referenceConstructor has already been defined"),An=t}(gi);var oo={},ao=!1;function so(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||C("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),I("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var a,s=oi(o,i),u=s.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(a=!0,u=(s=oi(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):a=!s.repoInfo.secure;var l=i&&a?new V(V.OWNER):new Q(t.name,t.options,e);Ar("Invalid Firebase Database URL",s),mt(s.path)||C("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=oo[e.name];i||(oo[e.name]=i={});var o=i[t.toURLString()];return o&&C("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Fr(t,ao,n,r),i[t.toURLString()]=o,o}(u,t,l,new G(t.name,n));return new uo(h,t)}var uo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=X(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ie(t.repoInfo_,(function(e,n,r,i){Gr(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return Qr(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(i.stringify)(n)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}t.persistentConnection_=new Ot(t.repoInfo_,e,(function(e,n,r,i){Gr(t,e,n,r,i)}),(function(e){Qr(t,e)}),(function(e){!function(t,e){j(e,(function(e,n){Vr(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,o;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(r=function(){return new Se(t.stats_,t.server_)},o=t.repoInfo_.toString(),Y[o]||(Y[o]=r()),Y[o]),t.infoData_=new Te,t.infoSyncTree_=new Gn({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=Bn(t.infoSyncTree_,e._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Vr(t,"connected",!1),t.serverSyncTree_=new Gn({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);jr(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new gi(this._repo,ut())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return null!==this._rootInternal&&(t=this._repo,(n=oo[e=this.app.name])&&n[t.key]===t||C("Database "+e+"("+t.repoInfo_+") has already been deleted."),Hr(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null),Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&C("Cannot call "+t+" on a deleted database.")},t}();function co(t){(t=Object(i.getModularInstance)(t))._checkNotDeleted("goOffline"),Hr(t._repo)}function lo(t){var e;(t=Object(i.getModularInstance)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume("repo_interrupt")}var ho={".sv":"timestamp"},fo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function po(t,e,n){var r;if(t=Object(i.getModularInstance)(t),Rr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,a=new i.Deferred,s=Ri(t,(function(){}));return function(e,n,r,o,s,u){Yr(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?a.reject(e):(i=new mi(r,new gi(t._repo,t._path),zt),a.resolve(new fo(n,i)))},status:null,order:m(),applyLocally:u,retryCount:0,unwatcher:s,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=$r(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Tr("transaction failed: Data returned ",h,c.path),c.status=0;var f=hr(e.transactionQueueTree_,n),d=fr(f)||[];d.push(c),dr(f,d);var p=void 0;"object"==typeof h&&null!==h&&Object(i.contains)(h,".priority")?(p=Object(i.safeGet)(h,".priority"),Object(i.assert)(wr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(Wn(e.serverSyncTree_,n)||Jt.EMPTY_NODE).getPriority().val();var g=qr(e),v=te(h,p),y=ur(v,l,g);c.currentOutputSnapshotRaw=v,c.currentOutputSnapshotResolved=y,c.currentWriteId=Br(e);var b=Qn(e.serverSyncTree_,n,y,c.currentWriteId,c.applyLocally);jr(e.eventQueue_,n,b),Jr(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,s,o),a.promise}var go=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(i.validateArgCount)("OnDisconnect.cancel",0,1,arguments.length),Object(i.validateCallback)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){Object(i.validateArgCount)("OnDisconnect.remove",0,1,arguments.length),Object(i.validateCallback)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){Object(i.validateArgCount)("OnDisconnect.set",1,2,arguments.length),Object(i.validateCallback)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){Object(i.validateArgCount)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(i.validateCallback)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(Object(i.validateArgCount)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,k("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(i.validateCallback)("OnDisconnect.update","onComplete",e,!0);var o=this._delegate.update(t);return e&&o.then((function(){return e(null)}),(function(t){return e(t)})),o},t}(),mo=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(i.validateArgCount)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),vo=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(i.validateArgCount)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(i.validateArgCount)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(i.validateArgCount)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(i.validateArgCount)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(i.validateArgCount)("DataSnapshot.child",0,1,arguments.length),e=String(e),Sr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(i.validateArgCount)("DataSnapshot.hasChild",1,1,arguments.length),Sr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(i.validateArgCount)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(i.validateArgCount)("DataSnapshot.forEach",1,1,arguments.length),Object(i.validateCallback)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return Object(i.validateArgCount)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(i.validateArgCount)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(i.validateArgCount)("DataSnapshot.ref",0,0,arguments.length),new bo(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),yo=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,o){var a,s=this;Object(i.validateArgCount)("Query.on",2,4,arguments.length),Object(i.validateCallback)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,o),c=function(t,e){n.call(u.context,new vo(s.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(a=u.cancel)||void 0===a?void 0:a.bind(u.context);switch(e){case"value":return Ri(this._delegate,c,l),n;case"child_added":return Ai(this._delegate,c,l),n;case"child_removed":return xi(this._delegate,c,l),n;case"child_changed":return Pi(this._delegate,c,l),n;case"child_moved":return Ni(this._delegate,c,l),n;default:throw new Error(Object(i.errorPrefix)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(i.validateArgCount)("Query.off",0,3,arguments.length),kr("Query.off",t,!0),Object(i.validateCallback)("Query.off","callback",e,!0),Object(i.validateContextObject)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Di(this._delegate,t,r)}else Di(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=vt(t,n);r=r||jn(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||jn(i,ut()):(i=new Pn,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new Me(r,!0,!1):null;return Qe(xn(i,e,en(t.pendingWriteTree_,e._path),o?a.getNode():Jt.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=te(n).withIndex(e._queryParams.getIndex()),i=Bn(t.serverSyncTree_,e._path,r);return Dr(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return Yr(t,"get for query "+Object(i.stringify)(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=Object(i.getModularInstance)(t))._repo,t).then((function(e){return new mi(e,new gi(t._repo,t._path),t._queryParams.getIndex())}))}(this._delegate).then((function(e){return new vo(t.database,e)}))},t.prototype.once=function(e,n,r,o){var a=this;Object(i.validateArgCount)("Query.once",1,4,arguments.length),Object(i.validateCallback)("Query.once","callback",n,!0);var s=t.getCancelAndContextArgs_("Query.once",r,o),u=new i.Deferred,c=function(t,e){var r=new vo(a.database,t);n&&n.call(s.context,r,e),u.resolve(r)};c.userCallback=n,c.context=s.context;var l=function(t){s.cancel&&s.cancel.call(s.context,t),u.reject(t)};switch(e){case"value":Ri(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Ai(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":xi(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Pi(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Ni(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(i.errorPrefix)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(i.validateArgCount)("Query.limitToFirst",1,1,arguments.length),new t(this.database,io(this._delegate,Ki(e)))},t.prototype.limitToLast=function(e){return Object(i.validateArgCount)("Query.limitToLast",1,1,arguments.length),new t(this.database,io(this._delegate,Wi(e)))},t.prototype.orderByChild=function(e){return Object(i.validateArgCount)("Query.orderByChild",1,1,arguments.length),new t(this.database,io(this._delegate,Yi(e)))},t.prototype.orderByKey=function(){return Object(i.validateArgCount)("Query.orderByKey",0,0,arguments.length),new t(this.database,io(this._delegate,$i()))},t.prototype.orderByPriority=function(){return Object(i.validateArgCount)("Query.orderByPriority",0,0,arguments.length),new t(this.database,io(this._delegate,Zi()))},t.prototype.orderByValue=function(){return Object(i.validateArgCount)("Query.orderByValue",0,0,arguments.length),new t(this.database,io(this._delegate,eo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.startAt",0,2,arguments.length),new t(this.database,io(this._delegate,Gi(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.startAfter",0,2,arguments.length),new t(this.database,io(this._delegate,Vi(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.endAt",0,2,arguments.length),new t(this.database,io(this._delegate,Li(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(i.validateArgCount)("Query.endBefore",0,2,arguments.length),new t(this.database,io(this._delegate,Ui(e,n)))},t.prototype.equalTo=function(e,n){return Object(i.validateArgCount)("Query.equalTo",1,2,arguments.length),new t(this.database,io(this._delegate,ro(e,n)))},t.prototype.toString=function(){return Object(i.validateArgCount)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(i.validateArgCount)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(i.validateArgCount)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(i.validateCallback)(t,"cancel",r.cancel,!0),r.context=n,Object(i.validateContextObject)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(i.errorPrefix)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new bo(this.database,new gi(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),bo=function(t){function e(e,n){var r=t.call(this,e,new hi(n._repo,n._path,new me,!1))||this;return r.database=e,r._delegate=n,r}return Object(o.__extends)(e,t),e.prototype.getKey=function(){return Object(i.validateArgCount)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(i.validateArgCount)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,bi(this._delegate,t))},e.prototype.getParent=function(){Object(i.validateArgCount)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(i.validateArgCount)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(i.validateArgCount)("Reference.set",1,2,arguments.length),Object(i.validateCallback)("Reference.set","onComplete",e,!0);var n=Ii(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(Object(i.validateArgCount)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,k("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Rr("Reference.update",this._delegate._path),Object(i.validateCallback)("Reference.update","onComplete",e,!0);var o=Ci(this._delegate,t);return e&&o.then((function(){return e(null)}),(function(t){return e(t)})),o},e.prototype.setWithPriority=function(t,e,n){Object(i.validateArgCount)("Reference.setWithPriority",2,3,arguments.length),Object(i.validateCallback)("Reference.setWithPriority","onComplete",n,!0);var r=Ei(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){Object(i.validateArgCount)("Reference.remove",0,1,arguments.length),Object(i.validateCallback)("Reference.remove","onComplete",t,!0);var e=wi(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;Object(i.validateArgCount)("Reference.transaction",1,3,arguments.length),Object(i.validateCallback)("Reference.transaction","transactionUpdate",t,!1),Object(i.validateCallback)("Reference.transaction","onComplete",e,!0),Pr("Reference.transaction","applyLocally",n,!0);var o=po(this._delegate,t,{applyLocally:n}).then((function(t){return new mo(t.committed,new vo(r.database,t.snapshot))}));return e&&o.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),o},e.prototype.setPriority=function(t,e){Object(i.validateArgCount)("Reference.setPriority",1,2,arguments.length),Object(i.validateCallback)("Reference.setPriority","onComplete",e,!0);var n=Ti(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;Object(i.validateArgCount)("Reference.push",0,2,arguments.length),Object(i.validateCallback)("Reference.push","onComplete",n,!0);var o=_i(this._delegate,t),a=o.then((function(t){return new e(r.database,t)}));n&&a.then((function(){return n(null)}),(function(t){return n(t)}));var s=new e(this.database,o);return s.then=a.then.bind(a),s.catch=a.catch.bind(a,void 0),s},e.prototype.onDisconnect=function(){return Rr("Reference.onDisconnect",this._delegate._path),new go(new li(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(yo),_o=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=Object(i.getModularInstance)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&C("Cannot call useEmulator() after instance has already been initialized.");var o=t._repoInternal,a=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&C('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new V(V.OWNER);else if(r.mockUserToken){var s=Object(i.createMockUserToken)(r.mockUserToken,t.app.options.projectId);a=new V(s)}!function(t,e,n,r){t.repoInfo_=new K(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(o,e,n,a)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(i.validateArgCount)("database.ref",0,1,arguments.length),t instanceof bo){var e=yi(this._delegate,t.toString());return new bo(this,e)}return e=vi(this._delegate,t),new bo(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(i.validateArgCount)(e,1,1,arguments.length);var n=yi(this._delegate,t);return new bo(this,n)},t.prototype.goOffline=function(){return Object(i.validateArgCount)("database.goOffline",0,0,arguments.length),co(this._delegate)},t.prototype.goOnline=function(){return Object(i.validateArgCount)("database.goOnline",0,0,arguments.length),lo(this._delegate)},t.ServerValue={TIMESTAMP:ho,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),wo=Object.freeze({__proto__:null,forceLongPolling:function(){et.forceDisallow(),J.forceAllow()},forceWebSockets:function(){J.forceDisallow()},isWebSocketsAvailable:function(){return et.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new Oe(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);j(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,o=t.namespace,a=t.nodeAdmin,s=void 0!==a&&a;u(t.version);var c=new r.Provider("auth-internal",new r.ComponentContainer("database-standalone"));return c.setComponent(new r.Component("auth-internal",(function(){return i}),"PRIVATE")),{instance:new _o(so(e,c,void 0,n,s),e),namespace:o}}}),Io=Ot;Ot.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Ot.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var To=Object.freeze({__proto__:null,DataConnection:Io,RealTimeConnection:rt,hijackHash:function(t){var e=Ot.prototype.put;return Ot.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Ot.prototype.put=e}},ConnectionTarget:K,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){ao=t}(t)}}),Eo=_o.ServerValue;!function(e){u(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new r.Component("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new _o(so(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:bo,Query:yo,Database:_o,DataSnapshot:vo,enableLogging:w,INTERNAL:wo,ServerValue:Eo,TEST_ACCESS:To}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.9"),Object(i.isNodeSdk)()&&(t.exports=n)}(e.default)}).call(this,n("3UD+")(t))},"X8/r":function(t,e,n){"use strict";var r=n("zIRd"),i=n("/6Yf"),o=n("mrSG"),a=n("qOnz"),s=n("q/0M");function u(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c,l=u(r),h=((c={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",c["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",c["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",c["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",c["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",c["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",c["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",c["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",c["recaptcha-error"]="ReCAPTCHA error.",c),f=new a.ErrorFactory("appCheck","AppCheck",h),d=new Map,p={activated:!1,tokenObservers:[]},g={enabled:!1};function m(t){return d.get(t)||p}function v(t,e){d.set(t,e)}function y(){return g}var b="https://content-firebaseappcheck.googleapis.com/v1beta",_=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new a.Deferred,[4,(r=this.getNextRun(t),new Promise((function(t){setTimeout(t,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new a.Deferred,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r}))}))},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function w(){return self.grecaptcha}function I(t){if(!m(t).activated)throw f.create("use-before-activation",{appName:t.name})}function T(t,e){var n=t.url,r=t.body;return o.__awaiter(this,void 0,void 0,(function(){var t,i,a,s,u,c,l,h,d,p;return o.__generator(this,(function(o){switch(o.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),a={method:"POST",body:JSON.stringify(r),headers:t},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,fetch(n,a)];case 2:return s=o.sent(),[3,4];case 3:throw u=o.sent(),f.create("fetch-network-error",{originalErrorMessage:u.message});case 4:if(200!==s.status)throw f.create("fetch-status-error",{httpStatus:s.status});o.label=5;case 5:return o.trys.push([5,7,,8]),[4,s.json()];case 6:return c=o.sent(),[3,8];case 7:throw l=o.sent(),f.create("fetch-parse-error",{originalErrorMessage:l.message});case 8:if(!(h=c.ttl.match(/^([\d.]+)(s)$/))||!h[2]||isNaN(Number(h[1])))throw f.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+c.ttl});return d=1e3*Number(h[1]),p=Date.now(),[2,{token:c.attestationToken,expireTimeMillis:p+d,issuedAtTimeMillis:p}]}}))}))}function E(t,e){var n=t.options;return{url:b+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeRecaptchaToken?key="+n.apiKey,body:{recaptcha_token:e}}}function C(t,e){var n=t.options;return{url:b+"/projects/"+n.projectId+"/apps/"+n.appId+":exchangeDebugToken?key="+n.apiKey,body:{debug_token:e}}}var k="firebase-app-check-store",O=null;function S(){return O||(O=new Promise((function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(f.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(k,{keyPath:"compositeKey"})}}}catch(r){e(f.create("storage-open",{originalErrorMessage:r.message}))}})))}function R(t){return P(N(t))}function A(t,e){return o.__awaiter(this,void 0,void 0,(function(){var n,r,i,a;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,S()];case 1:return n=o.sent(),r=n.transaction(k,"readwrite"),i=r.objectStore(k),a=i.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){a.onsuccess=function(e){t()},r.onerror=function(t){var n;e(f.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function P(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n,r,i;return o.__generator(this,(function(o){switch(o.label){case 0:return[4,S()];case 1:return e=o.sent(),n=e.transaction(k,"readonly"),r=n.objectStore(k),i=r.get(t),[2,new Promise((function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(f.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function N(t){return t.options.appId+"-"+t.name}var x=new s.Logger("@firebase/app-check");function D(t,e){return a.isIndexedDBAvailable()?function(t,e){return A(N(t),e)}(t,e).catch((function(t){x.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function j(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){if((t=y()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}var M={error:"UNKNOWN_ERROR"};function L(t,e,n){return void 0===n&&(n=!1),o.__awaiter(this,void 0,void 0,(function(){var r,i,s,u,c,l,h,f,d,p;return o.__generator(this,(function(g){switch(g.label){case 0:return I(t),r=m(t),s=void 0,(i=r.token)?[3,2]:[4,r.cachedTokenPromise];case 1:(u=g.sent())&&G(u)&&(i=u,v(t,o.__assign(o.__assign({},r),{token:i})),q(t,{token:i.token})),g.label=2;case 2:return!n&&i&&G(i)?[2,{token:i.token}]:y().enabled?(l=T,h=C,f=[t],[4,j()]):[3,6];case 3:return[4,l.apply(void 0,[h.apply(void 0,f.concat([g.sent()])),e])];case 4:return c=g.sent(),[4,D(t,c)];case 5:return g.sent(),v(t,o.__assign(o.__assign({},r),{token:c})),[2,{token:c.token}];case 6:return g.trys.push([6,8,,9]),[4,r.provider.getToken()];case 7:return i=g.sent(),[3,9];case 8:return d=g.sent(),x.error(d),s=d,[3,9];case 9:return i?[3,10]:(p=function(t){return{token:(e=M,a.base64.encodeString(JSON.stringify(e),!1)),error:t};var e}(s),[3,12]);case 10:return p={token:i.token},v(t,o.__assign(o.__assign({},r),{token:i})),[4,D(t,i)];case 11:g.sent(),g.label=12;case 12:return q(t,p),[2,p]}}))}))}function F(t,e,n,r,i){var a=m(t),s={next:r,error:i,type:n},u=o.__assign(o.__assign({},a),{tokenObservers:o.__spreadArray(o.__spreadArray([],a.tokenObservers),[s])});if(!u.tokenRefresher){var c=function(t,e){var n=this;return new _((function(){return o.__awaiter(n,void 0,void 0,(function(){var n;return o.__generator(this,(function(r){switch(r.label){case 0:return m(t).token?[3,2]:[4,L(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,L(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var e=m(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,e.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0}),3e4,96e4)}(t,e);u.tokenRefresher=c}if(!u.tokenRefresher.isRunning()&&a.isTokenAutoRefreshEnabled&&u.tokenRefresher.start(),a.token&&G(a.token)){var l=a.token;Promise.resolve().then((function(){return r({token:l.token})})).catch((function(){}))}else null==a.token&&a.cachedTokenPromise.then((function(t){t&&G(t)&&r({token:t.token})})).catch((function(){}));v(t,u)}function U(t,e){var n=m(t),r=n.tokenObservers.filter((function(t){return t.next!==e}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),v(t,o.__assign(o.__assign({},n),{tokenObservers:r}))}function q(t,e){for(var n=0,r=m(t).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(o){}}}function G(t){return t.expireTimeMillis-Date.now()>0}function Q(t){return o.__awaiter(this,void 0,void 0,(function(){var e;return o.__generator(this,(function(n){switch(n.label){case 0:return I(t),[4,m(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise((function(n,r){var i=m(t).reCAPTCHAState;e.ready((function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function V(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),a=m(t);v(t,o.__assign(o.__assign({},a),{reCAPTCHAState:o.__assign(o.__assign({},a.reCAPTCHAState),{widgetId:i})}))}var B=function(){function t(t){this._siteKey=t}return t.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var t;return o.__generator(this,(function(e){switch(e.label){case 0:if(!this._app||!this._platformLoggerProvider)throw f.create("use-before-activation",{appName:""});e.label=1;case 1:return e.trys.push([1,3,,4]),[4,Q(this._app)];case 2:return t=e.sent(),[3,4];case 3:throw e.sent(),f.create("recaptcha-error");case 4:return[2,T(E(this._app,t),this._platformLoggerProvider)]}}))}))},t.prototype.initialize=function(t,e){this._app=t,this._platformLoggerProvider=e,function(t,e){var n=m(t),r=new a.Deferred;v(t,o.__assign(o.__assign({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,s=document.createElement("div");s.id=i,s.style.display="none",document.body.appendChild(s);var u,c,l=w();return l?l.ready((function(){V(t,e,l,i),r.resolve(l)})):(u=function(){var n=w();if(!n)throw new Error("no recaptcha");n.ready((function(){V(t,e,n,i),r.resolve(n)}))},(c=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",c.onload=u,document.head.appendChild(c)),r.promise}(t,this._siteKey).catch((function(){}))},t}(),K=function(){function t(t){this._customProviderOptions=t}return t.prototype.getToken=function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!this._app)throw f.create("use-before-activation",{appName:""});return[4,this._customProviderOptions.getToken()];case 1:return t=r.sent(),e=a.issuedAtTime(t.token),n=null!==e&&e<Date.now()&&e>0?1e3*e:Date.now(),[2,o.__assign(o.__assign({},t),{issuedAtTimeMillis:n})]}}))}))},t.prototype.initialize=function(t){this._app=t},t}();!function(t){t.INTERNAL.registerComponent(new i.Component("appCheck",(function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger"),{app:e,activate:function(t,r){return function(t,e,n,r){var i=m(t);if(i.activated)throw f.create("already-activated",{appName:t.name});var s=o.__assign(o.__assign({},i),{activated:!0});s.cachedTokenPromise=function(t){return o.__awaiter(this,void 0,void 0,(function(){var e,n;return o.__generator(this,(function(r){switch(r.label){case 0:if(!a.isIndexedDBAvailable())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,R(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),x.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}(t).then((function(e){return e&&G(e)&&v(t,o.__assign(o.__assign({},m(t)),{token:e})),e})),s.provider="string"==typeof e?new B(e):e instanceof B||e instanceof K?e:new K({getToken:e.getToken}),s.isTokenAutoRefreshEnabled=void 0===r?t.automaticDataCollectionEnabled:r,v(t,s),s.provider.initialize(t,n)}(e,t,n,r)},setTokenAutoRefreshEnabled:function(t){return function(t,e){var n=m(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),v(t,o.__assign(o.__assign({},n),{isTokenAutoRefreshEnabled:e}))}(e,t)},getToken:function(t){return function(t,e,n){return o.__awaiter(this,void 0,void 0,(function(){var r;return o.__generator(this,(function(i){switch(i.label){case 0:return[4,L(t,e,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(e,n,t)},onTokenChanged:function(t,r,i){return function(t,e,n,r,i){var o,a=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?a=n.error.bind(n):r&&(a=r),F(t,e,"EXTERNAL",o,a),function(){return U(t,o)}}(e,n,t,r)},INTERNAL:{delete:function(){for(var t=0,n=m(e).tokenObservers;t<n.length;t++)U(e,n[t].next);return Promise.resolve()}}};var e,n}),"PUBLIC").setServiceProps({ReCaptchaV3Provider:B,CustomProvider:K}).setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){t.getProvider("app-check-internal").initialize()}))),t.INTERNAL.registerComponent(new i.Component("app-check-internal",(function(t){return e=t.getProvider("app").getImmediate(),n=t.getProvider("platform-logger"),{getToken:function(t){return L(e,n,t)},addTokenListener:function(t){return F(e,n,"INTERNAL",t)},removeTokenListener:function(t){return U(e,t)}};var e,n}),"PUBLIC").setInstantiationMode("EXPLICIT")),t.registerVersion("@firebase/app-check","0.3.1")}(l.default),function(){var t=a.getGlobal();if("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===t.FIREBASE_APPCHECK_DEBUG_TOKEN){var e=y();e.enabled=!0;var n=new a.Deferred;e.token=n,n.resolve("string"==typeof t.FIREBASE_APPCHECK_DEBUG_TOKEN?t.FIREBASE_APPCHECK_DEBUG_TOKEN:function(){return o.__awaiter(this,void 0,void 0,(function(){var t,e;return o.__generator(this,(function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,P("debug-token")];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:((r=e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),A("debug-token",r)).catch((function(t){return x.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r}))}))}())}}()},Yj9t:function(t,e,n){"use strict";n.r(e),n.d(e,"AuthModule",(function(){return Cy}));var r=n("SVse"),i=n("iInd"),o=n("8Y7J");let a=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Fb({type:t,selectors:[["app-chatscreen"]],decls:30,vars:0,consts:[[1,"auth-main","d-flex"],[1,"auth-img"],["src","assets/images/auth/support.png","alt",""],[1,"auth-form"],[1,"d-flex","auth-title"],[1,"auth-title__h3"],[1,"auth-form-bx"],[1,"chat-bx"],[1,"chat-messagebx"],[1,"you-mess"],[1,"sender-mess"],["src","images/Ellipse 1.png","alt",""],[1,"sender-mess-bx"],[1,"chat-message","clearfix"],["name","message","type","text"],[1,"send"],["src","assets/images/attachment-icon.png","alt",""],[1,"atta"],["src","assets/images/Subtraction 8.png","alt",""],["type","file","multiple",""]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"figure"),o.Mb(3,"img",2),o.Qb(),o.Qb(),o.Rb(4,"div",3),o.Rb(5,"div",4),o.Rb(6,"h3",5),o.Fc(7,"Start a conversation "),o.Qb(),o.Qb(),o.Rb(8,"div",6),o.Rb(9,"div",7),o.Rb(10,"div",8),o.Rb(11,"div",9),o.Rb(12,"p"),o.Fc(13,"The topics you choose will help us suggest the courses suitable to you"),o.Qb(),o.Qb(),o.Rb(14,"div",9),o.Rb(15,"p"),o.Fc(16,"The topics you "),o.Qb(),o.Qb(),o.Rb(17,"div",10),o.Rb(18,"figure"),o.Mb(19,"img",11),o.Qb(),o.Rb(20,"div",12),o.Rb(21,"p"),o.Fc(22,"The topics you choose will help us suggest the courses suitable to you"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(23,"div",13),o.Mb(24,"textarea",14),o.Rb(25,"button",15),o.Mb(26,"img",16),o.Qb(),o.Rb(27,"button",17),o.Mb(28,"img",18),o.Mb(29,"input",19),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb())},styles:[".chat-messagebx[_ngcontent-%COMP%]{padding:20px;height:519px}.you-mess[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#222b45;font-size:15px}.you-mess[_ngcontent-%COMP%]{background:#95e3f5;padding:10px;border-radius:8px;margin-bottom:10px;max-width:224px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin-left:auto}.sender-mess[_ngcontent-%COMP%]{display:flex;align-items:flex-start;justify-content:flex-start}.sender-mess[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:50%;overflow:hidden;margin:0 10px 0 0}.sender-mess-bx[_ngcontent-%COMP%]{background:#fff;padding:10px;border-radius:8px;margin-bottom:10px;max-width:224px;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.send-messagebx[_ngcontent-%COMP%]{justify-content:space-between;padding:10px 20px 0}.send-messagebx[_ngcontent-%COMP%], .write-message[_ngcontent-%COMP%]{display:flex;align-items:center}.write-message[_ngcontent-%COMP%]{justify-content:flex-end;flex:1;background:#f4f4f4;margin-left:11px;border-radius:50px;padding-right:6px}.file-upload[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:0}.write-message[_ngcontent-%COMP%]   figure[_ngcontent-%COMP%]{margin:0}.write-message[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;border:none;background:transparent;margin-right:14px;padding:9px 5px}.chat-message[_ngcontent-%COMP%]{position:relative;background-color:#fff;border:1px solid #d3d3d3;display:flex;flex-wrap:wrap;border-radius:8px}.chat-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{width:100%;border:none;padding:0 60px 0 10px;border-radius:24px;resize:none;height:50px}.chat-message[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus{border:0}.chat-message[_ngcontent-%COMP%]   .fa-file-image-o[_ngcontent-%COMP%], .chat-message[_ngcontent-%COMP%]   .fa-file-o[_ngcontent-%COMP%]{font-size:16px;color:grey;cursor:pointer}.chat-message[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:0;background-color:initial}.chat-message[_ngcontent-%COMP%]   button.send[_ngcontent-%COMP%]{float:right;color:#000;font-size:16px;text-transform:uppercase;border:none;cursor:pointer;font-weight:700;background:transparent;position:absolute;right:10px;top:12px}.chat-message[_ngcontent-%COMP%]   button.send[_ngcontent-%COMP%]:hover{color:#000}.chat-message[_ngcontent-%COMP%]   button.po[_ngcontent-%COMP%]{position:absolute;left:30px;top:25px}.chat-message[_ngcontent-%COMP%]   button.atta[_ngcontent-%COMP%]{position:absolute;right:45px;top:12px}.chat-message[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:17px;opacity:0;position:absolute;left:5px}"]}),t})();var s=n("nc0B"),u=n("s7LF"),c=n("vZrp"),l=n("XNiG"),h=n("HDdC"),f=n("8wFo"),d=n("Z+m1"),p=n("eKYg"),g=n("+h0f"),m=n("/uUt"),v=n("Kj3r"),y=n("eIep"),b=n("AytR"),_=n("7Vn+"),w=n("YWaA"),I=n("hTIo"),T=n("Q2Ze"),E=n("e6WT"),C=n("YKwE");function k(t,e){1&t&&o.Mb(0,"img",33)}function O(t,e){if(1&t&&o.Mb(0,"img",34),2&t){const t=o.cc();o.ic("src",t.showImage,o.wc)}}function S(t,e){1&t&&(o.Rb(0,"mat-error",35),o.Fc(1," Please upload profile image. "),o.Qb())}function R(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Please enter full name. "),o.Qb())}function A(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Numbers not accepted. "),o.Qb())}function P(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Full name has to be between 4 and 30 characters long. "),o.Qb())}function N(t,e){if(1&t&&(o.Rb(0,"div",36),o.Rb(1,"div",37),o.Rb(2,"div",38),o.Mb(3,"img",39),o.Qb(),o.Rb(4,"div"),o.Rb(5,"p",40),o.Fc(6),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t){const t=e.item,n=o.cc();o.zb(3),o.jc("src",n.baseUrl+(null==t||null==t.bank_image?null:t.bank_image.media_file),o.wc),o.zb(3),o.Hc("",t.name," ")}}function x(t,e){if(1&t&&(o.Rb(0,"div",37),o.Rb(1,"div",38),o.Mb(2,"img",39),o.Qb(),o.Rb(3,"div"),o.Rb(4,"p",40),o.Fc(5),o.Qb(),o.Qb(),o.Qb()),2&t){const t=e.item,n=o.cc();o.zb(2),o.jc("src",n.baseUrl+(null==t||null==t.bank_image?null:t.bank_image.media_file),o.wc),o.zb(3),o.Hc("",t.name," ")}}function D(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Please enter bank name. "),o.Qb())}function j(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Bank name has to be between 4 and 30 characters long. "),o.Qb())}function M(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Please enter account number. "),o.Qb())}function L(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Account number must be less than 25 charaters. "),o.Qb())}function F(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Account number must be greater than 6 charaters. "),o.Qb())}function U(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Please enter confirm account number. "),o.Qb())}function q(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Confirm account number does not match. "),o.Qb())}let G=(()=>{class t{constructor(t,e,n,r){this._router=t,this._fb=e,this._auth=n,this._common=r,this.showImage="",this.bankList=[],this.bankListEvent=new l.a,this.bankListLoading=!1,this.baseUrl=b.a.homeURL,this._router.getCurrentNavigation().extras.state&&void 0!==this._router.getCurrentNavigation().extras.state.emailForm?this.emailForm=this._router.getCurrentNavigation().extras.state.emailForm:this._router.navigate(["/auth/signup"]),this.profileForm=this._fb.group({tempImage:[null],image:[null],full_name:[null,[u.t.required,u.t.maxLength(30),u.t.minLength(4),g.a]],role:["2"],bank_details:this._fb.group({account_holder_name:[null,[u.t.required,u.t.maxLength(30),u.t.minLength(4)]],bank_name:[null,[u.t.required]],account_number:[null,[u.t.required,u.t.minLength(6),u.t.maxLength(25)]],confirm_account:[null,u.t.required]},{validators:Object(p.a)("account_number","confirm_account")})}),this.profileForm.get("full_name").valueChanges.subscribe(t=>{this.profileForm.get("bank_details").get("account_holder_name").setValue(t)})}ngOnInit(){this.searchBanks()}preview(t){0!==t.length&&Object(f.a)(t[0]).then(e=>{this.profileForm.get("tempImage").setValue(t[0]),this.showImage=e})}searchBanks(){this.bankListEvent.pipe(Object(m.a)(),Object(v.a)(200),Object(y.a)(t=>(this.bankListLoading=!0,t&&""!=t?this._common.get(d.a.searchBank+(t+"/")):new h.a(t=>t.next(null))))).subscribe(t=>{this.bankListLoading=!1,t&&(this.bankList=t.data)},t=>{this.bankList=[],this.bankListLoading=!1})}removeSpaces(){Object.keys({full_name:null,bank_details:null}).forEach(t=>{if(this.profileForm.controls[t].value)if("bank_details"==t){let e=this.profileForm.controls[t];Object.keys({account_number:null,confirm_account:null}).forEach(t=>{e.controls[t].value&&e.controls[t].setValue(e.controls[t].value.trim())})}else this.profileForm.controls[t].setValue(this.profileForm.controls[t].value.trim())})}submitDetails(){if(this.removeSpaces(),this.profileForm.valid)if(this.profileForm.get("tempImage").value){c.Block.circle("#create-profile-button");let t=this.profileForm.get("tempImage").value;const e=new FormData;e.append("media",t,t.name),this._common.uploadMedia(e).subscribe(t=>{c.Block.remove("#create-profile-button"),this.profileForm.get("image").setValue(t.data[0].id),delete this.profileForm.value.tempImage,this._router.navigate(["/auth/transtionpin"],{state:{profileForm:Object.assign(Object.assign({},this.emailForm),this.profileForm.value)}})},t=>{c.Block.remove("#create-profile-button")})}else this._router.navigate(["/auth/transtionpin"],{state:{profileForm:Object.assign(Object.assign({},this.emailForm),this.profileForm.value)}});else this.profileForm.markAllAsTouched()}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(i.b),o.Lb(u.d),o.Lb(_.a),o.Lb(w.a))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-createprofile"]],decls:66,vars:19,consts:[[1,"auth-main","d-flex"],[1,"auth-img"],[1,"auth-form","authflex-start"],["routerLink","/landingpage",1,"auth-logo","cursor-pointer"],["src","assets/images/nav-logo.png","alt",""],[1,"d-flex","auth-title"],[1,"auth-title__h3"],[1,"auth-form-bx","my-forms",3,"formGroup","ngSubmit"],["accept","image/*","type","file",2,"display","none",3,"change"],["myFile",""],[1,"usr-img","mb-20",3,"click"],["src","assets/images/auth/usr-img.png","alt","",4,"ngIf"],["alt","",3,"src",4,"ngIf"],["style","font-size: 13px;",4,"ngIf"],["appearance","outline",1,"example-full-width"],["matPrefix",""],[1,"input-icon"],["src","assets/images/auth/perfered-name.png","alt",""],["matInput","","type","text","formControlName","full_name","name","full_name","placeholder","Full Name"],[4,"ngIf"],[3,"formGroup"],["appearance","outline",1,"bank-dropdown","example-full-width"],["src","assets/images/auth/address.png","alt",""],["typeToSearchText","Search bank name.","loadingText","Fetching banks...","notFoundText","No bank found. Try another name","bindLabel","Select bank name","bindLabel","name","bindValue","id","formControlName","bank_name","placeholder","Select bank name",3,"typeahead","loading","virtualScroll","items"],["ng-label-tmp",""],["ng-option-tmp",""],["formControlName","account_number","name","account_number","matInput","","placeholder","Account number"],["matInput","","formControlName","confirm_account","name","confirm_account","placeholder","Confirm account number"],[1,"note"],[1,"note-p"],[1,"btn-outer","mt-40"],["id","create-profile-button",1,"border-plus"],["type","submit",1,"btn","btn-primary"],["src","assets/images/auth/usr-img.png","alt",""],["alt","",3,"src"],[2,"font-size","13px"],[1,"bank-dropdown-label"],[1,"bank-dropdown-option"],[1,"pr-2"],["alt","",1,"img",3,"src"],[1,"bank-heading"]],template:function(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",0),o.Rb(1,"div",1),o.Mb(2,"login-svg-image"),o.Qb(),o.Rb(3,"div",2),o.Rb(4,"div",3),o.Rb(5,"figure"),o.Mb(6,"img",4),o.Qb(),o.Qb(),o.Rb(7,"div",5),o.Rb(8,"h3",6),o.Fc(9,"Complete your profile"),o.Qb(),o.Qb(),o.Rb(10,"form",7),o.Yb("ngSubmit",(function(){return e.submitDetails()})),o.Rb(11,"input",8,9),o.Yb("change",(function(){o.uc(t);const n=o.sc(12);return e.preview(n.files)})),o.Qb(),o.Rb(13,"div",10),o.Yb("click",(function(){return o.uc(t),o.sc(12).click()})),o.Rb(14,"figure"),o.Dc(15,k,1,0,"img",11),o.Dc(16,O,1,1,"img",12),o.Qb(),o.Dc(17,S,2,0,"mat-error",13),o.Qb(),o.Rb(18,"mat-form-field",14),o.Rb(19,"span",15),o.Rb(20,"figure",16),o.Mb(21,"img",17),o.Qb(),o.Qb(),o.Mb(22,"input",18),o.Dc(23,R,2,0,"mat-error",19),o.Dc(24,A,2,0,"mat-error",19),o.Dc(25,P,2,0,"mat-error",19),o.Qb(),o.Pb(26,20),o.Rb(27,"mat-form-field",21),o.Rb(28,"span",15),o.Rb(29,"figure",16),o.Mb(30,"img",22),o.Qb(),o.Qb(),o.Rb(31,"mtx-select",23),o.Dc(32,N,7,2,"ng-template",24),o.Dc(33,x,6,2,"ng-template",25),o.Qb(),o.Dc(34,D,2,0,"mat-error",19),o.Dc(35,j,2,0,"mat-error",19),o.Qb(),o.Rb(36,"mat-form-field",14),o.Rb(37,"span",15),o.Rb(38,"figure",16),o.Mb(39,"img",22),o.Qb(),o.Qb(),o.Mb(40,"input",26),o.Dc(41,M,2,0,"mat-error",19),o.Dc(42,L,2,0,"mat-error",19),o.Dc(43,F,2,0,"mat-error",19),o.Qb(),o.Rb(44,"mat-form-field",14),o.Rb(45,"span",15),o.Rb(46,"figure",16),o.Mb(47,"img",22),o.Qb(),o.Qb(),o.Mb(48,"input",27),o.Dc(49,U,2,0,"mat-error",19),o.Dc(50,q,2,0,"mat-error",19),o.Qb(),o.Ob(),o.Rb(51,"div",28),o.Rb(52,"p",29),o.Rb(53,"span"),o.Fc(54,"Note: "),o.Qb(),o.Mb(55,"br"),o.Fc(56," 1. The account provided above must be yours and you must have access to it, please don't provide a third party account."),o.Mb(57,"br"),o.Fc(58," 2. The name on the bank account must match the name you provided."),o.Mb(59,"br"),o.Fc(60," 3. The bank details provided above would be used for your NAIRA withdrawals."),o.Mb(61,"br"),o.Qb(),o.Qb(),o.Rb(62,"div",30),o.Rb(63,"div",31),o.Rb(64,"button",32),o.Fc(65,"Submit"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()}if(2&t){var n=null,r=null,i=null,a=null,s=null,u=null,c=null,l=null,h=null,f=null;o.zb(10),o.ic("formGroup",e.profileForm),o.zb(5),o.ic("ngIf",!e.showImage),o.zb(1),o.ic("ngIf",e.showImage),o.zb(1),o.ic("ngIf",e.profileForm.get("tempImage").touched&&e.profileForm.get("tempImage").hasError("required")),o.zb(6),o.ic("ngIf",null==(n=e.profileForm.get("full_name"))?null:n.hasError("required")),o.zb(1),o.ic("ngIf",null==(r=e.profileForm.get("full_name"))?null:r.hasError("validString")),o.zb(1),o.ic("ngIf",!(null!=(i=e.profileForm.get("full_name"))&&i.hasError("validString"))&&((null==(i=e.profileForm.get("full_name"))?null:i.hasError("minlength"))||(null==(i=e.profileForm.get("full_name"))?null:i.hasError("maxlength")))),o.zb(1),o.ic("formGroup",e.profileForm.get("bank_details")),o.zb(5),o.ic("typeahead",e.bankListEvent)("loading",e.bankListLoading)("virtualScroll",!0)("items",e.bankList),o.zb(3),o.ic("ngIf",null==(a=e.profileForm.get("bank_details").get("bank_name"))?null:a.hasError("required")),o.zb(1),o.ic("ngIf",(null==(s=e.profileForm.get("bank_details").get("bank_name"))?null:s.hasError("minlength"))||(null==(s=e.profileForm.get("bank_details").get("bank_name"))?null:s.hasError("maxlength"))),o.zb(6),o.ic("ngIf",null==(u=e.profileForm.get("bank_details").get("account_number"))?null:u.hasError("required")),o.zb(1),o.ic("ngIf",null==(c=e.profileForm.get("bank_details").get("account_number"))?null:c.hasError("maxlength")),o.zb(1),o.ic("ngIf",null==(l=e.profileForm.get("bank_details").get("account_number"))?null:l.hasError("minlength")),o.zb(6),o.ic("ngIf",null==(h=e.profileForm.get("bank_details").get("confirm_account"))?null:h.hasError("required")),o.zb(1),o.ic("ngIf",null==(f=e.profileForm.get("bank_details").get("confirm_account"))?null:f.hasError("mustMatch"))}},directives:[I.a,i.c,u.u,u.o,u.h,r.m,T.c,T.g,E.a,u.b,u.n,u.g,C.a,C.d,C.c,T.b],styles:[".bank-dropdown .ng-placeholder{opacity:1!important}  .bank-dropdown .ng-option{box-sizing:border-box;cursor:pointer;display:block;padding:8px 10px;border-bottom:1px solid #e0e0e0}  .bank-dropdown .ng-value-container{min-height:31px!important}  .bank-dropdown .ng-value:after{display:block!important}  .bank-dropdown .mat-form-field-flex>.mat-form-field-infix{padding:.8em 0!important}  .bank-dropdown ng-dropdown-panel{width:100%!important}  .bank-dropdown .bank-dropdown-label{display:flex;width:100%;margin-left:10px;justify-content:start}  .bank-dropdown .bank-dropdown-label .bank-heading{font-size:15px;font-weight:500;color:#0a1958;line-height:inherit}  .bank-dropdown .bank-dropdown-label .branch{font-size:12px;line-height:inherit;margin-top:4px}  .bank-dropdown .bank-dropdown-option{display:flex;width:100%;justify-content:start;align-items:center}  .bank-dropdown .bank-dropdown-option .img{height:25px;min-width:25px;width:25px;object-fit:cover;border-radius:5px}  .bank-dropdown .bank-dropdown-option .bank-heading{font-size:15px;font-weight:500;color:#0a1958;line-height:inherit}  .bank-dropdown .bank-dropdown-option .branch{font-size:12px;line-height:inherit;margin-top:4px}  .bank-dropdown .bank-dropdown-option .ifsc{line-height:inherit;font-size:12px;margin-top:4px;color:#616161}"]}),t})();var Q=n("hzfI"),V=n("xX+s"),B=n("L/2j"),K=n("xIou"),z=n("YEE8"),W=n("fzH0"),H=n("YBOi"),Y=n("iQRm");function X(t,e){1&t&&(o.Rb(0,"h3",17),o.Fc(1,"Setup your password "),o.Rb(2,"span",18),o.Fc(3," Set your new password to access your account "),o.Qb(),o.Qb())}function $(t,e){1&t&&(o.Rb(0,"h3",17),o.Fc(1,"Reset your password "),o.Rb(2,"span",18),o.Fc(3," Set your new password to access your account "),o.Qb(),o.Qb())}function J(t,e){1&t&&o.Mb(0,"img",19)}function Z(t,e){1&t&&o.Mb(0,"img",20)}function tt(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1,"Please enter password. "),o.Qb())}function et(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1,"Password must containing atleast one upper case, one special character, one numeric and must be of atleast 8 characters. "),o.Qb())}function nt(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1,"Spaces not allowed. "),o.Qb())}function rt(t,e){1&t&&o.Mb(0,"img",19)}function it(t,e){1&t&&o.Mb(0,"img",20)}function ot(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1,"Please enter confirm password. "),o.Qb())}function at(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Confirm password does not match with password. "),o.Qb())}let st=(()=>{class t{constructor(t,e){this._auth=t,this._fb=e,this.type="new",this.setupDone=new o.n,this.showErrors=f.b,this.hide=!0,this.hide2=!0}ngOnInit(){this.setPasswordForm=this._fb.group({password:[null,[u.t.required,u.t.minLength(8),u.t.maxLength(16),K.a,z.a,W.a,H.a,Y.a]],confirm_password:[null,u.t.required]},{validators:Object(p.a)("password","confirm_password")})}setupPassword(){if(this.setPasswordForm.valid){c.Block.circle("#setup-password-button");const t=Object.assign(this.setPasswordForm.value);delete t.confirm_password,this._auth.setUpPassword(t,this.data.id).subscribe(t=>{console.log("res.data",t.data),this.setupDone.emit(t.data),c.Block.remove("#setup-password-button")},t=>{c.Block.remove("#setup-password-button")})}else this.setPasswordForm.markAllAsTouched()}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(_.a),o.Lb(u.d))},t.\u0275cmp=o.Fb({type:t,selectors:[["setup-password"]],inputs:{data:"data",type:"type"},outputs:{setupDone:"setupDone"},decls:31,vars:14,consts:[[1,"d-flex","auth-title"],["class","auth-title__h3",4,"ngIf"],[1,"auth-form-bx","my-forms",3,"formGroup","ngSubmit"],["appearance","outline",1,"example-full-width","mb-2"],["matPrefix",""],[1,"input-icon"],["src","assets/images/auth/pass-icon.png","alt",""],["formControlName","password","name","password","matInput","","placeholder","Password",3,"type"],["matSuffix","",3,"click"],["class","pass-hide-show","src","assets/images/auth/pass-show.png","alt","",4,"ngIf"],["class","pass-hide-show","src","assets/images/auth/pass-hide.png","alt","",4,"ngIf"],[4,"ngIf"],["appearance","outline",1,"example-full-width"],["formControlName","confirm_password","name","confirm_password","matInput","","placeholder","Confirm Password",3,"type"],[1,"btn-outer","mt-40"],["id","setup-password-button",1,"border-plus"],["type","submit",1,"btn","btn-primary"],[1,"auth-title__h3"],[1,"d-block"],["src","assets/images/auth/pass-show.png","alt","",1,"pass-hide-show"],["src","assets/images/auth/pass-hide.png","alt","",1,"pass-hide-show"]],template:function(t,e){if(1&t&&(o.Rb(0,"div",0),o.Dc(1,X,4,0,"h3",1),o.Dc(2,$,4,0,"h3",1),o.Qb(),o.Rb(3,"form",2),o.Yb("ngSubmit",(function(){return e.setupPassword()})),o.Rb(4,"mat-form-field",3),o.Rb(5,"span",4),o.Rb(6,"figure",5),o.Mb(7,"img",6),o.Qb(),o.Qb(),o.Mb(8,"input",7),o.Rb(9,"span",8),o.Yb("click",(function(){return e.hide=!e.hide})),o.Rb(10,"figure",5),o.Dc(11,J,1,0,"img",9),o.Dc(12,Z,1,0,"img",10),o.Qb(),o.Qb(),o.Dc(13,tt,2,0,"mat-error",11),o.Dc(14,et,2,0,"mat-error",11),o.Dc(15,nt,2,0,"mat-error",11),o.Qb(),o.Rb(16,"mat-form-field",12),o.Rb(17,"span",4),o.Rb(18,"figure",5),o.Mb(19,"img",6),o.Qb(),o.Qb(),o.Mb(20,"input",13),o.Rb(21,"span",8),o.Yb("click",(function(){return e.hide2=!e.hide2})),o.Rb(22,"figure",5),o.Dc(23,rt,1,0,"img",9),o.Dc(24,it,1,0,"img",10),o.Qb(),o.Qb(),o.Dc(25,ot,2,0,"mat-error",11),o.Dc(26,at,2,0,"mat-error",11),o.Qb(),o.Rb(27,"div",14),o.Rb(28,"div",15),o.Rb(29,"button",16),o.Fc(30,"Submit"),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t){var n=null;o.zb(1),o.ic("ngIf","new"==e.type),o.zb(1),o.ic("ngIf","reset"==e.type),o.zb(1),o.ic("formGroup",e.setPasswordForm),o.zb(5),o.ic("type",e.hide?"password":"text"),o.zb(3),o.ic("ngIf",e.hide),o.zb(1),o.ic("ngIf",!e.hide),o.zb(1),o.ic("ngIf","required"==e.showErrors(e.setPasswordForm.get("password"))),o.zb(1),o.ic("ngIf","minlength"==e.showErrors(e.setPasswordForm.get("password"))||"uperCase"==e.showErrors(e.setPasswordForm.get("password"))||"lowerCase"==e.showErrors(e.setPasswordForm.get("password"))||"specialChar"==e.showErrors(e.setPasswordForm.get("password"))||"oneDigit"==e.showErrors(e.setPasswordForm.get("password"))),o.zb(1),o.ic("ngIf","removeSpaces"==e.showErrors(e.setPasswordForm.get("password"))),o.zb(5),o.ic("type",e.hide2?"password":"text"),o.zb(3),o.ic("ngIf",e.hide2),o.zb(1),o.ic("ngIf",!e.hide2),o.zb(1),o.ic("ngIf",e.setPasswordForm.get("confirm_password").hasError("required")),o.zb(1),o.ic("ngIf",null==(n=e.setPasswordForm.get("confirm_password"))?null:n.hasError("mustMatch"))}},directives:[r.m,u.u,u.o,u.h,T.c,T.g,u.b,E.a,u.n,u.g,T.h,T.b],styles:[""]}),t})();const ut=["stepper"];function ct(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1,"Please enter phone number. "),o.Qb())}function lt(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1,"Phone number has to be between 7 and 15 characters long. "),o.Qb())}const ht=function(t){return{id:t}};let ft=(()=>{class t{constructor(t,e,n){this._auth=t,this._fb=e,this.router=n,this.allowedCountries=b.a.allowedCountries,this.userId=""}ngOnInit(){this.forgotPasswordForm=this._fb.group({full_phone:[null,[u.t.required,u.t.minLength(11),u.t.maxLength(19)]],phone_number:[null,[u.t.required]],country_code:[null,u.t.required]})}countryChanged(t){t&&(this.selectedCountry=t)}ngAfterViewInit(){this.stepper.selectedIndex=0}signUpNow(){if(this.forgotPasswordForm.get("full_phone").value){let t=this.forgotPasswordForm.get("full_phone").value.split("+"+this.selectedCountry.dialCode);this.forgotPasswordForm.get("phone_number").setValue(t[1]),this.forgotPasswordForm.get("country_code").setValue("+"+this.selectedCountry.dialCode)}if(this.forgotPasswordForm.valid){c.Block.circle("#signup-button");const t=Object.assign(this.forgotPasswordForm.value);delete t.full_phone,this._auth.forgotPassword(t).subscribe(t=>{c.Block.remove("#signup-button"),c.Notify.success(t.message),this.stepper.next()},t=>{c.Block.remove("#signup-button")})}else this.forgotPasswordForm.markAllAsTouched()}OtpVerified(t){this.userId=t.id,this.stepper.next()}setPasswordCompleted(){c.Notify.success("Password reset successfully"),this.router.navigate(["/auth/login"])}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(_.a),o.Lb(u.d),o.Lb(i.b))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-forgotpassword"]],viewQuery:function(t,e){var n;1&t&&o.Jc(ut,!0),2&t&&o.rc(n=o.Zb())&&(e.stepper=n.first)},decls:47,vars:12,consts:[["linear",""],["stepper",""],[1,"auth-main","d-flex"],[1,"auth-img"],["src","assets/images/auth/forgot.png","alt",""],[1,"auth-form"],["routerLink","/landingpage",1,"auth-logo","cursor-pointer"],["src","assets/images/nav-logo.png","alt",""],[1,"d-flex","auth-title"],[1,"auth-title__h3"],[1,"d-block"],[1,"auth-form-bx","my-forms",3,"formGroup","ngSubmit"],["appearance","outline",1,"example-full-width"],["matPrefix",""],[1,"input-icon"],["src","assets/images/auth/mob-icon.png","alt",""],["name","full_phone","formControlName","full_phone","inputPlaceholder","Phone number",3,"onlyCountries","enablePlaceholder","enableSearch","countryChanged"],[4,"ngIf"],[1,"btn-outer","mt-40"],["id","signup-button",1,"border-plus"],["type","submit",1,"btn","btn-primary"],["src","assets/images/auth/email-img.png","alt",""],[1,"auth-logo"],[3,"type","data","verified"],[3,"type","data","setupDone"]],template:function(t,e){if(1&t&&(o.Rb(0,"mat-horizontal-stepper",0,1),o.Rb(2,"mat-step"),o.Rb(3,"div",2),o.Rb(4,"div",3),o.Rb(5,"figure"),o.Mb(6,"img",4),o.Qb(),o.Qb(),o.Rb(7,"div",5),o.Rb(8,"div",6),o.Rb(9,"figure"),o.Mb(10,"img",7),o.Qb(),o.Qb(),o.Rb(11,"div",8),o.Rb(12,"h3",9),o.Fc(13,"Forgot password "),o.Rb(14,"span",10),o.Fc(15," Enter your phone number to verify your account "),o.Qb(),o.Qb(),o.Qb(),o.Rb(16,"form",11),o.Yb("ngSubmit",(function(){return e.signUpNow()})),o.Rb(17,"mat-form-field",12),o.Rb(18,"span",13),o.Rb(19,"figure",14),o.Mb(20,"img",15),o.Qb(),o.Qb(),o.Rb(21,"ngx-mat-intl-tel-input",16),o.Yb("countryChanged",(function(t){return e.countryChanged(t)})),o.Qb(),o.Dc(22,ct,2,0,"mat-error",17),o.Dc(23,lt,2,0,"mat-error",17),o.Qb(),o.Rb(24,"div",18),o.Rb(25,"div",19),o.Rb(26,"button",20),o.Fc(27,"Continue"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(28,"mat-step"),o.Rb(29,"div",2),o.Rb(30,"div",3),o.Rb(31,"figure"),o.Mb(32,"img",21),o.Qb(),o.Qb(),o.Rb(33,"div",5),o.Rb(34,"div",22),o.Rb(35,"figure"),o.Mb(36,"img",7),o.Qb(),o.Qb(),o.Rb(37,"signup-activate",23),o.Yb("verified",(function(t){return e.OtpVerified(t)})),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(38,"mat-step"),o.Rb(39,"div",2),o.Rb(40,"div",3),o.Mb(41,"login-svg-image"),o.Qb(),o.Rb(42,"div",5),o.Rb(43,"div",22),o.Rb(44,"figure"),o.Mb(45,"img",7),o.Qb(),o.Qb(),o.Rb(46,"setup-password",24),o.Yb("setupDone",(function(){return e.setPasswordCompleted()})),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t){var n=null;o.zb(16),o.ic("formGroup",e.forgotPasswordForm),o.zb(5),o.ic("onlyCountries",e.allowedCountries)("enablePlaceholder",!0)("enableSearch",!0),o.zb(1),o.ic("ngIf",e.forgotPasswordForm.get("full_phone").hasError("required")),o.zb(1),o.ic("ngIf",(null==(n=e.forgotPasswordForm.get("full_phone"))?null:n.hasError("maxlength"))||(null==(n=e.forgotPasswordForm.get("full_phone"))?null:n.hasError("minlength"))),o.zb(14),o.ic("type","verify")("data",e.forgotPasswordForm.value),o.zb(9),o.ic("type","reset")("data",o.nc(10,ht,e.userId))}},directives:[Q.a,Q.b,i.c,u.u,u.o,u.h,T.c,T.g,V.a,u.n,u.g,r.m,B.a,I.a,st,T.b],styles:[".mat-horizontal-stepper-header-container{display:none!important}"]}),t})();var dt=n("Jgta");const pt=["recaptcha"];function gt(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1,"Please enter phone number. "),o.Qb())}function mt(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1,"Phone number has to be between 7 and 15 characters long. "),o.Qb())}function vt(t,e){1&t&&o.Mb(0,"img",26)}function yt(t,e){1&t&&o.Mb(0,"img",27)}function bt(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1,"Please enter password. "),o.Qb())}let _t=(()=>{class t{constructor(t,e,n){this.router=t,this._auth=e,this._fb=n,this.allowedCountries=b.a.allowedCountries,this.hide=!0,this.recpach=!1}ngOnInit(){this.loginForm=this._fb.group({full_phone:[null,[u.t.required,u.t.minLength(11),u.t.maxLength(19)]],phone_number:[null,[u.t.required]],country_code:[null,u.t.required],password:[null,u.t.required]}),this.addRecaptchaScript()}countryChanged(t){t&&(this.selectedCountry=t)}loginNow(){if(this.loginForm.get("full_phone").value){let t=this.loginForm.get("full_phone").value.split("+"+this.selectedCountry.dialCode);this.loginForm.get("phone_number").setValue(t[1]),this.loginForm.get("country_code").setValue("+"+this.selectedCountry.dialCode)}if(this.loginForm.valid)if(this.recpach){const t=()=>{const t=this.loginForm.value;delete t.full_phone,t["device-token"]=this._auth.firebaseToken,t["device-type"]="WEB",this._auth.login(t).subscribe(t=>{c.Block.remove("#login-button"),t.data.is_profile_setup?(localStorage.setItem(b.a.storageKey,JSON.stringify(t.data)),c.Notify.success("Logged in successfully."),this.router.navigate(["/dashboard"])):(this._auth.userId=t.data.id,this.router.navigate(["/auth/emailid"]))},t=>{c.Block.remove("#login-button")})};c.Block.circle("#login-button");const e=dt.a.messaging();e.requestPermission().then(()=>{e.getToken().then(e=>{this._auth.firebaseToken=e,t()}),e.onMessage(()=>{})}).catch(e=>{c.Notify.failure("Unable to get permission to notify."),t()})}else c.Notify.failure("Fill the captcha first.");else this.loginForm.markAllAsTouched()}renderReCaptcha(){window.grecaptcha.render(this.recaptchaElement.nativeElement,{sitekey:b.a.googleSiteKey,callback:t=>{t&&(this.recpach=!0)}})}addRecaptchaScript(){window.grecaptchaCallback=()=>{this.renderReCaptcha()},function(t,e,n,r){var i,o=t.getElementsByTagName(e)[0];t.getElementById(n)?r.renderReCaptcha():((i=t.createElement(e)).id=n,i.src="https://www.google.com/recaptcha/api.js?onload=grecaptchaCallback&render=explicit",o.parentNode.insertBefore(i,o))}(document,"script","recaptcha-jssdk",this)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(i.b),o.Lb(_.a),o.Lb(u.d))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-login"]],viewQuery:function(t,e){var n;1&t&&o.zc(pt,!0),2&t&&o.rc(n=o.Zb())&&(e.recaptchaElement=n.first)},decls:38,vars:10,consts:[[1,"auth-main","d-flex"],[1,"auth-img"],[1,"auth-form"],["routerLink","/landingpage",1,"auth-logo","cursor-pointer"],["src","assets/images/nav-logo.png","alt",""],[1,"d-flex","auth-title"],[1,"auth-title__h3"],["routerLink","/auth/signup",1,"auth-link__title"],[1,"my-forms","auth-form-bx",3,"formGroup"],["appearance","outline",1,"example-full-width"],["matPrefix",""],[1,"input-icon"],["src","assets/images/auth/mob-icon.png","alt",""],["name","full_phone","formControlName","full_phone","inputPlaceholder","Phone number",3,"onlyCountries","enablePlaceholder","enableSearch","countryChanged"],[4,"ngIf"],["src","assets/images/auth/pass-icon.png","alt",""],["formControlName","password","name","password","matInput","","placeholder","Password",3,"type"],["matSuffix","",3,"click"],["class","pass-hide-show","src","assets/images/auth/pass-show.png","alt","",4,"ngIf"],["class","pass-hide-show","src","assets/images/auth/pass-hide.png","alt","",4,"ngIf"],["routerLink","/auth/troublelogin",1,"trouble",2,"padding-top","0px","margin-top","-10px"],[1,"btn-outer","mt-40"],[2,"margin-bottom","10px"],["recaptcha",""],["id","login-button",1,"border-plus"],[1,"btn","btn-primary",3,"click"],["src","assets/images/auth/pass-show.png","alt","",1,"pass-hide-show"],["src","assets/images/auth/pass-hide.png","alt","",1,"pass-hide-show"]],template:function(t,e){if(1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Mb(2,"login-svg-image"),o.Qb(),o.Rb(3,"div",2),o.Rb(4,"div",3),o.Rb(5,"figure"),o.Mb(6,"img",4),o.Qb(),o.Qb(),o.Rb(7,"div",5),o.Rb(8,"h3",6),o.Fc(9,"Log in"),o.Qb(),o.Rb(10,"p",7),o.Fc(11,"Sign up"),o.Qb(),o.Qb(),o.Rb(12,"form",8),o.Rb(13,"mat-form-field",9),o.Rb(14,"span",10),o.Rb(15,"figure",11),o.Mb(16,"img",12),o.Qb(),o.Qb(),o.Rb(17,"ngx-mat-intl-tel-input",13),o.Yb("countryChanged",(function(t){return e.countryChanged(t)})),o.Qb(),o.Dc(18,gt,2,0,"mat-error",14),o.Dc(19,mt,2,0,"mat-error",14),o.Qb(),o.Rb(20,"mat-form-field",9),o.Rb(21,"span",10),o.Rb(22,"figure",11),o.Mb(23,"img",15),o.Qb(),o.Qb(),o.Mb(24,"input",16),o.Rb(25,"span",17),o.Yb("click",(function(){return e.hide=!e.hide})),o.Rb(26,"figure",11),o.Dc(27,vt,1,0,"img",18),o.Dc(28,yt,1,0,"img",19),o.Qb(),o.Qb(),o.Dc(29,bt,2,0,"mat-error",14),o.Qb(),o.Rb(30,"p",20),o.Fc(31,"Trouble logging in?"),o.Qb(),o.Rb(32,"div",21),o.Mb(33,"div",22,23),o.Rb(35,"div",24),o.Rb(36,"button",25),o.Yb("click",(function(){return e.loginNow()})),o.Fc(37,"log in"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t){var n=null;o.zb(12),o.ic("formGroup",e.loginForm),o.zb(5),o.ic("onlyCountries",e.allowedCountries)("enablePlaceholder",!0)("enableSearch",!0),o.zb(1),o.ic("ngIf",e.loginForm.get("full_phone").hasError("required")),o.zb(1),o.ic("ngIf",(null==(n=e.loginForm.get("full_phone"))?null:n.hasError("maxlength"))||(null==(n=e.loginForm.get("full_phone"))?null:n.hasError("minlength"))),o.zb(5),o.ic("type",e.hide?"password":"text"),o.zb(3),o.ic("ngIf",e.hide),o.zb(1),o.ic("ngIf",!e.hide),o.zb(1),o.ic("ngIf",e.loginForm.get("password").hasError("required"))}},directives:[I.a,i.c,u.u,u.o,u.h,T.c,T.g,V.a,u.n,u.g,r.m,u.b,E.a,T.h,T.b],styles:[""]}),t})();function wt(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1,"Please enter phone number. "),o.Qb())}function It(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1,"Phone number has to be between 7 and 15 digits long. "),o.Qb())}let Tt=(()=>{class t{constructor(t,e,n){this._auth=t,this._fb=e,this._router=n,this.allowedCountries=b.a.allowedCountries,this.userId=""}ngOnInit(){this.oldPhoneForm=this._fb.group({full_phone:[null,[u.t.required,u.t.minLength(11),u.t.maxLength(19)]],phone_number:[null,[u.t.required]],country_code:[null,u.t.required]})}countryChanged(t){t&&(this.selectedCountry=t)}signUpNow(){if(this.oldPhoneForm.get("full_phone").value){let t=this.oldPhoneForm.get("full_phone").value.split("+"+this.selectedCountry.dialCode);this.oldPhoneForm.get("phone_number").setValue(t[1]),this.oldPhoneForm.get("country_code").setValue("+"+this.selectedCountry.dialCode)}if(this.oldPhoneForm.valid){c.Block.circle("#signup-button");const t=Object.assign(this.oldPhoneForm.value);delete t.full_phone,this._auth.lostPhone(t).subscribe(t=>{c.Block.remove("#signup-button"),c.Notify.success("Email sent on your registered email address."),this._router.navigate(["/auth/confirmaccount"],{state:{data:t.data}})},t=>{c.Block.remove("#signup-button")})}else this.oldPhoneForm.markAllAsTouched()}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(_.a),o.Lb(u.d),o.Lb(i.b))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-oldphone"]],decls:25,vars:6,consts:[[1,"auth-main","d-flex"],[1,"auth-img"],["src","assets/images/auth/trogin.png","alt",""],[1,"auth-form"],["routerLink","/landingpage",1,"auth-logo","cursor-pointer"],["src","assets/images/nav-logo.png","alt",""],[1,"d-flex","auth-title"],[1,"auth-title__h3"],[1,"d-block"],[1,"auth-form-bx","my-forms",3,"formGroup","ngSubmit"],["appearance","outline",1,"example-full-width"],["matPrefix",""],[1,"input-icon"],["src","assets/images/auth/mob-icon.png","alt",""],["name","full_phone","formControlName","full_phone","inputPlaceholder","Phone number",3,"onlyCountries","enablePlaceholder","enableSearch","countryChanged"],[4,"ngIf"],[1,"btn-outer","mt-40"],["id","signup-button",1,"border-plus"],["type","submit",1,"btn","btn-primary"]],template:function(t,e){if(1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"figure"),o.Mb(3,"img",2),o.Qb(),o.Qb(),o.Rb(4,"div",3),o.Rb(5,"div",4),o.Rb(6,"figure"),o.Mb(7,"img",5),o.Qb(),o.Qb(),o.Rb(8,"div",6),o.Rb(9,"h3",7),o.Fc(10,"Enter old phone number "),o.Rb(11,"span",8),o.Fc(12," Please type in the old mobile number "),o.Qb(),o.Qb(),o.Qb(),o.Rb(13,"form",9),o.Yb("ngSubmit",(function(){return e.signUpNow()})),o.Rb(14,"mat-form-field",10),o.Rb(15,"span",11),o.Rb(16,"figure",12),o.Mb(17,"img",13),o.Qb(),o.Qb(),o.Rb(18,"ngx-mat-intl-tel-input",14),o.Yb("countryChanged",(function(t){return e.countryChanged(t)})),o.Qb(),o.Dc(19,wt,2,0,"mat-error",15),o.Dc(20,It,2,0,"mat-error",15),o.Qb(),o.Rb(21,"div",16),o.Rb(22,"div",17),o.Rb(23,"button",18),o.Fc(24,"Submit"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t){var n=null;o.zb(13),o.ic("formGroup",e.oldPhoneForm),o.zb(5),o.ic("onlyCountries",e.allowedCountries)("enablePlaceholder",!0)("enableSearch",!0),o.zb(1),o.ic("ngIf",e.oldPhoneForm.get("full_phone").hasError("required")),o.zb(1),o.ic("ngIf",(null==(n=e.oldPhoneForm.get("full_phone"))?null:n.hasError("maxlength"))||(null==(n=e.oldPhoneForm.get("full_phone"))?null:n.hasError("minlength")))}},directives:[i.c,u.u,u.o,u.h,T.c,T.g,V.a,u.n,u.g,r.m,T.b],styles:[""]}),t})(),Et=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Fb({type:t,selectors:[["app-resetpassword"]],decls:30,vars:0,consts:[[1,"auth-main","d-flex"],[1,"auth-img"],[1,"auth-form"],["routerLink","/landingpage",1,"auth-logo","cursor-pointer"],["src","assets/images/nav-logo.png","alt",""],[1,"d-flex","auth-title"],[1,"auth-title__h3"],[1,"d-block"],[1,"auth-form-bx"],[1,"input-bxx","pos-rel"],[1,"input-icon"],["src","assets/images/auth/pass-icon.png","alt",""],["appearance","fill",1,"example-full-width"],["matInput","","placeholder","Enter new password"],[1,"pass-icon"],["src","assets/images/auth/pass-show.png","alt",""],[1,"input-bxx","mb-0","pos-rel"],["matInput","","placeholder","Confirm new password"],[1,"btn-outer","mt-40"],["routerLink","/auth/confirmaccount",1,"btn","btn-primary"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Mb(2,"login-svg-image"),o.Qb(),o.Rb(3,"div",2),o.Rb(4,"div",3),o.Rb(5,"figure"),o.Mb(6,"img",4),o.Qb(),o.Qb(),o.Rb(7,"div",5),o.Rb(8,"h3",6),o.Fc(9,"Reset password "),o.Rb(10,"span",7),o.Fc(11," Set your new password to access your account "),o.Qb(),o.Qb(),o.Qb(),o.Rb(12,"div",8),o.Rb(13,"div",9),o.Rb(14,"figure",10),o.Mb(15,"img",11),o.Qb(),o.Rb(16,"mat-form-field",12),o.Mb(17,"input",13),o.Qb(),o.Rb(18,"figure",14),o.Mb(19,"img",15),o.Qb(),o.Qb(),o.Rb(20,"div",16),o.Rb(21,"figure",10),o.Mb(22,"img",11),o.Qb(),o.Rb(23,"mat-form-field",12),o.Mb(24,"input",17),o.Qb(),o.Rb(25,"figure",14),o.Mb(26,"img",15),o.Qb(),o.Qb(),o.Rb(27,"div",18),o.Rb(28,"button",19),o.Fc(29,"Submit"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb())},directives:[I.a,i.c,T.c,E.a],styles:[""]}),t})();const Ct=["stepper"];function kt(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1,"Please enter phone number. "),o.Qb())}function Ot(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1,"Phone number has to be between 7 and 15 characters long. "),o.Qb())}const St=function(t){return{id:t}};let Rt=(()=>{class t{constructor(t,e,n){this._auth=t,this._fb=e,this.router=n,this.allowedCountries=b.a.allowedCountries,this.userId=""}ngOnInit(){this.signUpForm=this._fb.group({full_phone:[null,[u.t.required,u.t.minLength(11),u.t.maxLength(19)]],phone_number:[null,[u.t.required]],country_code:[null,u.t.required]})}ngAfterViewInit(){this.stepper.selectedIndex=0}countryChanged(t){t&&(this.selectedCountry=t)}signUpNow(){if(this.signUpForm.get("full_phone").value){let t=this.signUpForm.get("full_phone").value.split("+"+this.selectedCountry.dialCode);this.signUpForm.get("phone_number").setValue(t[1]),this.signUpForm.get("country_code").setValue("+"+this.selectedCountry.dialCode)}if(this.signUpForm.valid){c.Block.circle("#signup-button");const t=Object.assign(this.signUpForm.value);delete t.full_phone,this._auth.signup(t).subscribe(t=>{this.userId=t.data.id,c.Block.remove("#signup-button"),"please fill password first !"==t.message.toLowerCase()?(this.stepper.next(),this.stepper.next()):(c.Notify.success(t.message),this.stepper.next())},t=>{c.Block.remove("#signup-button")})}else this.signUpForm.markAllAsTouched()}OtpVerified(t){this.stepper.next()}setPasswordCompleted(){this._auth.userId=this.userId,this.router.navigate(["/auth/emailid"])}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(_.a),o.Lb(u.d),o.Lb(i.b))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-signup"]],viewQuery:function(t,e){var n;1&t&&o.Jc(Ct,!0),2&t&&o.rc(n=o.Zb())&&(e.stepper=n.first)},decls:31,vars:10,consts:[[1,"auth-main","d-flex"],[1,"auth-img"],[1,"auth-form"],["routerLink","/landingpage",1,"auth-logo","cursor-pointer"],["src","assets/images/nav-logo.png","alt",""],["linear",""],["stepper",""],[1,"d-flex","auth-title"],[1,"auth-title__h3"],["routerLink","/auth/login",1,"auth-link__title"],[1,"auth-form-bx","my-forms",3,"formGroup","ngSubmit"],["appearance","outline",1,"example-full-width"],["matPrefix",""],[1,"input-icon"],["src","assets/images/auth/mob-icon.png","alt",""],["name","full_phone","formControlName","full_phone","inputPlaceholder","Phone number",3,"onlyCountries","enablePlaceholder","enableSearch","countryChanged"],[4,"ngIf"],[1,"btn-outer","mt-40"],["id","signup-button",1,"border-plus"],["type","submit",1,"btn","btn-primary"],[3,"data","verified"],[3,"data","setupDone"]],template:function(t,e){if(1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Mb(2,"login-svg-image"),o.Qb(),o.Rb(3,"div",2),o.Rb(4,"div",3),o.Rb(5,"figure"),o.Mb(6,"img",4),o.Qb(),o.Qb(),o.Rb(7,"mat-horizontal-stepper",5,6),o.Rb(9,"mat-step"),o.Rb(10,"div",7),o.Rb(11,"h3",8),o.Fc(12,"Sign up"),o.Qb(),o.Rb(13,"p",9),o.Fc(14,"Login"),o.Qb(),o.Qb(),o.Rb(15,"form",10),o.Yb("ngSubmit",(function(){return e.signUpNow()})),o.Rb(16,"mat-form-field",11),o.Rb(17,"span",12),o.Rb(18,"figure",13),o.Mb(19,"img",14),o.Qb(),o.Qb(),o.Rb(20,"ngx-mat-intl-tel-input",15),o.Yb("countryChanged",(function(t){return e.countryChanged(t)})),o.Qb(),o.Dc(21,kt,2,0,"mat-error",16),o.Dc(22,Ot,2,0,"mat-error",16),o.Qb(),o.Rb(23,"div",17),o.Rb(24,"div",18),o.Rb(25,"button",19),o.Fc(26,"Sign up"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(27,"mat-step"),o.Rb(28,"signup-activate",20),o.Yb("verified",(function(t){return e.OtpVerified(t)})),o.Qb(),o.Qb(),o.Rb(29,"mat-step"),o.Rb(30,"setup-password",21),o.Yb("setupDone",(function(){return e.setPasswordCompleted()})),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t){var n=null;o.zb(15),o.ic("formGroup",e.signUpForm),o.zb(5),o.ic("onlyCountries",e.allowedCountries)("enablePlaceholder",!0)("enableSearch",!0),o.zb(1),o.ic("ngIf",e.signUpForm.get("full_phone").hasError("required")),o.zb(1),o.ic("ngIf",(null==(n=e.signUpForm.get("full_phone"))?null:n.hasError("maxlength"))||(null==(n=e.signUpForm.get("full_phone"))?null:n.hasError("minlength"))),o.zb(6),o.ic("data",e.signUpForm.value),o.zb(2),o.ic("data",o.nc(8,St,e.userId))}},directives:[I.a,i.c,Q.a,Q.b,u.u,u.o,u.h,T.c,T.g,V.a,u.n,u.g,r.m,B.a,st,T.b],styles:[".mat-horizontal-stepper-header-container{display:none!important}"]}),t})(),At=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Fb({type:t,selectors:[["app-support"]],decls:343,vars:0,consts:[[1,"auth-main","d-flex"],[1,"auth-img"],["xmlns","http://www.w3.org/2000/svg","width","304.099","height","298.496","viewBox","0 0 304.099 298.496"],["id","Group_177577","data-name","Group 177577","transform","translate(0 0)"],["id","Background_Complete","data-name","Background Complete","transform","translate(0 0)"],["id","Group_177427","data-name","Group 177427"],["id","Group_177393","data-name","Group 177393","transform","translate(187.457 133.327)"],["id","Group_177387","data-name","Group 177387"],["id","Group_177381","data-name","Group 177381"],["id","Path_26580","data-name","Path 26580","d","M419.668,288.871H303.026V221.357H419.668Zm-115.931-.712H418.957v-66.09H303.738Z","transform","translate(-303.026 -221.357)","fill","#fff"],["id","Group_177382","data-name","Group 177382","transform","translate(15.609 35.998)"],["id","Rectangle_20843","data-name","Rectangle 20843","width","76.973","height","2.258","fill","#f0f0f0"],["id","Group_177383","data-name","Group 177383","transform","translate(15.609 44.413)"],["id","Rectangle_20844","data-name","Rectangle 20844","width","82.275","height","2.464","fill","#f0f0f0"],["id","Group_177384","data-name","Group 177384","transform","translate(15.609 52.926)"],["id","Rectangle_20845","data-name","Rectangle 20845","width","82.275","height","2.464","fill","#f0f0f0"],["id","Group_177385","data-name","Group 177385","transform","translate(15.609 23.777)"],["id","Rectangle_20846","data-name","Rectangle 20846","width","26.901","height","5.858","fill","#f0f0f0"],["id","Group_177386","data-name","Group 177386","transform","translate(0.356 0.356)"],["id","Rectangle_20847","data-name","Rectangle 20847","width","115.931","height","10.748","fill","#fff"],["id","Group_177392","data-name","Group 177392","transform","translate(107.356 1.954)"],["id","Group_177389","data-name","Group 177389"],["id","Group_177388","data-name","Group 177388"],["id","Path_26581","data-name","Path 26581","d","M453.853,231.646c-.148-.142,1.346-1.943,3.336-4.024s3.725-3.653,3.873-3.511-1.346,1.943-3.337,4.024S454,231.787,453.853,231.646Z","transform","translate(-453.843 -224.102)","fill","#fff"],["id","Group_177391","data-name","Group 177391"],["id","Group_177390","data-name","Group 177390"],["id","Path_26582","data-name","Path 26582","d","M461.062,231.646c-.148.142-1.882-1.431-3.872-3.511s-3.484-3.882-3.336-4.024,1.881,1.43,3.872,3.511S461.21,231.5,461.062,231.646Z","transform","translate(-453.843 -224.102)","fill","#fff"],["id","Group_177406","data-name","Group 177406","transform","translate(44.619)"],["id","Group_177400","data-name","Group 177400"],["id","Group_177394","data-name","Group 177394"],["id","Rectangle_20848","data-name","Rectangle 20848","width","115.931","height","66.802","fill","#e6e6e6"],["id","Group_177395","data-name","Group 177395","transform","translate(15.253 35.642)"],["id","Rectangle_20849","data-name","Rectangle 20849","width","76.973","height","2.258","fill","#f0f0f0"],["id","Group_177396","data-name","Group 177396","transform","translate(15.253 44.057)"],["id","Rectangle_20850","data-name","Rectangle 20850","width","82.275","height","2.463","fill","#f0f0f0"],["id","Group_177397","data-name","Group 177397","transform","translate(15.253 52.57)"],["id","Rectangle_20851","data-name","Rectangle 20851","width","82.275","height","2.463","fill","#f0f0f0"],["id","Group_177398","data-name","Group 177398","transform","translate(15.253 23.421)"],["id","Rectangle_20852","data-name","Rectangle 20852","width","26.901","height","5.858","fill","#f0f0f0"],["id","Group_177399","data-name","Group 177399"],["id","Rectangle_20853","data-name","Rectangle 20853","width","115.931","height","10.747","fill","#fff"],["id","Group_177405","data-name","Group 177405","transform","translate(106.602 1.546)"],["id","Group_177402","data-name","Group 177402","transform","translate(0)"],["id","Group_177401","data-name","Group 177401"],["id","Path_26583","data-name","Path 26583","d","M252.132,43.771c-.148-.142,1.346-1.943,3.336-4.024s3.724-3.653,3.872-3.512S258,38.178,256,40.259,252.28,43.912,252.132,43.771Z","transform","translate(-252.122 -36.226)","fill","#fff"],["id","Group_177404","data-name","Group 177404"],["id","Group_177403","data-name","Group 177403"],["id","Path_26584","data-name","Path 26584","d","M259.341,43.771c-.148.142-1.881-1.431-3.872-3.511s-3.485-3.883-3.337-4.025,1.881,1.431,3.872,3.512S259.489,43.629,259.341,43.771Z","transform","translate(-252.122 -36.226)","fill","#fff"],["id","Group_177413","data-name","Group 177413","transform","translate(0 56.583)"],["id","Group_177407","data-name","Group 177407"],["id","Path_26585","data-name","Path 26585","d","M156.323,181.058H39.681V113.544H156.323Zm-115.931-.712H155.612v-66.09H40.393Z","transform","translate(-39.681 -113.544)","fill","#fff"],["id","Group_177408","data-name","Group 177408","transform","translate(15.609 35.998)"],["id","Rectangle_20854","data-name","Rectangle 20854","width","76.973","height","2.258","fill","#f0f0f0"],["id","Group_177409","data-name","Group 177409","transform","translate(15.609 44.414)"],["id","Rectangle_20855","data-name","Rectangle 20855","width","82.275","height","2.463","fill","#f0f0f0"],["id","Group_177410","data-name","Group 177410","transform","translate(15.609 52.927)"],["id","Rectangle_20856","data-name","Rectangle 20856","width","82.275","height","2.463","fill","#f0f0f0"],["id","Group_177411","data-name","Group 177411","transform","translate(15.609 23.777)"],["id","Rectangle_20857","data-name","Rectangle 20857","width","26.901","height","5.858","fill","#f0f0f0"],["id","Group_177412","data-name","Group 177412","transform","translate(0.356 0.356)"],["id","Rectangle_20858","data-name","Rectangle 20858","width","115.931","height","10.748","fill","#fff"],["id","Group_177414","data-name","Group 177414","transform","translate(114.37 139.568)"],["id","Rectangle_20859","data-name","Rectangle 20859","width","136.887","height","122.546","fill","#e6e6e6"],["id","Group_177420","data-name","Group 177420","transform","translate(14.023 100.964)"],["id","Group_177415","data-name","Group 177415"],["id","Rectangle_20860","data-name","Rectangle 20860","width","107.229","height","111.407","fill","#f0f0f0"],["id","Group_177416","data-name","Group 177416"],["id","Rectangle_20861","data-name","Rectangle 20861","width","107.229","height","12.139","fill","#fff"],["id","Group_177417","data-name","Group 177417","transform","translate(4.352 3.592)"],["id","Path_26586","data-name","Path 26586","d","M70,183.291a2.254,2.254,0,1,1-2.252-2.353A2.3,2.3,0,0,1,70,183.291Z","transform","translate(-65.495 -180.938)","fill","#fff"],["id","Group_177418","data-name","Group 177418","transform","translate(13.484 3.592)"],["id","Path_26587","data-name","Path 26587","d","M82.826,183.291a2.253,2.253,0,1,1-2.251-2.353A2.3,2.3,0,0,1,82.826,183.291Z","transform","translate(-78.324 -180.938)","fill","#fff"],["id","Group_177419","data-name","Group 177419","transform","translate(22.616 3.592)"],["id","Path_26588","data-name","Path 26588","d","M95.655,183.291a2.253,2.253,0,1,1-2.252-2.353A2.3,2.3,0,0,1,95.655,183.291Z","transform","translate(-91.153 -180.938)","fill","#fff"],["id","Group_177426","data-name","Group 177426","transform","translate(151.904 24.366)"],["id","Group_177421","data-name","Group 177421"],["id","Rectangle_20862","data-name","Rectangle 20862","width","136.887","height","136.43","fill","#f0f0f0"],["id","Group_177422","data-name","Group 177422"],["id","Rectangle_20863","data-name","Rectangle 20863","width","136.887","height","15.98","fill","#fff"],["id","Group_177423","data-name","Group 177423","transform","translate(5.73 4.728)"],["id","Path_26589","data-name","Path 26589","d","M267.058,78.025a2.967,2.967,0,1,1-2.965-3.1A3.034,3.034,0,0,1,267.058,78.025Z","transform","translate(-261.13 -74.927)","fill","#fff"],["id","Group_177424","data-name","Group 177424","transform","translate(17.684 4.795)"],["id","Path_26590","data-name","Path 26590","d","M283.051,75.957a2.967,2.967,0,1,1-4.287-.1A3.032,3.032,0,0,1,283.051,75.957Z","transform","translate(-277.924 -75.021)","fill","#fff"],["id","Group_177425","data-name","Group 177425","transform","translate(29.775 4.728)"],["id","Path_26591","data-name","Path 26591","d","M300.836,78.025a2.967,2.967,0,1,1-2.964-3.1A3.033,3.033,0,0,1,300.836,78.025Z","transform","translate(-294.909 -74.927)","fill","#fff"],["id","Floor","transform","translate(38.434 298.126)"],["id","Group_177428","data-name","Group 177428","transform","translate(0)"],["id","Path_26592","data-name","Path 26592","d","M314.46,453.056c0,.1-49.429.186-110.388.186-60.981,0-110.4-.083-110.4-.186s49.418-.185,110.4-.185C265.032,452.871,314.46,452.954,314.46,453.056Z","transform","translate(-93.674 -452.871)","fill","#263238"],["id","Plant","transform","translate(197.953 135.308)"],["id","Group_177446","data-name","Group 177446"],["id","Group_177430","data-name","Group 177430"],["id","Group_177429","data-name","Group 177429"],["id","Path_26593","data-name","Path 26593","d","M330.875,300c-11-7.683-13.491-21.943-13.056-34.761.073-2.139-.162-4.395.856-6.273s3.393-3.161,5.309-2.259c1.589.748,2.281,2.6,3.17,4.125a12.511,12.511,0,0,0,5.018,4.793c1.363.708,3.049,1.14,4.393.4,1.846-1.019,2.064-3.568,2.05-5.7q-.037-5.949-.074-11.9a19.825,19.825,0,0,1,.642-6.32,6.6,6.6,0,0,1,4.149-4.463c2.025-.567,4.529.6,4.956,2.683a19.681,19.681,0,0,1,.061,2.65,2.238,2.238,0,0,0,1.31,2.107,2.572,2.572,0,0,0,2.337-.977,28.3,28.3,0,0,0,5.08-7.67,39.247,39.247,0,0,1,4.738-7.914,11.508,11.508,0,0,1,7.8-4.373c3.048-.172,6.3,1.708,7.066,4.7s-.978,6.044-2.883,8.473a47.519,47.519,0,0,1-9.89,9.428,3.908,3.908,0,0,0-1.655,1.779c-.462,1.419.883,2.827,2.283,3.294,1.587.528,3.308.364,4.967.559s3.457.928,4.084,2.5c.872,2.175-.947,4.455-2.737,5.948A40.712,40.712,0,0,1,358.8,267.78a13.7,13.7,0,0,0-4.475,2.175c-1.263,1.1-2.024,3.013-1.262,4.512s2.721,1.981,4.361,1.676a28.408,28.408,0,0,0,4.67-1.784c2.924-1.1,6.7-.9,8.574,1.625a6.734,6.734,0,0,1,.717,5.955,15.516,15.516,0,0,1-3.226,5.26,40.92,40.92,0,0,1-17.473,12.279c-6.784,2.353-13.07,2.989-19.812.523","transform","translate(-317.772 -224.14)","fill","#17c2ec"],["id","Group_177433","data-name","Group 177433","transform","translate(12.622 1.792)"],["id","Group_177432","data-name","Group 177432"],["id","Group_177431","data-name","Group 177431"],["id","Path_26594","data-name","Path 26594","d","M378.711,226.658a1.605,1.605,0,0,1-.206.2l-.632.563c-.557.493-1.38,1.22-2.412,2.185a79.914,79.914,0,0,0-8.128,8.773c-1.583,1.972-3.229,4.205-4.952,6.635s-3.539,5.045-5.35,7.863a96.255,96.255,0,0,0-5.25,9.1c-.821,1.627-1.552,3.329-2.3,5.065s-1.495,3.5-2.258,5.277a195.481,195.481,0,0,0-7.584,20.479,95.018,95.018,0,0,0-3.546,17.462,69.622,69.622,0,0,0-.2,12.02c.112,1.417.22,2.516.32,3.258.041.356.073.636.1.846a1.743,1.743,0,0,1,.021.292,1.49,1.49,0,0,1-.06-.285c-.033-.209-.08-.487-.137-.841-.125-.74-.258-1.838-.394-3.257a66.583,66.583,0,0,1,.077-12.059,93.413,93.413,0,0,1,3.477-17.539,190.6,190.6,0,0,1,7.569-20.53q1.146-2.674,2.261-5.28c.746-1.731,1.486-3.448,2.313-5.082a95.139,95.139,0,0,1,5.292-9.12c1.823-2.82,3.657-5.428,5.388-7.855s3.4-4.653,5-6.62a75.438,75.438,0,0,1,8.241-8.71c1.049-.949,1.888-1.658,2.463-2.131l.656-.534A1.507,1.507,0,0,1,378.711,226.658Z","transform","translate(-335.504 -226.657)","fill","#263238"],["id","Group_177436","data-name","Group 177436","transform","translate(25.552 13.505)"],["id","Group_177435","data-name","Group 177435"],["id","Group_177434","data-name","Group 177434"],["id","Path_26595","data-name","Path 26595","d","M356.782,266.525a4.357,4.357,0,0,1-.208-.908c-.112-.588-.245-1.444-.394-2.5-.3-2.119-.616-5.06-.952-8.3s-.693-6.172-1.025-8.28c-.163-1.055-.3-1.908-.409-2.495a4.3,4.3,0,0,1-.119-.924,4.236,4.236,0,0,1,.268.892c.151.579.334,1.426.532,2.479.4,2.1.806,5.038,1.142,8.286.323,3.2.615,6.1.839,8.31.107,1,.2,1.841.27,2.516A4.185,4.185,0,0,1,356.782,266.525Z","transform","translate(-353.667 -243.112)","fill","#263238"],["id","Group_177439","data-name","Group 177439","transform","translate(28.666 31.777)"],["id","Group_177438","data-name","Group 177438"],["id","Group_177437","data-name","Group 177437"],["id","Path_26596","data-name","Path 26596","d","M385.4,268.809a5.953,5.953,0,0,1-1.091.13c-.7.063-1.718.148-2.97.293-2.506.27-5.954.765-9.736,1.478s-7.175,1.516-9.613,2.163c-1.222.315-2.2.6-2.884.787a5.755,5.755,0,0,1-1.068.262,5.884,5.884,0,0,1,1.023-.409c.667-.236,1.64-.559,2.856-.91,2.426-.718,5.821-1.561,9.614-2.283a96.47,96.47,0,0,1,9.781-1.367c1.259-.11,2.282-.153,2.989-.167A5.776,5.776,0,0,1,385.4,268.809Z","transform","translate(-358.043 -268.78)","fill","#263238"],["id","Group_177442","data-name","Group 177442","transform","translate(2.97 32.377)"],["id","Group_177441","data-name","Group 177441"],["id","Group_177440","data-name","Group 177440"],["id","Path_26597","data-name","Path 26597","d","M335.722,304.569a1.415,1.415,0,0,1-.187-.333l-.468-.99c-.4-.861-.952-2.123-1.611-3.691-1.32-3.134-3.008-7.521-4.8-12.387s-3.442-9.265-4.695-12.422c-.614-1.535-1.119-2.8-1.495-3.736-.16-.407-.293-.743-.4-1.019a1.384,1.384,0,0,1-.115-.367,1.5,1.5,0,0,1,.187.335l.468.989c.4.861.952,2.123,1.611,3.691,1.32,3.134,3.007,7.521,4.8,12.389s3.441,9.263,4.694,12.421c.614,1.534,1.119,2.8,1.495,3.735l.4,1.019A1.4,1.4,0,0,1,335.722,304.569Z","transform","translate(-321.945 -269.624)","fill","#263238"],["id","Group_177445","data-name","Group 177445","transform","translate(16.748 55.601)"],["id","Group_177444","data-name","Group 177444"],["id","Group_177443","data-name","Group 177443"],["id","Path_26598","data-name","Path 26598","d","M377.658,302.253a1.43,1.43,0,0,1-.36.149l-1.056.354-3.894,1.261c-3.287,1.066-7.81,2.591-12.807,4.282s-9.539,3.177-12.85,4.175c-1.655.5-3,.891-3.931,1.141l-1.077.283a1.4,1.4,0,0,1-.383.072,1.5,1.5,0,0,1,.361-.149l1.056-.353,3.892-1.261c3.287-1.066,7.812-2.591,12.809-4.283s9.538-3.176,12.848-4.174c1.655-.5,3-.891,3.933-1.142l1.076-.283A1.463,1.463,0,0,1,377.658,302.253Z","transform","translate(-341.3 -302.249)","fill","#263238"],["id","Padlock","transform","translate(194.51 3.308)"],["id","Group_177456","data-name","Group 177456"],["id","Group_177448","data-name","Group 177448"],["id","Group_177447","data-name","Group 177447"],["id","Path_26599","data-name","Path 26599","d","M354.652,53.634l-3.669,1.312-1.568-4.791c-2.892-8.835-12.125-13.562-20.57-10.541s-12.967,12.668-10.074,21.5l1.568,4.791-3.68,1.316a5.853,5.853,0,0,0-3.43,7.317l10.2,31.172a5.5,5.5,0,0,0,7.017,3.637l37.993-13.591a5.883,5.883,0,0,0,3.462-7.386L361.7,57.2A5.491,5.491,0,0,0,354.652,53.634Zm-28.958,5.007a9.4,9.4,0,0,1,5.522-11.786,8.8,8.8,0,0,1,11.27,5.779l1.568,4.79-16.792,6.007ZM347.056,86.3l2.606,7.96a.64.64,0,0,1-.408.8l-3.647,1.3a.59.59,0,0,1-.745-.384l-2.607-7.96a7.116,7.116,0,0,1-6.426-4.986,7.482,7.482,0,0,1,4.407-9.382,7.007,7.007,0,0,1,8.978,4.594A7.6,7.6,0,0,1,347.056,86.3Z","transform","translate(-312.934 -38.702)","fill","#4a6aff"],["id","Group_177449","data-name","Group 177449","transform","translate(7.242 16.155)"],["id","Path_26600","data-name","Path 26600","d","M353.756,61.4c.034.1-6.8,2.654-15.26,5.713s-15.352,5.461-15.387,5.364,6.8-2.654,15.261-5.713S353.721,61.3,353.756,61.4Z","transform","translate(-323.109 -61.397)","fill","#263238"],["id","Group_177451","data-name","Group 177451","transform","translate(17.854 17.47)"],["id","Group_177450","data-name","Group 177450"],["id","Path_26601","data-name","Path 26601","d","M366.12,63.244a.869.869,0,0,1,.082.186l.207.558.76,2.158c.654,1.906,1.585,4.617,2.731,7.957,1.143,3.372,2.5,7.374,4.005,11.816.744,2.23,1.557,4.547,2.336,6.994a10.477,10.477,0,0,1,.534,3.907,5.2,5.2,0,0,1-.576,1.97,5.385,5.385,0,0,1-1.345,1.586,12.679,12.679,0,0,1-3.613,1.844l-3.669,1.318-6.938,2.483-11.755,4.186L340.942,113l-2.163.741-.566.184a.777.777,0,0,1-.2.051.873.873,0,0,1,.184-.086l.553-.219,2.14-.807,7.9-2.9,11.727-4.26,6.931-2.5,3.665-1.323a12.353,12.353,0,0,0,3.506-1.787,5.032,5.032,0,0,0,1.254-1.473,4.859,4.859,0,0,0,.535-1.829,10.173,10.173,0,0,0-.515-3.768c-.767-2.423-1.579-4.761-2.311-6.989-1.477-4.451-2.808-8.462-3.931-11.841-1.1-3.356-1.992-6.08-2.619-7.995l-.695-2.18c-.07-.233-.127-.421-.172-.569A.788.788,0,0,1,366.12,63.244Z","transform","translate(-338.016 -63.244)","fill","#263238"],["id","Group_177453","data-name","Group 177453","transform","translate(10.781 6.277)"],["id","Group_177452","data-name","Group 177452"],["id","Path_26602","data-name","Path 26602","d","M343.215,48.9c-.019.031-.378-.191-1.077-.473a9.533,9.533,0,0,0-3.108-.623,10.575,10.575,0,0,0-4.585.866,10.234,10.234,0,0,0-4.351,3.636,9.6,9.6,0,0,0-1.673,5.4,16.613,16.613,0,0,0,.725,4.658c.375,1.3.759,2.331,1.012,3.047a7.677,7.677,0,0,1,.368,1.124,6.812,6.812,0,0,1-.5-1.072c-.294-.7-.716-1.72-1.128-3.025a16.094,16.094,0,0,1-.815-4.735,9.816,9.816,0,0,1,1.707-5.611,10.423,10.423,0,0,1,4.523-3.741,10.564,10.564,0,0,1,4.733-.814,8.91,8.91,0,0,1,3.151.752,6.326,6.326,0,0,1,.774.423C343.137,48.823,343.222,48.885,343.215,48.9Z","transform","translate(-328.079 -47.519)","fill","#263238"],["id","Group_177455","data-name","Group 177455","transform","translate(22.02 34.617)"],["id","Group_177454","data-name","Group 177454"],["id","Path_26603","data-name","Path 26603","d","M348.088,88.224a2.049,2.049,0,0,1,.361-.179,7.6,7.6,0,0,1,1.1-.4,7.792,7.792,0,0,1,1.85-.307,6.244,6.244,0,0,1,2.5.372,7.723,7.723,0,0,1,4.318,4.961,7.151,7.151,0,0,1,.033,4.087,9.263,9.263,0,0,1-2.328,3.848l.047-.189c.945,2.594,1.975,5.418,3.047,8.355l.065.179-.18.06-1.627.545-3.542,1.187-.175.058-.058-.175c-.975-2.952-2.044-5.734-2.82-8.394l.154.121a7.107,7.107,0,0,1-3.81-1.506A8.57,8.57,0,0,1,344.628,98a6.6,6.6,0,0,1-.755-3.206,7.588,7.588,0,0,1,.6-2.75,7.486,7.486,0,0,1,2.387-3.13,4.528,4.528,0,0,1,1.231-.687,13.173,13.173,0,0,0-1.164.774,7.6,7.6,0,0,0-2.263,3.121,6.746,6.746,0,0,0,.22,5.749,8.326,8.326,0,0,0,2.328,2.736,6.813,6.813,0,0,0,3.637,1.417l.12.007.033.114c.785,2.641,1.859,5.412,2.843,8.375l-.233-.117,3.541-1.188,1.627-.545-.115.238c-1.064-2.941-2.088-5.767-3.027-8.363l-.038-.1.085-.084a8.972,8.972,0,0,0,2.249-3.682,6.863,6.863,0,0,0,0-3.907,7.527,7.527,0,0,0-4.113-4.848,6.167,6.167,0,0,0-2.415-.406,8.1,8.1,0,0,0-1.826.251C348.6,88.011,348.1,88.254,348.088,88.224Z","transform","translate(-343.868 -87.333)","fill","#263238"],["id","Device","transform","translate(112.236 34.797)"],["id","Group_177500","data-name","Group 177500"],["id","Group_177463","data-name","Group 177463"],["id","Group_177457","data-name","Group 177457"],["id","Path_26604","data-name","Path 26604","d","M283.867,292.486l-71.1-.329A15.487,15.487,0,0,1,197.354,276.6l.753-178.244a15.488,15.488,0,0,1,15.559-15.422l71.1.328A15.488,15.488,0,0,1,300.18,98.82l-.753,178.245A15.487,15.487,0,0,1,283.867,292.486Z","transform","translate(-197.354 -82.938)","fill","#455a64"],["id","Group_177458","data-name","Group 177458","transform","translate(4.721 6.152)"],["id","Path_26605","data-name","Path 26605","d","M286.574,91.909l-13.785-.064a3.424,3.424,0,0,0-3.362,3.484l-.011,2.5a3.424,3.424,0,0,1-3.362,3.484l-26.869-.124a3.428,3.428,0,0,1-3.333-3.515l.011-2.5a3.428,3.428,0,0,0-3.333-3.514l-4.848-.023-12.065-.056a10.847,10.847,0,0,0-10.9,10.8l-.735,173.98a10.846,10.846,0,0,0,10.8,10.892l70.956.327a10.847,10.847,0,0,0,10.9-10.8l.735-173.98A10.846,10.846,0,0,0,286.574,91.909Z","transform","translate(-203.986 -91.581)","fill","#fff"],["id","Group_177462","data-name","Group 177462","transform","translate(24.013 120.724)"],["id","Group_177461","data-name","Group 177461"],["id","Group_177460","data-name","Group 177460"],["id","Group_177459","data-name","Group 177459"],["id","Path_26606","data-name","Path 26606","d","M284.835,327.567l-52.764-.243c-.546,0-.987-.6-.983-1.328l.058-13.8c0-.731.448-1.321.994-1.319l52.764.243c.546,0,.987.6.984,1.329l-.058,13.8C285.827,326.979,285.381,327.569,284.835,327.567Z","transform","translate(-231.088 -310.872)","fill","#17c2ec"],["id","LOG_IN","data-name","LOG IN","transform","matrix(1, 0.005, -0.004, 1, 17.814, 9.109)","fill","#fff","font-size","4","font-family","Montserrat-Regular, Montserrat"],["x","0","y","0"],["id","Group_177499","data-name","Group 177499","transform","translate(16.806 27.11)"],["id","Group_177464","data-name","Group 177464","transform","translate(0.38 30.416)"],["id","Rectangle_20864","data-name","Rectangle 20864","width","18.306","height","3.359","transform","translate(0.016 0) rotate(0.264)","fill","#4a6aff"],["id","Rectangle_20865","data-name","Rectangle 20865","width","18.306","height","3.359","transform","translate(0.016 0) rotate(0.264)","opacity","0.1"],["id","Group_177466","data-name","Group 177466","transform","translate(0.13 38.632)"],["id","Group_177465","data-name","Group 177465"],["id","Path_26607","data-name","Path 26607","d","M293.4,187.774a1.636,1.636,0,0,0,.418-.1,1.126,1.126,0,0,0,.689-.958c0-1.135,0-2.785-.009-4.9q0-1.6,0-3.546,0-.487,0-.993a1.368,1.368,0,0,0-.2-.932,1.05,1.05,0,0,0-.842-.434l-1.115,0-10.282-.02-59.537-.221a.965.965,0,0,0-.784.4,1.378,1.378,0,0,0-.185.93q0,1.084-.009,2.16-.01,2.153-.018,4.277-.005,1.062-.01,2.116a6.342,6.342,0,0,0,.029,1,.968.968,0,0,0,.556.641,1.078,1.078,0,0,0,.441.075l.521,0,1.039,0,2.065.01,15.808.084,26.766.163,18.045.143,4.905.057,1.276.024c.288.008.436.021.436.021s-.147.012-.436.017l-1.276.012-4.906.012-18.046-.024-26.767-.084-15.808-.062-2.065-.009-1.039,0-.521,0a1.437,1.437,0,0,1-.58-.1,1.331,1.331,0,0,1-.77-.886,2.1,2.1,0,0,1-.044-.569l0-.527q0-1.054.009-2.116.007-2.124.017-4.277,0-1.076.009-2.16a4.989,4.989,0,0,1,.018-.569,1.3,1.3,0,0,1,.238-.578,1.336,1.336,0,0,1,1.086-.55l59.537.33,10.282.075,1.115.009a1.243,1.243,0,0,1,1,.522,1.548,1.548,0,0,1,.228,1.046c0,.337,0,.669-.008.993-.012,1.295-.022,2.479-.031,3.546-.026,2.121-.047,3.773-.061,4.91a1.162,1.162,0,0,1-.751.987A.847.847,0,0,1,293.4,187.774Z","transform","translate(-221.146 -175.295)","fill","#fff"],["id","Group_177467","data-name","Group 177467","transform","translate(5.294 43.335)"],["id","Rectangle_20866","data-name","Rectangle 20866","width","33.487","height","3.14","transform","translate(0.015 0) rotate(0.265)","fill","#4a6aff"],["id","Rectangle_20867","data-name","Rectangle 20867","width","33.487","height","3.14","transform","translate(0.015 0) rotate(0.265)","fill","#fff","opacity","0.2"],["id","Group_177468","data-name","Group 177468","transform","translate(0.251 61.069)"],["id","Rectangle_20868","data-name","Rectangle 20868","width","18.306","height","3.359","transform","translate(0.016 0) rotate(0.264)","fill","#4a6aff"],["id","Rectangle_20869","data-name","Rectangle 20869","width","18.306","height","3.359","transform","translate(0.016 0) rotate(0.264)","opacity","0.1"],["id","Group_177470","data-name","Group 177470","transform","translate(0 69.287)"],["id","Group_177469","data-name","Group 177469"],["id","Path_26608","data-name","Path 26608","d","M292.881,230.836a2.847,2.847,0,0,0,.421-.08,1.475,1.475,0,0,0,.9-.806,1.936,1.936,0,0,0,.123-.9q0-.518,0-1.13c0-.82,0-1.762-.006-2.822s0-2.243,0-3.534v-.989a1.541,1.541,0,0,0-.208-.94,1.394,1.394,0,0,0-.774-.6,4.369,4.369,0,0,0-1.075-.062l-10.247-.02-59.331-.22a1.309,1.309,0,0,0-1.3,1.146c-.021.677-.011,1.425-.019,2.131q-.01,2.145-.019,4.262,0,1.058-.009,2.108a4.481,4.481,0,0,0,.045.994,1.315,1.315,0,0,0,.52.73,1.412,1.412,0,0,0,.886.228l1.036.006,2.057.01,15.754.083,26.673.163,17.982.142,4.889.057,1.271.024c.287.008.434.021.434.021s-.147.012-.434.017l-1.271.012-4.889.013-17.983-.024-26.674-.084-15.753-.062-2.058-.009-1.036,0a1.785,1.785,0,0,1-1.09-.29,1.684,1.684,0,0,1-.667-.936,4.565,4.565,0,0,1-.058-1.092q0-1.051.008-2.108.01-2.116.018-4.262c.009-.724-.006-1.412.021-2.173a1.679,1.679,0,0,1,1.669-1.473l59.33.328,10.247.075a4.443,4.443,0,0,1,1.133.078,1.59,1.59,0,0,1,.879.69,1.741,1.741,0,0,1,.228,1.041q0,.505-.008.989c-.011,1.291-.022,2.471-.031,3.534s-.021,2-.029,2.822c0,.407-.009.784-.013,1.13a2,2,0,0,1-.147.933,1.505,1.505,0,0,1-.96.812A1.149,1.149,0,0,1,292.881,230.836Z","transform","translate(-220.963 -218.36)","fill","#fff"],["id","Group_177498","data-name","Group 177498","transform","translate(19.766)"],["id","Group_177496","data-name","Group 177496","transform","translate(12.615)"],["id","Path_26628","data-name","Path 26628","d","M272.141,126.35a2.759,2.759,0,0,0,1.644-2.554,2.594,2.594,0,1,0-5.177-.023,2.757,2.757,0,0,0,1.649,2.578c-3.983.6-3.8,4.93-3.8,4.93l9.42.043S276.09,126.946,272.141,126.35Z","transform","translate(-266.453 -121.023)","fill","#4a6aff"],["id","Path_26629","data-name","Path 26629","d","M272.141,126.35a2.759,2.759,0,0,0,1.644-2.554,2.594,2.594,0,1,0-5.177-.023,2.757,2.757,0,0,0,1.649,2.578c-3.983.6-3.8,4.93-3.8,4.93l9.42.043S276.09,126.946,272.141,126.35Z","transform","translate(-266.453 -121.023)","opacity","0.1"],["id","Group_177497","data-name","Group 177497","transform","translate(0 12.979)"],["id","Rectangle_20874","data-name","Rectangle 20874","width","33.593","height","4.017","transform","matrix(1, 0.005, -0.005, 1, 0.019, 0)","fill","#4a6aff"],["id","Rectangle_20875","data-name","Rectangle 20875","width","33.593","height","4.017","transform","matrix(1, 0.005, -0.005, 1, 0.019, 0)","fill","#fff","opacity","0.2"],["id","Group_177579","data-name","Group 177579","transform","translate(5.292 74.412)"],["id","Group_177484","data-name","Group 177484"],["id","Group_177475","data-name","Group 177475"],["id","Path_26610","data-name","Path 26610","d","M231.326,272a1.467,1.467,0,1,1-1.457-1.568A1.515,1.515,0,0,1,231.326,272Z","transform","translate(-228.398 -270.434)","fill","#4a6aff"],["id","Group_177476","data-name","Group 177476","transform","translate(4.536 0.021)"],["id","Path_26611","data-name","Path 26611","d","M237.7,272.032a1.467,1.467,0,1,1-1.457-1.569A1.514,1.514,0,0,1,237.7,272.032Z","transform","translate(-234.771 -270.463)","fill","#4a6aff"],["id","Group_177477","data-name","Group 177477","transform","translate(9.073 0.042)"],["id","Path_26612","data-name","Path 26612","d","M244.072,272.061a1.467,1.467,0,1,1-1.458-1.568A1.513,1.513,0,0,1,244.072,272.061Z","transform","translate(-241.144 -270.493)","fill","#4a6aff"],["id","Group_177478","data-name","Group 177478","transform","translate(13.609 0.063)"],["id","Path_26613","data-name","Path 26613","d","M250.444,272.09a1.467,1.467,0,1,1-1.456-1.568A1.514,1.514,0,0,1,250.444,272.09Z","transform","translate(-247.517 -270.522)","fill","#4a6aff"],["id","Group_177479","data-name","Group 177479","transform","translate(18.145 0.083)"],["id","Path_26614","data-name","Path 26614","d","M256.817,272.119a1.467,1.467,0,1,1-1.456-1.568A1.513,1.513,0,0,1,256.817,272.119Z","transform","translate(-253.889 -270.551)","fill","#4a6aff"],["id","Group_177480","data-name","Group 177480","transform","translate(22.682 0.105)"],["id","Path_26615","data-name","Path 26615","d","M263.19,272.149a1.467,1.467,0,1,1-1.457-1.568A1.512,1.512,0,0,1,263.19,272.149Z","transform","translate(-260.262 -270.581)","fill","#4a6aff"],["id","Group_177481","data-name","Group 177481","transform","translate(27.218 0.126)"],["id","Path_26616","data-name","Path 26616","d","M269.563,272.178a1.467,1.467,0,1,1-1.458-1.567A1.516,1.516,0,0,1,269.563,272.178Z","transform","translate(-266.635 -270.611)","fill","#4a6aff"],["id","Group_177482","data-name","Group 177482","transform","translate(31.755 0.147)"],["id","Path_26617","data-name","Path 26617","d","M275.936,272.207a1.467,1.467,0,1,1-1.457-1.567A1.515,1.515,0,0,1,275.936,272.207Z","transform","translate(-273.008 -270.64)","fill","#4a6aff"],["id","Group_177483","data-name","Group 177483","transform","translate(36.29 0.167)"],["id","Path_26618","data-name","Path 26618","d","M282.308,272.238a1.467,1.467,0,1,1-1.457-1.569A1.514,1.514,0,0,1,282.308,272.238Z","transform","translate(-279.38 -270.669)","fill","#4a6aff"],["id","Group_177494","data-name","Group 177494","opacity","0.2"],["id","Group_177485","data-name","Group 177485"],["id","Path_26619","data-name","Path 26619","d","M231.326,272a1.467,1.467,0,1,1-1.457-1.568A1.515,1.515,0,0,1,231.326,272Z","transform","translate(-228.398 -270.434)","fill","#fff"],["id","Group_177486","data-name","Group 177486","transform","translate(4.536 0.021)"],["id","Path_26620","data-name","Path 26620","d","M237.7,272.032a1.467,1.467,0,1,1-1.457-1.569A1.514,1.514,0,0,1,237.7,272.032Z","transform","translate(-234.771 -270.463)","fill","#fff"],["id","Group_177487","data-name","Group 177487","transform","translate(9.073 0.042)"],["id","Path_26621","data-name","Path 26621","d","M244.072,272.061a1.467,1.467,0,1,1-1.458-1.568A1.513,1.513,0,0,1,244.072,272.061Z","transform","translate(-241.144 -270.493)","fill","#fff"],["id","Group_177488","data-name","Group 177488","transform","translate(13.609 0.063)"],["id","Path_26622","data-name","Path 26622","d","M250.444,272.09a1.467,1.467,0,1,1-1.456-1.568A1.514,1.514,0,0,1,250.444,272.09Z","transform","translate(-247.517 -270.522)","fill","#fff"],["id","Group_177489","data-name","Group 177489","transform","translate(18.145 0.083)"],["id","Path_26623","data-name","Path 26623","d","M256.817,272.119a1.467,1.467,0,1,1-1.456-1.568A1.513,1.513,0,0,1,256.817,272.119Z","transform","translate(-253.889 -270.551)","fill","#fff"],["id","Group_177490","data-name","Group 177490","transform","translate(22.682 0.105)"],["id","Path_26624","data-name","Path 26624","d","M263.19,272.149a1.467,1.467,0,1,1-1.457-1.568A1.512,1.512,0,0,1,263.19,272.149Z","transform","translate(-260.262 -270.581)","fill","#fff"],["id","Group_177491","data-name","Group 177491","transform","translate(27.218 0.126)"],["id","Path_26625","data-name","Path 26625","d","M269.563,272.178a1.467,1.467,0,1,1-1.458-1.567A1.516,1.516,0,0,1,269.563,272.178Z","transform","translate(-266.635 -270.611)","fill","#fff"],["id","Group_177492","data-name","Group 177492","transform","translate(31.755 0.147)"],["id","Path_26626","data-name","Path 26626","d","M275.936,272.207a1.467,1.467,0,1,1-1.457-1.567A1.515,1.515,0,0,1,275.936,272.207Z","transform","translate(-273.008 -270.64)","fill","#fff"],["id","Group_177493","data-name","Group 177493","transform","translate(36.29 0.167)"],["id","Path_26627","data-name","Path 26627","d","M282.308,272.238a1.467,1.467,0,1,1-1.457-1.569A1.514,1.514,0,0,1,282.308,272.238Z","transform","translate(-279.38 -270.669)","fill","#fff"],["id","Speech_Bubble","data-name","Speech Bubble","transform","translate(40.611 95.823)"],["id","Group_177506","data-name","Group 177506"],["id","Group_177502","data-name","Group 177502"],["id","Group_177501","data-name","Group 177501"],["id","Path_26630","data-name","Path 26630","d","M115.05,168.675a1.938,1.938,0,0,1-.33.037l-.969.071a10.764,10.764,0,0,0-1.562.209c-.305.061-.643.086-.987.188l-1.1.306a18.178,18.178,0,0,0-5.249,2.6,18.6,18.6,0,0,0-5.165,5.749,19.624,19.624,0,0,0-1.81,4.134,20.837,20.837,0,0,0-.742,7.405c.023.436.117.87.173,1.31a9.275,9.275,0,0,0,.25,1.318,18.786,18.786,0,0,0,10.663,13.045,16.892,16.892,0,0,0,6.114,1.373,16.516,16.516,0,0,0,6.382-.919l.626-.229.083-.031.075.038,8.978,4.558-.267.228c-.959-2.975-1.888-5.86-2.78-8.628l-.034-.106.079-.08a19.167,19.167,0,0,0,4.714-7.837,19.692,19.692,0,0,0,.683-8.343,19.2,19.2,0,0,0-6.412-12.033,19.72,19.72,0,0,0-4.41-2.807,19.363,19.363,0,0,0-3.725-1.174l-1.4-.238-1.03-.072-.631-.048a1.064,1.064,0,0,1-.214-.028,1.17,1.17,0,0,1,.215,0l.634.018,1.037.042,1.409.21a18.956,18.956,0,0,1,3.774,1.131,19.7,19.7,0,0,1,4.487,2.8,19.347,19.347,0,0,1,4.143,5,19.562,19.562,0,0,1,2.43,7.166,19.978,19.978,0,0,1-.665,8.485,19.48,19.48,0,0,1-4.783,8l.045-.187,2.793,8.624.141.435-.408-.207-8.98-4.552.157.008-.639.235a16.893,16.893,0,0,1-6.525.937,17.276,17.276,0,0,1-6.247-1.409A19.1,19.1,0,0,1,97.223,192.08a9.5,9.5,0,0,1-.249-1.342c-.056-.448-.149-.888-.171-1.333a21.049,21.049,0,0,1,.786-7.52,19.789,19.789,0,0,1,1.86-4.186,18.7,18.7,0,0,1,5.275-5.786,18.063,18.063,0,0,1,5.332-2.573l1.117-.291c.348-.1.689-.116,1-.172a10.137,10.137,0,0,1,1.575-.173l.975-.033A2.154,2.154,0,0,1,115.05,168.675Z","transform","translate(-96.733 -168.669)","fill","#4a6aff"],["id","Group_177505","data-name","Group 177505","transform","translate(11.276 9.998)"],["id","Group_177503","data-name","Group 177503"],["id","Path_26631","data-name","Path 26631","d","M123.674,189.343h-1.315l-2.871-4v-2.626s-2.034-.125-1.795,3.314-.019,2.563-.019,2.563-4.318.016-4.677.392c-.261.273-.379,4.561-.424,6.887a2.518,2.518,0,0,0,1.785,2.537,1.9,1.9,0,0,0,.464.063c1.077,0,6.579-.876,6.579-.876h2.272Z","transform","translate(-112.573 -182.715)","fill","#4a6aff"],["id","Group_177504","data-name","Group 177504","transform","translate(11.805 5.907)"],["id","Path_26632","data-name","Path 26632","d","M132.219,191.013l-.809,9h-2.253v-8.817Z","transform","translate(-129.157 -191.013)","fill","#4a6aff"],["id","Character","transform","translate(58.926 100.061)"],["id","Group_177576","data-name","Group 177576","transform","translate(0 0)"],["id","Group_177575","data-name","Group 177575"],["id","Group_177520","data-name","Group 177520","transform","translate(23.654 188.678)"],["id","Group_177507","data-name","Group 177507"],["id","Path_26633","data-name","Path 26633","d","M166.7,445.846v-6.09l-10.913-.073-.09,9.2.677.05c3.01.2,15.319.478,17.336-.147C175.954,448.091,166.7,445.846,166.7,445.846Z","transform","translate(-155.692 -439.683)","fill","#4a6aff"],["id","Group_177509","data-name","Group 177509","transform","translate(0.037 8.348)"],["id","Group_177508","data-name","Group 177508"],["id","Path_26634","data-name","Path 26634","d","M173.977,451.6c0,.1-4.082.186-9.116.186s-9.117-.083-9.117-.186,4.082-.184,9.117-.184S173.977,451.493,173.977,451.6Z","transform","translate(-155.744 -451.411)","fill","#263238"],["id","Group_177511","data-name","Group 177511","transform","translate(11.159 6.288)"],["id","Group_177510","data-name","Group 177510"],["id","Path_26635","data-name","Path 26635","d","M171.4,449.635c-.09-.047-.012-.369.222-.685s.519-.488.59-.416-.076.341-.292.635S171.5,449.684,171.4,449.635Z","transform","translate(-171.368 -448.517)","fill","#263238"],["id","Group_177513","data-name","Group 177513","transform","translate(11.845 6.475)"],["id","Group_177512","data-name","Group 177512"],["id","Path_26636","data-name","Path 26636","d","M172.379,450.112c-.094-.036-.046-.4.169-.776s.5-.609.577-.546-.056.374-.254.728S172.476,450.149,172.379,450.112Z","transform","translate(-172.333 -448.78)","fill","#263238"],["id","Group_177515","data-name","Group 177515","transform","translate(0.176 6.368)"],["id","Group_177514","data-name","Group 177514"],["id","Path_26637","data-name","Path 26637","d","M159.088,450.767c-.043.03-.205-.13-.441-.4a7.2,7.2,0,0,0-.957-.959,2.512,2.512,0,0,0-1.18-.516c-.332-.044-.55.007-.569-.046s.184-.191.577-.216a2.171,2.171,0,0,1,1.4.484,3.976,3.976,0,0,1,.942,1.1C159.045,450.527,159.129,450.738,159.088,450.767Z","transform","translate(-155.939 -448.629)","fill","#263238"],["id","Group_177517","data-name","Group 177517","transform","translate(10.176 6.216)"],["id","Group_177516","data-name","Group 177516"],["id","Path_26638","data-name","Path 26638","d","M171.04,448.461c.053.086-.134.3-.446.411s-.591.075-.606-.025.205-.221.478-.322S170.986,448.372,171.04,448.461Z","transform","translate(-169.988 -448.416)","fill","#263238"],["id","Group_177519","data-name","Group 177519","transform","translate(9.753 5.497)"],["id","Group_177518","data-name","Group 177518"],["id","Path_26639","data-name","Path 26639","d","M170.7,447.581c.009.1-.281.19-.65.194s-.661-.074-.654-.177.3-.189.649-.194S170.687,447.479,170.7,447.581Z","transform","translate(-169.394 -447.405)","fill","#263238"],["id","Group_177534","data-name","Group 177534","transform","translate(50.527 188.678)"],["id","Group_177521","data-name","Group 177521"],["id","Path_26640","data-name","Path 26640","d","M204.447,445.846v-6.09l-10.913-.073-.09,9.107.676.05c3.01.2,15.319.572,17.337-.053C213.706,448.091,204.447,445.846,204.447,445.846Z","transform","translate(-193.444 -439.683)","fill","#4a6aff"],["id","Group_177523","data-name","Group 177523","transform","translate(0.037 8.361)"],["id","Group_177522","data-name","Group 177522"],["id","Path_26641","data-name","Path 26641","d","M211.729,451.615c0,.1-4.082.186-9.116.186s-9.117-.084-9.117-.186,4.081-.186,9.117-.186S211.729,451.512,211.729,451.615Z","transform","translate(-193.496 -451.429)","fill","#263238"],["id","Group_177525","data-name","Group 177525","transform","translate(11.159 6.288)"],["id","Group_177524","data-name","Group 177524"],["id","Path_26642","data-name","Path 26642","d","M209.156,449.635c-.09-.047-.013-.369.222-.685s.519-.488.59-.416-.076.341-.292.635S209.247,449.684,209.156,449.635Z","transform","translate(-209.12 -448.517)","fill","#263238"],["id","Group_177527","data-name","Group 177527","transform","translate(11.845 6.475)"],["id","Group_177526","data-name","Group 177526"],["id","Path_26643","data-name","Path 26643","d","M210.13,450.112c-.095-.036-.046-.4.169-.776s.5-.609.577-.546-.056.374-.254.728S210.227,450.149,210.13,450.112Z","transform","translate(-210.084 -448.78)","fill","#263238"],["id","Group_177529","data-name","Group 177529","transform","translate(0.176 6.368)"],["id","Group_177528","data-name","Group 177528"],["id","Path_26644","data-name","Path 26644","d","M196.839,450.767c-.042.03-.205-.13-.441-.4a7.192,7.192,0,0,0-.957-.959,2.512,2.512,0,0,0-1.181-.516c-.332-.044-.55.007-.568-.046s.184-.191.577-.216a2.171,2.171,0,0,1,1.4.484,3.977,3.977,0,0,1,.942,1.1C196.8,450.527,196.881,450.738,196.839,450.767Z","transform","translate(-193.691 -448.629)","fill","#263238"],["id","Group_177531","data-name","Group 177531","transform","translate(10.176 6.216)"],["id","Group_177530","data-name","Group 177530"],["id","Path_26645","data-name","Path 26645","d","M208.792,448.461c.053.086-.134.3-.446.411s-.591.075-.606-.025.205-.221.478-.322S208.738,448.372,208.792,448.461Z","transform","translate(-207.74 -448.416)","fill","#263238"],["id","Group_177533","data-name","Group 177533","transform","translate(9.753 5.497)"],["id","Group_177532","data-name","Group 177532"],["id","Path_26646","data-name","Path 26646","d","M208.449,447.581c.01.1-.28.19-.649.194s-.661-.074-.655-.177.3-.189.65-.194S208.439,447.479,208.449,447.581Z","transform","translate(-207.145 -447.405)","fill","#263238"],["id","Group_177535","data-name","Group 177535","transform","translate(0 4.514)"],["id","Path_26647","data-name","Path 26647","d","M224.193,190.56c-.285-.293-.984-.155-.984-.155a3.779,3.779,0,0,0-.007-1.234c-.129-.4-1.026-.325-1.026-.325a4.176,4.176,0,0,1,.023-1.012.359.359,0,0,0-.209-.358,3.314,3.314,0,0,0-1.341-.244c-.55-.393,1.674-3.5,2.5-4.5s.678-1.771-.058-1.77c-.5,0-3.1,2.99-3.889,3.993s-2.916,3.794-2.988,1.566-.968-3.911-1.527-4.2-1.163.387-.853,1.005a8.116,8.116,0,0,1,.5,2.191,5.335,5.335,0,0,1-.082,1.8,20.764,20.764,0,0,1-.958,3.215l-.055-.031s-15.537,14.9-16.658,15.961c-1.008.957-21.2-1.132-25.241-1.561a28.018,28.018,0,0,0-4.161-.284c-1.755.077-2.067.326-3.822.349a86.346,86.346,0,0,0-13.193,1.16,10.926,10.926,0,0,0-8.585,7.446c-4.082,12.74-13.318,42.9-14.963,59.845a70.81,70.81,0,0,0-3.333,6.885c-1.144,3.114-.866,3.22-.48,3.292,1.035.191,2.219-5.4,2.662-4.052s-2.244,6.673-1.154,6.828c1.421.2,2.553-5.674,2.686-6.165.128-.476.846-.315.7.121-.206.627-2.209,7.268-.816,7.481.772.118.856-1.289.856-1.289s1.417-6.352,2.071-6.229-.041,3.882-.369,5.132.132,1.892.8,1.581c.454-.212,1.548-4.017,1.843-5.261s1.044-4.669,2.049-2.68,2.526,3.139,3.155,3.164a.7.7,0,0,0,.35-1.271,8.12,8.12,0,0,1-1.376-1.777,5.33,5.33,0,0,1-.685-1.667,18.476,18.476,0,0,1-.5-3.6l-.116-.732c1.594-7.9,6.189-31.063,12.789-45.863l2.718,5.594,1.18,4.14L144.4,254.945l30.9-.407L170.7,236.786l5.6-18.511h0c6.058.135,21.616.361,24.231-.808,3.26-1.456,20.13-22.722,20.13-22.722h0a40.225,40.225,0,0,0,3.153-2.736S224.812,191.2,224.193,190.56Z","transform","translate(-122.462 -180.964)","fill","#ffbe9d"],["id","Group_177549","data-name","Group 177549","transform","translate(10.952 26.738)"],["id","Group_177536","data-name","Group 177536"],["id","Path_26648","data-name","Path 26648","d","M147.489,250.768c.894-3.06,5.5-18.191,5.5-18.191s2.261,12.337,1.666,13.822a26.152,26.152,0,0,1-1.943,3.671c-5.225,7.957-4.539,11.934-4.539,11.934l31.562-.962c.077-4.414-2.536-14.676-3.082-16.312s1.266-7,1.266-7,3.566-3.622,3.428-5.487a30.136,30.136,0,0,0-.621-4.969l19.205.708-.6-13.031-27.607-2.763c-.955,2.718-9.649,1.387-9.649,1.387-9.385.308-9.954,2.034-13.868,5.065s-10.359,29.056-10.359,29.056Z","transform","translate(-137.848 -212.185)","fill","#4a6aff"],["id","Group_177538","data-name","Group 177538","transform","translate(17.05 34.356)"],["id","Group_177537","data-name","Group 177537"],["id","Path_26649","data-name","Path 26649","d","M173.058,261.6a6.78,6.78,0,0,1-1.664.084c-1.028-.006-2.447-.07-4.008-.226s-2.965-.378-3.973-.577a6.744,6.744,0,0,1-1.613-.414,8.253,8.253,0,0,1,1.655.155c1.015.131,2.417.309,3.968.466s2.96.261,3.981.334A8.214,8.214,0,0,1,173.058,261.6Z","transform","translate(-161.8 -260.449)","fill","#263238"],["id","Group_177540","data-name","Group 177540","transform","translate(18.23 32.81)"],["id","Group_177539","data-name","Group 177539"],["id","Path_26650","data-name","Path 26650","d","M175.7,258.288a7.4,7.4,0,0,1-1.723.587,31.293,31.293,0,0,1-8.7,1.034,7.334,7.334,0,0,1-1.812-.168,11.08,11.08,0,0,1,1.812-.094c1.116-.035,2.655-.117,4.345-.317s3.2-.482,4.3-.71A11.02,11.02,0,0,1,175.7,258.288Z","transform","translate(-163.458 -258.277)","fill","#263238"],["id","Group_177542","data-name","Group 177542","transform","translate(38.442 20.846)"],["id","Group_177541","data-name","Group 177541"],["id","Path_26651","data-name","Path 26651","d","M194.5,241.471a6.827,6.827,0,0,1-.216,1.61c-.184.984-.472,2.337-.836,3.82s-.734,2.817-1.027,3.775a6.851,6.851,0,0,1-.553,1.527,7.3,7.3,0,0,1,.3-1.6c.269-1.11.579-2.386.92-3.795l.94-3.789A7.317,7.317,0,0,1,194.5,241.471Z","transform","translate(-191.852 -241.471)","fill","#263238"],["id","Group_177544","data-name","Group 177544","transform","translate(0.346 34.131)"],["id","Group_177543","data-name","Group 177543"],["id","Path_26652","data-name","Path 26652","d","M147.96,262.772a33.687,33.687,0,0,1-4.862-1.133,33.637,33.637,0,0,1-4.764-1.493,33.738,33.738,0,0,1,4.862,1.135A33.787,33.787,0,0,1,147.96,262.772Z","transform","translate(-138.334 -260.134)","fill","#263238"],["id","Group_177546","data-name","Group 177546","transform","translate(34.432 0.742)"],["id","Group_177545","data-name","Group 177545"],["id","Path_26653","data-name","Path 26653","d","M195.014,227.405a2.6,2.6,0,0,1-.817,0,8.3,8.3,0,0,1-2.171-.518,9.105,9.105,0,0,1-2.832-1.725,8.873,8.873,0,0,1-2.316-3.336,9.165,9.165,0,0,1-.638-4.012,6.3,6.3,0,0,1,.974-3.175,3.286,3.286,0,0,1,1.8-1.327,2.218,2.218,0,0,1,.608-.081c.14,0,.212.019.212.03,0,.036-.3.018-.777.189a3.294,3.294,0,0,0-1.627,1.335,8.128,8.128,0,0,0-.21,6.9,8.81,8.81,0,0,0,2.2,3.221,9.3,9.3,0,0,0,2.7,1.734A14.007,14.007,0,0,0,195.014,227.405Z","transform","translate(-186.219 -213.227)","fill","#263238"],["id","Group_177548","data-name","Group 177548","transform","translate(59.647 2.415)"],["id","Group_177547","data-name","Group 177547"],["id","Path_26654","data-name","Path 26654","d","M221.814,228.7a58.289,58.289,0,0,1-.172-6.559,58.013,58.013,0,0,1,.2-6.56,58.2,58.2,0,0,1,.172,6.56A58.088,58.088,0,0,1,221.814,228.7Z","transform","translate(-221.642 -215.577)","fill","#263238"],["id","Group_177556","data-name","Group 177556","transform","translate(15.461)"],["id","Group_177550","data-name","Group 177550","transform","translate(18.582 2.599)"],["id","Path_26655","data-name","Path 26655","d","M180.9,203.206c.078-1.589.244-3.383.244-3.383a4.757,4.757,0,0,0,4.166-4.491c.238-4.057,0-13.415,0-13.415l-7.155-3.643-7.87,6.211,1.192,20.288,7.242.461A2.088,2.088,0,0,0,180.9,203.206Z","transform","translate(-170.287 -178.274)","fill","#ffbe9d"],["id","Group_177552","data-name","Group 177552","transform","translate(28.27 14.139)"],["id","Group_177551","data-name","Group 177551"],["id","Path_26656","data-name","Path 26656","d","M185.531,196.794c.011,0,.012.075-.062.174a.557.557,0,0,1-.452.2c-.456-.021-.895-.525-1.056-1.141a1.952,1.952,0,0,1-.02-.9.773.773,0,0,1,.428-.611.387.387,0,0,1,.3.007.344.344,0,0,1,.161.164c.053.121.012.194,0,.188s-.012-.067-.071-.143a.262.262,0,0,0-.338-.071.638.638,0,0,0-.293.508,1.9,1.9,0,0,0,.033.8c.142.551.525,1,.865,1.043a.514.514,0,0,0,.383-.1C185.489,196.845,185.516,196.787,185.531,196.794Z","transform","translate(-183.897 -194.486)","fill","#eb996e"],["id","Group_177553","data-name","Group 177553"],["id","Path_26657","data-name","Path 26657","d","M180.228,178.675c-.547-1.869-2.532-2.8-4.341-3.309a13.7,13.7,0,0,0-8.424-.135c-2.69.99-5.924,2.732-5.923,5.7-1.587-.13-2.494,1.261-3.124,2.984a11.39,11.39,0,0,0-.676,3.274l-.026-.009c-.2,3.889-1.288,9.247-3.809,12.122-1.392,1.588-3.4,2.686-4.208,4.663-.705,1.719-.34,3.751-1.007,5.486-.589,1.532-1.892,2.62-2.827,3.952a10.573,10.573,0,0,0-.678,10.243,13,13,0,0,0,7.748,6.7,18.152,18.152,0,0,0,10.22.1A17.083,17.083,0,0,0,170,227.05a11.473,11.473,0,0,0,3.931-6.636c.5-2.908-.312-5.861-.911-8.748-1.893-9.137-1.353-9.612,1.037-18.087.054-.149.087-.3.129-.458.031-.112.061-.22.094-.335l0,0a5.224,5.224,0,0,0,.112-1.014,1.945,1.945,0,0,1-2.058-.445,2.152,2.152,0,0,1-.487-2.131,3.083,3.083,0,0,1,1.836-1.73c.789-.332,1.639-.5,2.414-.866a8.058,8.058,0,0,0,3.558-4.106A5.617,5.617,0,0,0,180.228,178.675Z","transform","translate(-144.183 -174.623)","fill","#263238"],["id","Group_177555","data-name","Group 177555","transform","translate(28.959 16.62)"],["id","Group_177554","data-name","Group 177554"],["id","Path_26658","data-name","Path 26658","d","M186.091,197.972a3.235,3.235,0,0,1,.374.7c.211.449.5,1.083.81,1.812l.059.138-.15.013-.725.063c-.5.032-.911.092-1.392.086a.252.252,0,0,1-.184-.162.419.419,0,0,1-.011-.2c.021-.112.046-.194.068-.288l.125-.5a4.8,4.8,0,0,1,.3-.986,4.72,4.72,0,0,1-.146,1.019l-.1.51c-.037.172-.1.429-.006.409.354-.016.859-.075,1.328-.109l.725-.058-.091.151c-.3-.732-.563-1.378-.739-1.842A3.228,3.228,0,0,1,186.091,197.972Z","transform","translate(-184.866 -197.972)","fill","#4a6aff"],["id","Group_177574","data-name","Group 177574","transform","translate(19.749 75.594)"],["id","Group_177557","data-name","Group 177557"],["id","Path_26659","data-name","Path 26659","d","M151.736,281.781l31.562-.962,13.728,53.628L194.5,395.963H177.792l2.071-60.206-12.209-37.333,1.881,99.924-16.865.249-1.777-93.924c-.074-2.61-.933-8.5-.613-11.09Z","transform","translate(-150.207 -280.819)","fill","#263238"],["id","Group_177559","data-name","Group 177559","transform","translate(11.319 16.273)"],["id","Group_177558","data-name","Group 177558"],["id","Path_26660","data-name","Path 26660","d","M176.439,305.771a6.067,6.067,0,0,1-1.548-.092c-.95-.112-2.256-.312-3.687-.6s-2.713-.609-3.632-.873a6.052,6.052,0,0,1-1.464-.513c.028-.1,2.32.452,5.169,1.023S176.452,305.665,176.439,305.771Z","transform","translate(-166.109 -303.68)","fill","#455a64"],["id","Group_177561","data-name","Group 177561","transform","translate(27.245 111.585)"],["id","Group_177560","data-name","Group 177560"],["id","Path_26661","data-name","Path 26661","d","M205.376,437.762c0,.1-3.783.186-8.447.186s-8.448-.083-8.448-.186,3.781-.184,8.448-.184S205.376,437.661,205.376,437.762Z","transform","translate(-188.481 -437.578)","fill","#455a64"],["id","Group_177563","data-name","Group 177563","transform","translate(2.787 114.748)"],["id","Group_177562","data-name","Group 177562"],["id","Path_26662","data-name","Path 26662","d","M170.511,442.206c0,.1-3.669.186-8.195.186s-8.195-.083-8.195-.186,3.668-.185,8.195-.185S170.511,442.1,170.511,442.206Z","transform","translate(-154.122 -442.021)","fill","#455a64"],["id","Group_177565","data-name","Group 177565","transform","translate(15.371 17.142)"],["id","Group_177564","data-name","Group 177564"],["id","Path_26663","data-name","Path 26663","d","M173.433,402.435c-.1,0-.546-21.833-.991-48.762s-.723-48.772-.62-48.774.546,21.828.991,48.767S173.536,402.434,173.433,402.435Z","transform","translate(-171.801 -304.9)","fill","#455a64"],["id","Group_177567","data-name","Group 177567","transform","translate(30.531 0.962)"],["id","Group_177566","data-name","Group 177566"],["id","Path_26664","data-name","Path 26664","d","M204.462,392.978a1.73,1.73,0,0,1-.008-.29l.016-.853c.022-.769.054-1.87.1-3.278.1-2.865.242-6.977.418-12.051.39-10.192.928-24.239,1.52-39.756.006-.143.011-.286.017-.419l0,.053c-3.741-14.978-7.122-28.517-9.573-38.334L194.1,286.439c-.326-1.357-.58-2.419-.758-3.161-.08-.348-.142-.621-.188-.824a1.634,1.634,0,0,1-.052-.284,1.8,1.8,0,0,1,.088.275l.224.815c.194.738.471,1.793.826,3.143.705,2.753,1.719,6.7,2.97,11.583,2.479,9.809,5.9,23.339,9.679,38.308l.007.026v.027c-.005.131-.011.275-.016.419-.636,15.514-1.212,29.559-1.629,39.751l-.536,12.046c-.07,1.407-.126,2.506-.164,3.275-.022.36-.039.642-.053.851A1.661,1.661,0,0,1,204.462,392.978Z","transform","translate(-193.097 -282.171)","fill","#455a64"],["id","Group_177569","data-name","Group 177569","transform","translate(28.865 53.845)"],["id","Group_177568","data-name","Group 177568"],["id","Path_26665","data-name","Path 26665","d","M198.343,356.489a19.4,19.4,0,0,1-3.691.822c-1.535.264-2.86.445-3.44.478v-.145c.192.053.3.093.291.12s-.115.033-.314.025l-.431-.019.431-.125c.557-.163,1.866-.435,3.4-.7A19.392,19.392,0,0,1,198.343,356.489Z","transform","translate(-190.758 -356.463)","fill","#455a64"],["id","Group_177571","data-name","Group 177571","transform","translate(29.502 55.306)"],["id","Group_177570","data-name","Group 177570"],["id","Path_26666","data-name","Path 26666","d","M198.281,359.126a19.084,19.084,0,0,1-3.323-.151,19.162,19.162,0,0,1-3.306-.365,21.081,21.081,0,0,1,6.629.516Z","transform","translate(-191.652 -358.515)","fill","#455a64"],["id","Group_177572","data-name","Group 177572","transform","translate(1.389)"],["id","Path_26667","data-name","Path 26667","d","M152.158,282.915a4.336,4.336,0,0,0,3.116,1.658,14.108,14.108,0,0,0,3.827-.072c8.147-.9,16.78-1.738,24.759-3.682-10.328.579-21.235.384-31.562.962,0,0-.088.71-.109.882","transform","translate(-152.158 -280.819)","opacity","0.2"],["id","Group_177573","data-name","Group 177573","transform","translate(12.035 16.653)","opacity","0.2"],["id","Path_26668","data-name","Path 26668","d","M167.114,304.214l5.819,22.588-.407-21.636Z","transform","translate(-167.114 -304.214)"],[1,"auth-form"],[1,"tp-head","d-flex","space-b","pos-rel","text-center","mb-20"],["routerLink","/ticket",1,"theme-color","pos-ab"],[1,"d-flex","auth-title"],[1,"auth-title__h3"],[1,"d-block"],[1,"auth-form-bx"],[1,"input-bxx"],["appearance","fill",1,"example-full-width"],["matInput","","placeholder","Reason for contact"],[1,"input-bxx",2,"height","130px"],["matInput","","placeholder","Type your message here..."],[1,"btn-outer","mt-40"],["routerLink","/auth/chat",1,"btn","btn-primary"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.bc(),o.Rb(2,"svg",2),o.Rb(3,"g",3),o.Rb(4,"g",4),o.Rb(5,"g",5),o.Rb(6,"g",6),o.Rb(7,"g",7),o.Rb(8,"g",8),o.Mb(9,"path",9),o.Qb(),o.Rb(10,"g",10),o.Mb(11,"rect",11),o.Qb(),o.Rb(12,"g",12),o.Mb(13,"rect",13),o.Qb(),o.Rb(14,"g",14),o.Mb(15,"rect",15),o.Qb(),o.Rb(16,"g",16),o.Mb(17,"rect",17),o.Qb(),o.Rb(18,"g",18),o.Mb(19,"rect",19),o.Qb(),o.Qb(),o.Rb(20,"g",20),o.Rb(21,"g",21),o.Rb(22,"g",22),o.Mb(23,"path",23),o.Qb(),o.Qb(),o.Rb(24,"g",24),o.Rb(25,"g",25),o.Mb(26,"path",26),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(27,"g",27),o.Rb(28,"g",28),o.Rb(29,"g",29),o.Mb(30,"rect",30),o.Qb(),o.Rb(31,"g",31),o.Mb(32,"rect",32),o.Qb(),o.Rb(33,"g",33),o.Mb(34,"rect",34),o.Qb(),o.Rb(35,"g",35),o.Mb(36,"rect",36),o.Qb(),o.Rb(37,"g",37),o.Mb(38,"rect",38),o.Qb(),o.Rb(39,"g",39),o.Mb(40,"rect",40),o.Qb(),o.Qb(),o.Rb(41,"g",41),o.Rb(42,"g",42),o.Rb(43,"g",43),o.Mb(44,"path",44),o.Qb(),o.Qb(),o.Rb(45,"g",45),o.Rb(46,"g",46),o.Mb(47,"path",47),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(48,"g",48),o.Rb(49,"g",49),o.Mb(50,"path",50),o.Qb(),o.Rb(51,"g",51),o.Mb(52,"rect",52),o.Qb(),o.Rb(53,"g",53),o.Mb(54,"rect",54),o.Qb(),o.Rb(55,"g",55),o.Mb(56,"rect",56),o.Qb(),o.Rb(57,"g",57),o.Mb(58,"rect",58),o.Qb(),o.Rb(59,"g",59),o.Mb(60,"rect",60),o.Qb(),o.Qb(),o.Rb(61,"g",61),o.Mb(62,"rect",62),o.Qb(),o.Rb(63,"g",63),o.Rb(64,"g",64),o.Mb(65,"rect",65),o.Qb(),o.Rb(66,"g",66),o.Mb(67,"rect",67),o.Qb(),o.Rb(68,"g",68),o.Mb(69,"path",69),o.Qb(),o.Rb(70,"g",70),o.Mb(71,"path",71),o.Qb(),o.Rb(72,"g",72),o.Mb(73,"path",73),o.Qb(),o.Qb(),o.Rb(74,"g",74),o.Rb(75,"g",75),o.Mb(76,"rect",76),o.Qb(),o.Rb(77,"g",77),o.Mb(78,"rect",78),o.Qb(),o.Rb(79,"g",79),o.Mb(80,"path",80),o.Qb(),o.Rb(81,"g",81),o.Mb(82,"path",82),o.Qb(),o.Rb(83,"g",83),o.Mb(84,"path",84),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(85,"g",85),o.Rb(86,"g",86),o.Mb(87,"path",87),o.Qb(),o.Qb(),o.Rb(88,"g",88),o.Rb(89,"g",89),o.Rb(90,"g",90),o.Rb(91,"g",91),o.Mb(92,"path",92),o.Qb(),o.Qb(),o.Rb(93,"g",93),o.Rb(94,"g",94),o.Rb(95,"g",95),o.Mb(96,"path",96),o.Qb(),o.Qb(),o.Qb(),o.Rb(97,"g",97),o.Rb(98,"g",98),o.Rb(99,"g",99),o.Mb(100,"path",100),o.Qb(),o.Qb(),o.Qb(),o.Rb(101,"g",101),o.Rb(102,"g",102),o.Rb(103,"g",103),o.Mb(104,"path",104),o.Qb(),o.Qb(),o.Qb(),o.Rb(105,"g",105),o.Rb(106,"g",106),o.Rb(107,"g",107),o.Mb(108,"path",108),o.Qb(),o.Qb(),o.Qb(),o.Rb(109,"g",109),o.Rb(110,"g",110),o.Rb(111,"g",111),o.Mb(112,"path",112),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(113,"g",113),o.Rb(114,"g",114),o.Rb(115,"g",115),o.Rb(116,"g",116),o.Mb(117,"path",117),o.Qb(),o.Qb(),o.Rb(118,"g",118),o.Mb(119,"path",119),o.Qb(),o.Rb(120,"g",120),o.Rb(121,"g",121),o.Mb(122,"path",122),o.Qb(),o.Qb(),o.Rb(123,"g",123),o.Rb(124,"g",124),o.Mb(125,"path",125),o.Qb(),o.Qb(),o.Rb(126,"g",126),o.Rb(127,"g",127),o.Mb(128,"path",128),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(129,"g",129),o.Rb(130,"g",130),o.Rb(131,"g",131),o.Rb(132,"g",132),o.Mb(133,"path",133),o.Qb(),o.Rb(134,"g",134),o.Mb(135,"path",135),o.Qb(),o.Rb(136,"g",136),o.Rb(137,"g",137),o.Rb(138,"g",138),o.Rb(139,"g",139),o.Mb(140,"path",140),o.Qb(),o.Rb(141,"text",141),o.Rb(142,"tspan",142),o.Fc(143,"LOG IN"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(144,"g",143),o.Rb(145,"g",144),o.Mb(146,"rect",145),o.Mb(147,"rect",146),o.Qb(),o.Rb(148,"g",147),o.Rb(149,"g",148),o.Mb(150,"path",149),o.Qb(),o.Qb(),o.Rb(151,"g",150),o.Mb(152,"rect",151),o.Mb(153,"rect",152),o.Qb(),o.Rb(154,"g",153),o.Mb(155,"rect",154),o.Mb(156,"rect",155),o.Qb(),o.Rb(157,"g",156),o.Rb(158,"g",157),o.Mb(159,"path",158),o.Qb(),o.Qb(),o.Rb(160,"g",159),o.Rb(161,"g",160),o.Mb(162,"path",161),o.Mb(163,"path",162),o.Qb(),o.Rb(164,"g",163),o.Mb(165,"rect",164),o.Mb(166,"rect",165),o.Qb(),o.Qb(),o.Rb(167,"g",166),o.Rb(168,"g",167),o.Rb(169,"g",168),o.Mb(170,"path",169),o.Qb(),o.Rb(171,"g",170),o.Mb(172,"path",171),o.Qb(),o.Rb(173,"g",172),o.Mb(174,"path",173),o.Qb(),o.Rb(175,"g",174),o.Mb(176,"path",175),o.Qb(),o.Rb(177,"g",176),o.Mb(178,"path",177),o.Qb(),o.Rb(179,"g",178),o.Mb(180,"path",179),o.Qb(),o.Rb(181,"g",180),o.Mb(182,"path",181),o.Qb(),o.Rb(183,"g",182),o.Mb(184,"path",183),o.Qb(),o.Rb(185,"g",184),o.Mb(186,"path",185),o.Qb(),o.Qb(),o.Rb(187,"g",186),o.Rb(188,"g",187),o.Mb(189,"path",188),o.Qb(),o.Rb(190,"g",189),o.Mb(191,"path",190),o.Qb(),o.Rb(192,"g",191),o.Mb(193,"path",192),o.Qb(),o.Rb(194,"g",193),o.Mb(195,"path",194),o.Qb(),o.Rb(196,"g",195),o.Mb(197,"path",196),o.Qb(),o.Rb(198,"g",197),o.Mb(199,"path",198),o.Qb(),o.Rb(200,"g",199),o.Mb(201,"path",200),o.Qb(),o.Rb(202,"g",201),o.Mb(203,"path",202),o.Qb(),o.Rb(204,"g",203),o.Mb(205,"path",204),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(206,"g",205),o.Rb(207,"g",206),o.Rb(208,"g",207),o.Rb(209,"g",208),o.Mb(210,"path",209),o.Qb(),o.Qb(),o.Rb(211,"g",210),o.Rb(212,"g",211),o.Mb(213,"path",212),o.Qb(),o.Rb(214,"g",213),o.Mb(215,"path",214),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Rb(216,"g",215),o.Rb(217,"g",216),o.Rb(218,"g",217),o.Rb(219,"g",218),o.Rb(220,"g",219),o.Mb(221,"path",220),o.Qb(),o.Rb(222,"g",221),o.Rb(223,"g",222),o.Mb(224,"path",223),o.Qb(),o.Qb(),o.Rb(225,"g",224),o.Rb(226,"g",225),o.Mb(227,"path",226),o.Qb(),o.Qb(),o.Rb(228,"g",227),o.Rb(229,"g",228),o.Mb(230,"path",229),o.Qb(),o.Qb(),o.Rb(231,"g",230),o.Rb(232,"g",231),o.Mb(233,"path",232),o.Qb(),o.Qb(),o.Rb(234,"g",233),o.Rb(235,"g",234),o.Mb(236,"path",235),o.Qb(),o.Qb(),o.Rb(237,"g",236),o.Rb(238,"g",237),o.Mb(239,"path",238),o.Qb(),o.Qb(),o.Qb(),o.Rb(240,"g",239),o.Rb(241,"g",240),o.Mb(242,"path",241),o.Qb(),o.Rb(243,"g",242),o.Rb(244,"g",243),o.Mb(245,"path",244),o.Qb(),o.Qb(),o.Rb(246,"g",245),o.Rb(247,"g",246),o.Mb(248,"path",247),o.Qb(),o.Qb(),o.Rb(249,"g",248),o.Rb(250,"g",249),o.Mb(251,"path",250),o.Qb(),o.Qb(),o.Rb(252,"g",251),o.Rb(253,"g",252),o.Mb(254,"path",253),o.Qb(),o.Qb(),o.Rb(255,"g",254),o.Rb(256,"g",255),o.Mb(257,"path",256),o.Qb(),o.Qb(),o.Rb(258,"g",257),o.Rb(259,"g",258),o.Mb(260,"path",259),o.Qb(),o.Qb(),o.Qb(),o.Rb(261,"g",260),o.Mb(262,"path",261),o.Qb(),o.Rb(263,"g",262),o.Rb(264,"g",263),o.Mb(265,"path",264),o.Qb(),o.Rb(266,"g",265),o.Rb(267,"g",266),o.Mb(268,"path",267),o.Qb(),o.Qb(),o.Rb(269,"g",268),o.Rb(270,"g",269),o.Mb(271,"path",270),o.Qb(),o.Qb(),o.Rb(272,"g",271),o.Rb(273,"g",272),o.Mb(274,"path",273),o.Qb(),o.Qb(),o.Rb(275,"g",274),o.Rb(276,"g",275),o.Mb(277,"path",276),o.Qb(),o.Qb(),o.Rb(278,"g",277),o.Rb(279,"g",278),o.Mb(280,"path",279),o.Qb(),o.Qb(),o.Rb(281,"g",280),o.Rb(282,"g",281),o.Mb(283,"path",282),o.Qb(),o.Qb(),o.Qb(),o.Rb(284,"g",283),o.Rb(285,"g",284),o.Mb(286,"path",285),o.Qb(),o.Rb(287,"g",286),o.Rb(288,"g",287),o.Mb(289,"path",288),o.Qb(),o.Qb(),o.Rb(290,"g",289),o.Mb(291,"path",290),o.Qb(),o.Rb(292,"g",291),o.Rb(293,"g",292),o.Mb(294,"path",293),o.Qb(),o.Qb(),o.Qb(),o.Rb(295,"g",294),o.Rb(296,"g",295),o.Mb(297,"path",296),o.Qb(),o.Rb(298,"g",297),o.Rb(299,"g",298),o.Mb(300,"path",299),o.Qb(),o.Qb(),o.Rb(301,"g",300),o.Rb(302,"g",301),o.Mb(303,"path",302),o.Qb(),o.Qb(),o.Rb(304,"g",303),o.Rb(305,"g",304),o.Mb(306,"path",305),o.Qb(),o.Qb(),o.Rb(307,"g",306),o.Rb(308,"g",307),o.Mb(309,"path",308),o.Qb(),o.Qb(),o.Rb(310,"g",309),o.Rb(311,"g",310),o.Mb(312,"path",311),o.Qb(),o.Qb(),o.Rb(313,"g",312),o.Rb(314,"g",313),o.Mb(315,"path",314),o.Qb(),o.Qb(),o.Rb(316,"g",315),o.Rb(317,"g",316),o.Mb(318,"path",317),o.Qb(),o.Qb(),o.Rb(319,"g",318),o.Mb(320,"path",319),o.Qb(),o.Rb(321,"g",320),o.Mb(322,"path",321),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.ac(),o.Rb(323,"div",322),o.Rb(324,"h3",323),o.Fc(325," Support "),o.Rb(326,"span",324),o.Fc(327,"View Tickets"),o.Qb(),o.Qb(),o.Rb(328,"div",325),o.Rb(329,"h3",326),o.Fc(330,"Start a conversation "),o.Rb(331,"span",327),o.Fc(332," You will receive response within 20 Minutes "),o.Qb(),o.Qb(),o.Qb(),o.Rb(333,"div",328),o.Rb(334,"div",329),o.Rb(335,"mat-form-field",330),o.Mb(336,"input",331),o.Qb(),o.Qb(),o.Rb(337,"div",332),o.Rb(338,"mat-form-field",330),o.Mb(339,"input",333),o.Qb(),o.Qb(),o.Rb(340,"div",334),o.Rb(341,"button",335),o.Fc(342,"Send"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb())},directives:[i.c,T.c,E.a],styles:[""]}),t})();var Pt=n("zIRd");(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=n.setTimeout;r.prototype.c=function(t){a(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new r;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(ii){o(ii)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),a=r.next();!a.done;a=r.next())o(a.value).Ra(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,o(r.value).Ra(i(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},a=this||self,s=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&s.test(t)?t:""}function l(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==h(t)}function p(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++v)}var m="closure_uid_"+(1e9*Math.random()>>>0),v=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:b).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var I=Date.now;function T(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t){return t}function C(t,e,n){this.code=S+t,this.message=e||R[t]||"",this.a=n||null}function k(t){var e=t&&t.code;return e?new C(e.substring(S.length),t.message,t.serverResponse):null}T(C,Error),C.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},C.prototype.toJSON=function(){return this.w()};var O,S="auth/",R={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},A={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in A)if(A[e].id===t)return{firebaseEndpoint:(t=A[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function N(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function x(t){if(Error.captureStackTrace)Error.captureStackTrace(this,x);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function D(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");x.call(this,n+t[r])}function j(t,e){throw new D("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function M(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function F(){this.b=this.a=null}O=P("__EID__")?"__EID__":void 0,T(x,Error),x.prototype.name="CustomError",T(D,x),D.prototype.name="AssertionError",M.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var U=new M((function(){return new G}),(function(t){t.reset()}));function q(){var t=ye,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function G(){this.next=this.b=this.a=null}F.prototype.add=function(t,e){var n=U.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},G.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},G.prototype.reset=function(){this.next=this.b=this.a=null};var Q=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},V=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},B=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},z=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function W(t,e){return 0<=Q(t,e)}function H(t,e){var n;return(n=0<=(e=Q(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1)}))}function X(t){return Array.prototype.concat.apply([],arguments)}function $(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var J,Z=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},tt=/&/g,et=/</g,nt=/>/g,rt=/"/g,it=/'/g,ot=/\x00/g,at=/[\x00&<>"']/;function st(t,e){return-1!=t.indexOf(e)}function ut(t,e){return t<e?-1:t>e?1:0}t:{var ct=a.navigator;if(ct){var lt=ct.userAgent;if(lt){J=lt;break t}}J=""}function ht(t){return st(J,t)}function ft(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function dt(t){for(var e in t)return!1;return!0}function pt(t){var e,n={};for(e in t)n[e]=t[e];return n}var gt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<gt.length;o++)n=gt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(s){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(p(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(s){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;j("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function yt(t,e){this.a=t===It&&e||"",this.b=wt}function bt(t){return t instanceof yt&&t.constructor===yt&&t.b===wt?t.a:(j("expected object of type Const, got '"+t+"'"),"type_error:Const")}yt.prototype.ta=!0,yt.prototype.sa=function(){return this.a},yt.prototype.toString=function(){return"Const{"+this.a+"}"};var _t,wt={},It={};function Tt(){if(void 0===_t){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:E,createScript:E,createScriptURL:E})}catch(n){a.console&&a.console.error(n.message)}_t=t}else _t=t}return _t}function Et(t,e){this.a=e===Rt?t:""}function Ct(t){return t instanceof Et&&t.constructor===Et?t.a:(j("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function kt(t,e){var n=bt(t);if(!St.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Tt();return new Et(t=e?e.createScriptURL(t):t,Rt)}(t=n.replace(Ot,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof yt?bt(t):encodeURIComponent(String(t))})))}Et.prototype.ta=!0,Et.prototype.sa=function(){return this.a.toString()},Et.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ot=/%{(\w+)}/g,St=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Rt={};function At(t,e){this.a=e===Ft?t:""}function Nt(t){return t instanceof At&&t.constructor===At?t.a:(j("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}At.prototype.ta=!0,At.prototype.sa=function(){return this.a.toString()},At.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Dt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,jt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Mt(t){if(t instanceof At)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),jt.test(t))t=new At(t,Ft);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Dt);t=e&&xt.test(e[1])?new At(t,Ft):null}return t}function Lt(t){return t instanceof At?t:(t="object"==typeof t&&t.ta?t.sa():String(t),jt.test(t)||(t="about:invalid#zClosurez"),new At(t,Ft))}var Ft={},Ut=new At("about:invalid#zClosurez",Ft);function qt(t,e,n){this.a=n===Gt?t:""}qt.prototype.ta=!0,qt.prototype.sa=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Gt={};function Qt(t,e,n,r){return t=t instanceof At?t:Lt(t),e=e||a,n=n instanceof yt?bt(n):n||"",e.open(Nt(t),n,r,void 0)}function Vt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Bt(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(tt,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(et,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(nt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(rt,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(it,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(ot,"&#0;"))),t}function Kt(t){return Kt[" "](t),t}Kt[" "]=l;var zt,Wt,Ht=ht("Opera"),Yt=ht("Trident")||ht("MSIE"),Xt=ht("Edge"),$t=Xt||Yt,Jt=ht("Gecko")&&!(st(J.toLowerCase(),"webkit")&&!ht("Edge"))&&!(ht("Trident")||ht("MSIE"))&&!ht("Edge"),Zt=st(J.toLowerCase(),"webkit")&&!ht("Edge");function te(){var t=a.document;return t?t.documentMode:void 0}t:{var ee="",ne=(Wt=J,Jt?/rv:([^\);]+)(\)|;)/.exec(Wt):Xt?/Edge\/([\d\.]+)/.exec(Wt):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Wt):Zt?/WebKit\/(\S+)/.exec(Wt):Ht?/(?:Version)[ \/]?(\S+)/.exec(Wt):void 0);if(ne&&(ee=ne?ne[1]:""),Yt){var re=te();if(null!=re&&re>parseFloat(ee)){zt=String(re);break t}}zt=ee}var ie={};function oe(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=Z(String(zt)).split("."),r=Z(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ut(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ut(0==a[2].length,0==s[2].length)||ut(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}var ae=a.document&&Yt&&(te()||parseInt(zt,10))||void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Wt){}var se=!Yt||9<=Number(ae);function ue(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ce(t,e){ft(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:fe.hasOwnProperty(n)?t.setAttribute(fe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var le,he,fe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function de(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||p(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(p(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){a="function"==typeof o.item;break t}}a=!1}V(a?$(o):o,r)}}}function pe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){a.setTimeout((function(){throw t}),0)}function me(t,e){he||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);he=function(){t.then(be)}}else he=function(){var t=be;!d(a.setImmediate)||a.Window&&a.Window.prototype&&!ht("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ht("Presto")&&(t=function(){var t=pe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ht("Trident")&&!ht("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),ve||(he(),ve=!0),ye.add(t,e)}var ve=!1,ye=new F;function be(){for(var t;t=q();){try{t.a.call(t.b)}catch(e){ge(e)}L(U,t)}ve=!1}function _e(t,e){if(this.a=we,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){xe(n,Ie,t)}),(function(t){if(!(t instanceof qe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(Jp){}xe(n,Te,t)}))}catch(r){xe(this,Te,r)}}var we=0,Ie=2,Te=3;function Ee(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ee.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ce=new M((function(){return new Ee}),(function(t){t.reset()}));function ke(t,e,n){var r=Ce.get();return r.g=t,r.b=e,r.f=n,r}function Oe(t){if(t instanceof _e)return t;var e=new _e(l);return xe(e,Ie,t),e}function Se(t){return new _e((function(e,n){n(t)}))}function Re(t,e,n){De(t,e,n,null)||me(w(e,t))}function Ae(t){return new _e((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Re(t[o],w(i,o,!0),w(i,o,!1));else e(r)}))}function Pe(t,e){t.b||t.a!=Ie&&t.a!=Te||je(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ne(t,e,n,r){var i=ke(null,null,null);return i.a=new _e((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(a){o(a)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof qe?o(e):t(i)}catch(a){o(a)}}:o})),i.a.c=t,Pe(t,i),i.a}function xe(t,e,n){t.a==we&&(t===n&&(e=Te,n=new TypeError("Promise cannot resolve to itself")),t.a=1,De(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,je(t),e!=Te||n instanceof qe||function(t,e){t.g=!0,me((function(){t.g&&Ue.call(null,e)}))}(t,n)))}function De(t,e,n,r){if(t instanceof _e)return Pe(t,ke(e||l,n||null,r)),!0;if(N(t))return t.then(e,n,r),!0;if(p(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}var a=!1;try{e.call(t,(function(t){a||(a=!0,n.call(i,t))}),o)}catch(s){o(s)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function je(t){t.h||(t.h=!0,me(t.gc,t))}function Me(t){var e=null;return t.b&&(t.b=(e=t.b).next,e.next=null),t.b||(t.f=null),e}function Le(t,e,n,r){if(n==Te&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Fe(e,n,r);else try{e.c?e.g.call(e.f):Fe(e,n,r)}catch(Jp){Ue.call(null,Jp)}L(Ce,e)}function Fe(t,e,n){e==Ie?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}_e.prototype.then=function(t,e,n){return Ne(this,d(t)?t:null,d(e)?e:null,n)},_e.prototype.$goog_Thenable=!0,(t=_e.prototype).oa=function(t,e){return(t=ke(t,t,e)).c=!0,Pe(this,t),this},t.o=function(t,e){return Ne(this,null,t,e)},t.cancel=function(t){if(this.a==we){var e=new qe(t);me((function(){!function t(e,n){if(e.a==we)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==e&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==we&&1==i?t(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):Me(r),Le(r,o,Te,n)))}e.c=null}else xe(e,Te,n)}(this,e)}),this)}},t.$c=function(t){this.a=we,xe(this,Ie,t)},t.ad=function(t){this.a=we,xe(this,Te,t)},t.gc=function(){for(var t;t=Me(this);)Le(this,t,this.a,this.i);this.h=!1};var Ue=ge;function qe(t){x.call(this,t)}function Ge(){0!=Qe&&(Ve[g(this)]=this),this.ya=this.ya,this.pa=this.pa}T(qe,x),qe.prototype.name="cancel";var Qe=0,Ve={};function Be(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=Qe)){var e=g(t);if(0!=Qe&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ve[e]}}Ge.prototype.ya=!1,Ge.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Ke=Object.freeze||function(t){return t},ze=!Yt||9<=Number(ae),We=Yt&&!oe("9"),He=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",l,e),a.removeEventListener("test",l,e)}catch(n){}return t}();function Ye(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Xe(t,e){if(Ye.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Jt){t:{try{Kt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:$e[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Ye.prototype.preventDefault=function(){this.defaultPrevented=!0},T(Xe,Ye);var $e=Ke({2:"touch",3:"pen",4:"mouse"});Xe.prototype.preventDefault=function(){Xe.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,We)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Xe.prototype.g=function(){return this.a};var Je="closure_listenable_"+(1e6*Math.random()|0),Ze=0;function tn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++Ze,this.wa=this.Qa=!1}function en(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function nn(t){this.src=t,this.a={},this.b=0}function rn(t,e){var n=e.type;n in t.a&&H(t.a[n],e)&&(en(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function on(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}nn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=on(t,e,r,i);return-1<a?(e=t[a],n||(e.Qa=!1)):((e=new tn(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var an="closure_lm_"+(1e6*Math.random()|0),sn={};function un(t,e,n,r,i){if(r&&r.once)ln(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?wn(t,e,n,p(r)?!!r.capture:!!r,i):cn(t,e,n,!1,r,i)}function cn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=p(i)?!!i.capture:!!i,s=vn(t);if(s||(t[an]=s=new nn(t)),!(n=s.add(e,n,r,a,o)).proxy)if(r=function(){var t=mn,e=ze?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)He||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(dn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function ln(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)ln(t,e[o],n,r,i);else n=bn(n),t&&t[Je]?In(t,e,n,p(r)?!!r.capture:!!r,i):cn(t,e,n,!0,r,i)}function hn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else r=p(r)?!!r.capture:!!r,n=bn(n),t&&t[Je]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=on(o=t.a[e],n,r,i))&&(en(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=vn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=on(e,n,r,i)),(n=-1<t?e[t]:null)&&fn(n))}function fn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[Je])rn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(dn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vn(e))?(rn(n,t),0==n.b&&(n.src=null,e[an]=null)):en(t)}}}function dn(t){return t in sn?sn[t]:sn[t]="on"+t}function pn(t,e,n,r){var i=!0;if((t=vn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=gn(o,r),i=i&&!1!==o)}return i}function gn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&fn(t),n.call(r,e)}function mn(t,e){if(t.wa)return!0;if(!ze){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Xe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(s){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=pn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=pn(r[i],t,!1,e),n=n&&o}return n}return gn(t,new Xe(e,this))}function vn(t){return(t=t[an])instanceof nn?t:null}var yn="__closure_events_fn_"+(1e9*Math.random()>>>0);function bn(t){return d(t)?t:(t[yn]||(t[yn]=function(e){return t.handleEvent(e)}),t[yn])}function _n(){Ge.call(this),this.v=new nn(this),this.bc=this,this.hb=null}function wn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function In(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Tn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&rn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function En(t,e,n){if(d(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function Cn(t){var e=null;return new _e((function(n,r){-1==(e=En((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function kn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function On(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Sn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Sn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Rn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];An(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)An(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function An(t,e){return Object.prototype.hasOwnProperty.call(t,e)}T(_n,Ge),_n.prototype[Je]=!0,_n.prototype.addEventListener=function(t,e,n,r){un(this,t,e,n,r)},_n.prototype.removeEventListener=function(t,e,n,r){hn(this,t,e,n,r)},_n.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Ye(t,n);else if(t instanceof Ye)t.target=t.target||n;else{var i=t;mt(t=new Ye(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Tn(a,r,!0,t)&&i}if(i=Tn(a=t.b=n,r,!0,t)&&i,i=Tn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Tn(a=t.b=e[o],r,!1,t)&&i;return i},_n.prototype.Da=function(){if(_n.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)en(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=Sn.prototype).X=function(){Rn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return Rn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return An(this.b,t)?this.b[t]:e},t.set=function(t,e){An(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Pn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Nn?(this.i=void 0!==e?e:t.i,xn(this,t.c),this.l=t.l,this.a=t.a,Dn(this,t.g),this.f=t.f,jn(this,tr(t.b)),this.h=t.h):t&&(n=String(t).match(Pn))?(this.i=!!e,xn(this,n[1]||"",!0),this.l=qn(n[2]||""),this.a=qn(n[3]||"",!0),Dn(this,n[4]),this.f=qn(n[5]||"",!0),jn(this,n[6]||"",!0),this.h=qn(n[7]||"")):(this.i=!!e,this.b=new Hn(null,this.i))}function xn(t,e,n){t.c=n?qn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Dn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function jn(t,e,n){e instanceof Hn?(t.b=e,function(t,e){e&&!t.f&&(Yn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&($n(this,e),Zn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Gn(e,zn)),t.b=new Hn(e,t.i))}function Mn(t,e,n){t.b.set(e,n)}function Ln(t,e){return t.b.get(e)}function Fn(t){return t instanceof Nn?new Nn(t):new Nn(t,void 0)}function Un(t,e,n,r){var i=new Nn(null,void 0);return t&&xn(i,t),e&&(i.a=e),n&&Dn(i,n),r&&(i.f=r),i}function qn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Qn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Qn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Nn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Gn(e,Vn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Gn(e,Vn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Gn(n,"/"==n.charAt(0)?Kn:Bn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Gn(n,Wn)),t.join("")},Nn.prototype.resolve=function(t){var e=new Nn(this),n=!!t.c;n?xn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Dn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(st(i,"./")||st(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?jn(e,tr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Vn=/[#\/\?@]/g,Bn=/[#\?:]/g,Kn=/[#\?]/g,zn=/[#\?@]/g,Wn=/#/g;function Hn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Yn(t){t.a||(t.a=new Sn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Xn(t){var e=On(t);if(void 0===e)throw Error("Keys are undefined");var n=new Hn(null,void 0);t=kn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Zn(n,i,o):n.add(i,o)}return n}function $n(t,e){Yn(t),e=er(t,e),An(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,An((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Rn(t)))}function Jn(t,e){return Yn(t),e=er(t,e),An(t.a.b,e)}function Zn(t,e,n){$n(t,e),0<n.length&&(t.c=null,t.a.set(er(t,e),$(n)),t.b+=n.length)}function tr(t){var e=new Hn;return e.c=t.c,t.a&&(e.a=new Sn(t.a),e.b=t.b),e}function er(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function nr(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),t(e,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&"function"!=typeof(a=n[i])&&(r.push(o),ar(i,r),r.push(":"),t(e,a,r),o=",");return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":ar(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new rr,t,e),e.join("")}function rr(){}(t=Hn.prototype).add=function(t,e){Yn(this),this.c=null,t=er(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Yn(this),this.a.forEach((function(n,r){V(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Yn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Yn(this);var e=[];if("string"==typeof t)Jn(this,t)&&(e=X(e,this.a.get(er(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=X(e,t[n])}return e},t.set=function(t,e){return Yn(this),this.c=null,Jn(this,t=er(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var ir={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},or=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function ar(t,e){e.push('"',t.replace(or,(function(t){var e=ir[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ir[t]=e),e})),'"')}function sr(){var t=Cr();return Yt&&!!ae&&11==ae||/Edge\/\d+/.test(t)}function ur(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function cr(t,e){e=e||a.window;var n="about:blank";t&&(n=Nt(Mt(t)||Ut)),e.location.href=n}function lr(t){return!!((t=(t||Cr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function hr(t){t=t||a.window;try{t.close()}catch(e){}}function fr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Cr().toLowerCase(),r&&(e.target=r,st(n,"crios/")&&(e.target="_blank")),Ir(Cr())==wr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof At?n:Mt(void 0!==n.href?n.href:String(n))||Ut,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((ht("iPhone")&&!ht("iPod")&&!ht("iPad")||ht("iPad")||ht("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(a=pe(document,"A"),"HTMLAnchorElement"),e=e instanceof At?e:Lt(e),a.href=Nt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Qt("",r,n,a),t=Nt(e),a&&($t&&st(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Bt(t)+'">',t=new qt(t=(r=Tt())?r.createHTML(t):t,null,Gt),r=a.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(j("expected object of type SafeHtml, got '"+t+"' of type "+h(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Qt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(s){}return a}var dr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,pr=/^[^@]+@[^@]+$/;function gr(){var t=null;return new _e((function(e){"complete"==a.document.readyState?e():(t=function(){e()},ln(window,"load",t))})).o((function(e){throw hn(window,"load",t),e}))}function mr(t){return t=t||Cr(),!("file:"!==Ar()&&"ionic:"!==Ar()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function vr(){var t=a.window;try{return!(!t||t==t.top)}catch(e){return!1}}function yr(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function br(){return Pt.default.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Pt.default.INTERNAL.hasOwnProperty("node")?"Node":yr()?"Worker":"Browser"}function _r(){var t=br();return"ReactNative"===t||"Node"===t}var wr="Firefox";function Ir(t){var e=t.toLowerCase();return st(e,"opera/")||st(e,"opr/")||st(e,"opios/")?"Opera":st(e,"iemobile")?"IEMobile":st(e,"msie")||st(e,"trident/")?"IE":st(e,"edge/")?"Edge":st(e,"firefox/")?wr:st(e,"silk/")?"Silk":st(e,"blackberry")?"Blackberry":st(e,"webos")?"Webos":!st(e,"safari/")||st(e,"chrome/")||st(e,"crios/")||st(e,"android")?!st(e,"chrome/")&&!st(e,"crios/")||st(e,"edge/")?st(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":"Chrome":"Safari"}var Tr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Er(t,e){e=e||[];var n,r=[],i={};for(n in Tr)i[Tr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=br())?r=Ir(i=Cr()):"Worker"===r&&(r=Ir(i=Cr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Cr(){return a.navigator&&a.navigator.userAgent||""}function kr(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Or(){try{var t=a.localStorage,e=jr();if(t)return t.setItem(e,"1"),t.removeItem(e),!sr()||!!a.indexedDB}catch(n){return yr()&&!!a.indexedDB}return!1}function Sr(){return(Rr()||"chrome-extension:"===Ar()||mr())&&!_r()&&Or()&&!yr()}function Rr(){return"http:"===Ar()||"https:"===Ar()}function Ar(){return a.location&&a.location.protocol||null}function Pr(t){return!lr(t=t||Cr())&&Ir(t)!=wr}function Nr(t){return void 0===t?null:nr(t)}function xr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!=t[e]&&(n[e]=t[e]);return n}function Dr(t){if(null!==t)return JSON.parse(t)}function jr(t){return t||Math.floor(1e9*Math.random()).toString()}function Mr(t){return"Safari"!=Ir(t=t||Cr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Lr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Fr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Cr(),e=br(),this.b=lr(t)||"ReactNative"===e}function Ur(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function qr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Gr(){return!(!kr("fireauth.oauthhelper",a)&&!kr("fireauth.iframe",a))}Fr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==Ar()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Qr,Vr={};function Br(t){Vr[t]||(Vr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Kr={};Object.defineProperty(Kr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Kr,"abcd",{configurable:!0,enumerable:!0,value:2}),Qr=2==Kr.abcd}catch(Wt){Qr=!1}function zr(t,e,n){Qr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Wr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&zr(t,n,e[n])}function Hr(t){var e={};return Wr(e,t),e}function Yr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)zr(e,n,Yr(t[n]));return e}function Xr(t){var e=t&&(t[ei]?"phone":null);if(!(e&&t&&t[ti]))throw new C("internal-error","Internal assert: invalid MultiFactorInfo object");zr(this,"uid",t[ti]),zr(this,"displayName",t[Jr]||null);var n=null;t[Zr]&&(n=new Date(t[Zr]).toUTCString()),zr(this,"enrollmentTime",n),zr(this,"factorId",e)}function $r(t){try{var e=new ni(t)}catch(n){e=null}return e}Xr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Jr="displayName",Zr="enrolledAt",ti="mfaEnrollmentId",ei="phoneInfo";function ni(t){Xr.call(this,t),zr(this,"phoneNumber",t[ei])}function ri(t){var e={},n=t[ui],r=t[li],i=t[hi];if(t=$r(t[ci]),!i||i!=ai&&i!=si&&!n||i==si&&!r||i==oi&&!t)throw Error("Invalid checkActionCode response!");i==si?(e[di]=n||null,e[gi]=n||null,e[fi]=r):(e[di]=r||null,e[gi]=r||null,e[fi]=n||null),e[pi]=t||null,zr(this,vi,i),zr(this,mi,Yr(e))}T(ni,Xr),ni.prototype.w=function(){var t=ni.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var oi="REVERT_SECOND_FACTOR_ADDITION",ai="EMAIL_SIGNIN",si="VERIFY_AND_CHANGE_EMAIL",ui="email",ci="mfaInfo",li="newEmail",hi="requestType",fi="email",di="fromEmail",pi="multiFactorInfo",gi="previousEmail",mi="data",vi="operation";function yi(t){var e=Ln(t=Fn(t),bi)||null,n=Ln(t,_i)||null,r=Ln(t,Ti)||null;if(r=r&&Ci[r]||null,!e||!n||!r)throw new C("argument-error",bi+", "+_i+"and "+Ti+" are required in a valid action code URL.");Wr(this,{apiKey:e,operation:r,code:n,continueUrl:Ln(t,wi)||null,languageCode:Ln(t,Ii)||null,tenantId:Ln(t,Ei)||null})}var bi="apiKey",_i="oobCode",wi="continueUrl",Ii="languageCode",Ti="mode",Ei="tenantId",Ci={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:oi,signIn:ai,verifyAndChangeEmail:si,verifyEmail:"VERIFY_EMAIL"};function ki(t){try{return new yi(t)}catch(e){return null}}function Oi(t){var e=t[Ni];if(void 0===e)throw new C("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new C("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Si];if(n&&"object"==typeof n){e=n[ji];var r=n[xi];if(n=n[Di],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new C("argument-error",xi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new C("argument-error",Di+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new C("argument-error",ji+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new C("missing-android-pkg-name")}}else if(void 0!==n)throw new C("argument-error",Si+" property must be a non null object when specified.");if(this.f=null,(e=t[Pi])&&"object"==typeof e){if("string"==typeof(e=e[Mi])&&e.length)this.f=e;else if(void 0!==e)throw new C("argument-error",Mi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new C("argument-error",Pi+" property must be a non null object when specified.");if(void 0!==(e=t[Ai])&&"boolean"!=typeof e)throw new C("argument-error",Ai+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ri])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new C("argument-error",Ri+" property must be a non empty string when specified.");this.i=t||null}var Si="android",Ri="dynamicLinkDomain",Ai="handleCodeInApp",Pi="iOS",Ni="url",xi="installApp",Di="minimumVersion",ji="packageName",Mi="bundleId";function Li(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Fi=null;function Ui(t){var e=Gi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function qi(t){try{return new Ui(t)}catch(e){return null}}function Gi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Fi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Fi){Fi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Fi[o]&&(Fi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(u){}return null}Ui.prototype.T=function(){return this.f},Ui.prototype.l=function(){return this.c},Ui.prototype.toString=function(){return this.h};var Qi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Vi=["client_id","response_type","scope","redirect_uri","state"],Bi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Vi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Vi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Vi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Qi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Ki(t){for(var e in Bi)if(Bi[e].fa==t)return Bi[e];return null}function zi(t){var e={};e["facebook.com"]=$i,e["google.com"]=Zi,e["github.com"]=Ji,e["twitter.com"]=to;var n=t&&t[Hi];try{if(n)return e[n]?new e[n](t):new Xi(t);if(void 0!==t[Wi])return new Yi(t)}catch(r){}return null}var Wi="idToken",Hi="providerId";function Yi(t){var e=t[Hi];if(!e&&t[Wi]){var n=qi(t[Wi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),zr(this,"providerId",e),zr(this,"isNewUser",n)}function Xi(t){Yi.call(this,t),zr(this,"profile",Yr((t=Dr(t.rawUserInfo||"{}"))||{}))}function $i(t){if(Xi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ji(t){if(Xi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");zr(this,"username",this.profile&&this.profile.login||null)}function Zi(t){if(Xi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function to(t){if(Xi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");zr(this,"username",t.screenName||null)}function eo(t){var e=Fn(t),n=Ln(e,"link"),r=Ln(Fn(n),"link");return e=Ln(e,"deep_link_id"),Ln(Fn(e),"link")||e||r||n||t}function no(t,e){if(!t&&!e)throw new C("internal-error","Internal assert: no raw session string available");if(t&&e)throw new C("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?ro:io}T(Xi,Yi),T($i,Xi),T(Ji,Xi),T(Zi,Xi),T(to,Xi);var ro="enroll",io="signin";function oo(){}function ao(t,e){return t.then((function(t){if(t[za]){var n=qi(t[za]);if(!n||e!=n.i)throw new C("user-mismatch");return t}throw new C("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==S+"user-not-found"?new C("user-mismatch"):t}))}function so(t,e){if(!e)throw new C("internal-error","failed to construct a credential");this.a=e,zr(this,"providerId",t),zr(this,"signInMethod",t)}function uo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function co(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new so(t.providerId,t.pendingToken)}catch(e){}return null}function lo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&zr(this,"idToken",e.idToken),e.accessToken&&zr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&zr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new C("internal-error","failed to construct a credential");zr(this,"accessToken",e.oauthToken),zr(this,"secret",e.oauthTokenSecret)}zr(this,"providerId",t),zr(this,"signInMethod",n)}function ho(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Xn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function fo(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new lo(t.providerId,e,t.signInMethod)}catch(n){}}return null}function po(t,e){this.Qc=e||[],Wr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Ki(t)||{}).Ja||null,this.pb=null}function go(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new C("argument-error",'SAML provider IDs must be prefixed with "saml."');po.call(this,t,[])}function mo(t){po.call(this,t,Vi),this.a=[]}function vo(){mo.call(this,"facebook.com")}function yo(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new vo).credential({accessToken:e})}function bo(){mo.call(this,"github.com")}function _o(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return p(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function wo(){mo.call(this,"google.com"),this.Ca("profile")}function Io(t,e){var n=t;return p(t)&&(n=t.idToken,e=t.accessToken),(new wo).credential({idToken:n,accessToken:e})}function To(){po.call(this,"twitter.com",Qi)}function Eo(t,e){var n=t;if(p(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new C("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new lo("twitter.com",n,"twitter.com")}function Co(t,e,n){this.a=t,this.f=e,zr(this,"providerId","password"),zr(this,"signInMethod",n===Oo.EMAIL_LINK_SIGN_IN_METHOD?Oo.EMAIL_LINK_SIGN_IN_METHOD:Oo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function ko(t){return t&&t.email&&t.password?new Co(t.email,t.password,t.signInMethod):null}function Oo(){Wr(this,{providerId:"password",isOAuthProvider:!1})}function So(t,e){if(!(e=Ro(e)))throw new C("argument-error","Invalid email link!");return new Co(t,e.code,Oo.EMAIL_LINK_SIGN_IN_METHOD)}function Ro(t){return(t=ki(t=eo(t)))&&t.operation===ai?t:null}function Ao(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new C("internal-error");this.a=t,zr(this,"providerId","phone"),this.fa="phone",zr(this,"signInMethod","phone")}function Po(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return V(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Ao(e)}return null}function No(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function xo(t){try{this.a=t||Pt.default.auth()}catch(e){throw new C("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Wr(this,{providerId:"phone",isOAuthProvider:!1})}function Do(t,e){if(!t)throw new C("missing-verification-id");if(!e)throw new C("missing-verification-code");return new Ao({fb:t,eb:e})}function jo(t){if(t.temporaryProof&&t.phoneNumber)return new Ao({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Io(o,n);case"facebook.com":return yo(n);case"github.com":return _o(n);case"twitter.com":return Eo(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new so(e,a):new lo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new mo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(s){return null}}function Mo(t){if(!t.isOAuthProvider)throw new C("invalid-oauth-provider")}function Lo(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new C("invalid-auth-event");if(this.g&&this.a)throw new C("invalid-auth-event");if(this.g&&!this.f)throw new C("invalid-auth-event")}function Fo(t){return(t=t||{}).type?new Lo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&k(t.error),t.postBody,t.tenantId):null}function Uo(){this.b=null,this.a=[]}no.prototype.Ha=function(){return Oe(this.a?this.a:this.b)},no.prototype.w=function(){return this.type==ro?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},oo.prototype.ka=function(){},oo.prototype.b=function(){},oo.prototype.c=function(){},oo.prototype.w=function(){},so.prototype.ka=function(t){return ds(t,uo(this))},so.prototype.b=function(t,e){var n=uo(this);return n.idToken=e,ps(t,n)},so.prototype.c=function(t,e){return ao(gs(t,uo(this)),e)},so.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},lo.prototype.ka=function(t){return ds(t,ho(this))},lo.prototype.b=function(t,e){var n=ho(this);return n.idToken=e,ps(t,n)},lo.prototype.c=function(t,e){return ao(gs(t,ho(this)),e)},lo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},po.prototype.Ka=function(t){return this.Jb=pt(t),this},T(go,po),T(mo,po),mo.prototype.Ca=function(t){return W(this.a,t)||this.a.push(t),this},mo.prototype.Rb=function(){return $(this.a)},mo.prototype.credential=function(t,e){var n;if(!(n=p(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new C("argument-error","credential failed: must provide the ID token and/or the access token.");return new lo(this.providerId,n,this.providerId)},T(vo,mo),zr(vo,"PROVIDER_ID","facebook.com"),zr(vo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),T(bo,mo),zr(bo,"PROVIDER_ID","github.com"),zr(bo,"GITHUB_SIGN_IN_METHOD","github.com"),T(wo,mo),zr(wo,"PROVIDER_ID","google.com"),zr(wo,"GOOGLE_SIGN_IN_METHOD","google.com"),T(To,po),zr(To,"PROVIDER_ID","twitter.com"),zr(To,"TWITTER_SIGN_IN_METHOD","twitter.com"),Co.prototype.ka=function(t){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?Xs(t,Ts,{email:this.a,oobCode:this.f}):Xs(t,Ks,{email:this.a,password:this.f})},Co.prototype.b=function(t,e){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?Xs(t,Es,{idToken:e,email:this.a,oobCode:this.f}):Xs(t,Ls,{idToken:e,email:this.a,password:this.f})},Co.prototype.c=function(t,e){return ao(this.ka(t),e)},Co.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Wr(Oo,{PROVIDER_ID:"password"}),Wr(Oo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Wr(Oo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ao.prototype.ka=function(t){return t.gb(No(this))},Ao.prototype.b=function(t,e){var n=No(this);return n.idToken=e,Xs(t,Ws,n)},Ao.prototype.c=function(t,e){var n=No(this);return n.operation="REAUTH",ao(t=Xs(t,Hs,n),e)},Ao.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},xo.prototype.gb=function(t,e){var n=this.a.a;return Oe(e.verify()).then((function(r){if("string"!=typeof r)throw new C("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=p(t)?t.session:null,o=p(t)?t.phoneNumber:t;return(i&&i.type==ro?i.Ha().then((function(t){return function(t,e){return Xs(t,Us,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==io?i.Ha().then((function(e){return function(t,e){return Xs(t,qs,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return Xs(t,js,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new C("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Wr(xo,{PROVIDER_ID:"phone"}),Wr(xo,{PHONE_SIGN_IN_METHOD:"phone"}),Lo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Lo.prototype.T=function(){return this.h},Lo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var qo,Go=null;function Qo(t){var e="unauthorized-domain",n=void 0,r=Fn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Vt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Vt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",C.call(this,e,n)}function Vo(t,e,n){C.call(this,t,n),(t=e||{}).Kb&&zr(this,"email",t.Kb),t.ea&&zr(this,"phoneNumber",t.ea),t.credential&&zr(this,"credential",t.credential),t.$b&&zr(this,"tenantId",t.$b)}function Bo(t){if(t.code){var e=t.code||"";0==e.indexOf(S)&&(e=e.substring(S.length));var n={credential:jo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new C(e,t.message||void 0);return new Vo(e,n,t.message)}return null}function Ko(){}function zo(){}function Wo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(Jp){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Ho(){}function Yo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Tb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function Xo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function $o(t,e,n){this.reset(t,e,n,void 0,void 0)}function Jo(t){this.f=t,this.b=this.c=this.a=null}function Zo(t,e){this.name=t,this.value=e}T(Qo,C),T(Vo,C),Vo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&mt(t,e),t},Vo.prototype.toJSON=function(){return this.w()},Ko.prototype.c=null,T(zo,Ko),zo.prototype.a=function(){var t=Wo(this);return t?new ActiveXObject(t):new XMLHttpRequest},zo.prototype.b=function(){var t={};return Wo(this)&&(t[0]=!0,t[1]=!0),t},qo=new zo,T(Ho,Ko),Ho.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Yo;throw Error("Unsupported browser")},Ho.prototype.b=function(){return{}},(t=Yo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Xo(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",Xo(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,Xo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},$o.prototype.a=null,$o.prototype.reset=function(t,e,n,r,i){r||I(),delete this.a},Zo.prototype.toString=function(){return this.name};var ta=new Zo("SEVERE",1e3),ea=new Zo("WARNING",900),na=new Zo("CONFIG",700),ra=new Zo("FINE",500);Jo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(j("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new $o(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ia={},oa=null;function aa(t){var e;if(oa||(oa=new Jo(""),ia[""]=oa,oa.c=na),!(e=ia[t])){e=new Jo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=aa(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,ia[t]=e}return e}function sa(t,e){t&&t.log(ra,e,void 0)}function ua(t){this.f=t}function ca(t){_n.call(this),this.u=t,this.h=void 0,this.readyState=la,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=aa("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}T(ua,Ko),ua.prototype.a=function(){return new ca(this.f)},ua.prototype.b=function(t){return function(){return t}}({}),T(ca,_n);var la=0;function ha(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function fa(t){t.readyState=4,t.g=null,t.c=null,t.m=null,da(t)}function da(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function pa(t){_n.call(this),this.headers=new Sn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=ga,this.u=this.S=!1}(t=ca.prototype).open=function(t,e){if(this.readyState!=la)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,da(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,fa(this)),this.readyState=la},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,da(this)),this.a&&(this.readyState=3,da(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,ha(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?fa(this):da(this),3==this.readyState&&ha(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,fa(this))},t.sc=function(t){this.a&&(this.response=t,fa(this))},t.Va=function(t){var e=this.i;e&&e.log(ea,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&fa(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(ea,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(ea,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ca.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),T(pa,_n);var ga="";pa.prototype.b=aa("goog.net.XhrIo");var ma=/^https?$/i,va=["POST","PUT"];function ya(t){return"content-type"==t.toLowerCase()}function ba(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,_a(t),Ia(t)}function _a(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function wa(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Ea(t)&&2==Ca(t))sa(t.b,ka(t,"Local request error detected and ignored"));else if(t.i&&4==Ea(t))En(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Ea(t)){sa(t.b,ka(t,"Request complete")),t.c=!1;try{var e,n=Ca(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var s=String(t.l).match(Pn)[1]||null;if(!s&&a.self&&a.self.location){var u=a.self.location.protocol;s=u.substr(0,u.length-1)}i=!ma.test(s?s.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Ea(t)?t.a.statusText:""}catch(l){sa(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+Ca(t)+"]",_a(t)}}finally{Ia(t)}}}function Ia(t,e){if(t.a){Ta(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(Jp){(t=t.b)&&t.log(ta,"Problem encountered resetting onreadystatechange: "+Jp.message,void 0)}}}function Ta(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Ea(t){return t.a?t.a.readyState:0}function Ca(t){try{return 2<Ea(t)?t.a.status:-1}catch(e){return-1}}function ka(t,e){return e+" ["+t.P+" "+t.l+" "+Ca(t)+"]"}function Oa(t){var e=Fa;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Sa(t,e,n){t.a=!0,t.c=n,t.f=!e,Na(t)}function Ra(t){if(t.a){if(!t.v)throw new xa(t);t.v=!1}}function Aa(t,e,n,r){t.g.push([e,n,r]),t.a&&Na(t)}function Pa(t){return z(t.g,(function(t){return d(t[1])}))}function Na(t){if(t.h&&t.a&&Pa(t)){var e=t.h,n=Ma[e];n&&(a.clearTimeout(n.a),delete Ma[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(N(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Pa(t)||(n=!0)}}t.c=e,r&&(u=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof Oa?(Aa(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new ja(e),Ma[e.a]=e,t.h=e.a)}function xa(){x.call(this)}function Da(){x.call(this)}function ja(t){this.a=a.setTimeout(_(this.c,this),0),this.b=t}(t=pa.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",sa(this.b,ka(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(sa(this.b,ka(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ia(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ia(this,!0)),pa.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?wa(this):this.Jc())},t.Jc=function(){wa(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ga:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(ta,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return sa(this.b,"Can not get response: "+e.message),null}},Oa.prototype.cancel=function(t){if(this.a)this.c instanceof Oa&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Da(this),Ra(this),Sa(this,!1,t))}},Oa.prototype.m=function(t,e){this.i=!1,Sa(this,t,e)},Oa.prototype.then=function(t,e,n){var r,i,o=new _e((function(t,e){r=t,i=e}));return Aa(this,r,(function(t){t instanceof Da?o.cancel():i(t)})),o.then(t,e,n)},Oa.prototype.$goog_Thenable=!0,T(xa,x),xa.prototype.message="Deferred has already fired",xa.prototype.name="AlreadyCalledError",T(Da,x),Da.prototype.message="Deferred was canceled",Da.prototype.name="CanceledError",ja.prototype.c=function(){throw delete Ma[this.a],this.b};var Ma={};function La(t){var e={},n=e.document||document,r=Ct(t).toString(),i=pe(document,"SCRIPT"),o={Xb:i,Ma:void 0},s=new Oa(o),l=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(l=window.setTimeout((function(){Ua(i,!0);var t=new Qa(Ga,"Timeout reached for loading script "+r);Ra(s),Sa(s,!1,t)}),h),o.Ma=l),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ua(i,e.xd||!1,l),Ra(s),Sa(s,!0,null))},i.onerror=function(){Ua(i,!0,l);var t=new Qa(qa,"Error while loading script "+r);Ra(s),Sa(s,!1,t)},mt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),ce(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=Ct(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=c(e.document):(null===u&&(u=c(a.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Fa(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Ua(t,!0,this.Ma)}}function Ua(t,e,n){null!=n&&a.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var qa=0,Ga=1;function Qa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),x.call(this,n),this.code=t}function Va(t){this.f=t}function Ba(t,e,n){if(this.c=t,this.l=(t=e||{}).secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Wa,this.g=pt(t.secureTokenHeaders||Ha),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||Ya,this.a=pt(t.firebaseHeaders||Xa),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==br(),!(n=a.XMLHttpRequest||n&&Pt.default.INTERNAL.node&&Pt.default.INTERNAL.node.XMLHttpRequest)&&!yr())throw new C("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,this.f=yr()?new ua(self):_r()?new Va(n):new Ho,this.b=null}T(Qa,x),T(Va,Ko),Va.prototype.a=function(){return new this.f},Va.prototype.b=function(){return{}};var Ka,za="idToken",Wa=new Fr(3e4,6e4),Ha={"Content-Type":"application/x-www-form-urlencoded"},Ya=new Fr(3e4,6e4),Xa={"Content-Type":"application/json"};function $a(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function Ja(t,e){e&&(t.l=Za("https://securetoken.googleapis.com/v1/token",e),t.h=Za("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Za("https://identitytoolkit.googleapis.com/v2/",e))}function Za(t,e){return t=Fn(t),e=Fn(e.url),t.f=t.a+t.f,xn(t,e.c),t.a=e.a,Dn(t,e.g),t.toString()}function ts(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function es(t,e,n,r,i,o,s){(function(){var t=Cr();return!((t="Chrome"!=Ir(t)?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Yt&&ae&&!(9<ae))})()||yr()?t=_(t.u,t):(Ka||(Ka=new _e((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[rs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Aa(t,null,e,void 0)}(La(kt(ns,{onload:rs})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=_(t.s,t)),t(e,n,r,i,o,s)}Ba.prototype.T=function(){return this.b},Ba.prototype.u=function(t,e,n,r,i,o){if(yr()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new C("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new pa(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}wn(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return sa(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),In(s,"ready",(function(){u&&clearTimeout(u),Be(this)})),In(s,"timeout",(function(){u&&clearTimeout(u),Be(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():qo.a(),t.C=function(t){return t.c||(t.c=t.b())}(t.D?t.D:qo),t.a.onreadystatechange=_(t.Wb,t);try{sa(t.b,ka(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(s){return sa(t.b,ka(t,"Error opening Xhr: "+s.message)),void ba(t,s)}e=r||"";var o=new Sn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)V(t,e,void 0);else for(var n=On(t),r=kn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=ya,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!W(va,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Ta(t),0<t.g&&(t.u=function(t){return Yt&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),sa(t.b,ka(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.s=En(t.Ma,t.g,t)),sa(t.b,ka(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(s){sa(t.b,ka(t,"Send error: "+s.message)),ba(t,s)}}(s,t,n,r,i)};var ns=new yt(It,"https://apis.google.com/js/client.js?onload=%{onload}"),rs="__fcb"+Math.floor(1e6*Math.random()).toString();function is(t){if("string"!=typeof(t=t.email)||!pr.test(t))throw new C("invalid-email")}function os(t){"email"in t&&is(t)}function as(t){if(!t[za]){if(t.mfaPendingCredential)throw new C("multi-factor-auth-required",null,pt(t));throw new C("internal-error")}}function ss(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new C("internal-error")}else{if(!t.sessionInfo)throw new C("missing-verification-id");if(!t.code)throw new C("missing-verification-code")}}Ba.prototype.s=function(t,e,n,r,i){var o=this;Ka.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Ba.prototype.Ab=function(){return Xs(this,Fs,{})},Ba.prototype.Cb=function(t,e){return Xs(this,Ms,{idToken:t,email:e})},Ba.prototype.Db=function(t,e){return Xs(this,Ls,{idToken:t,password:e})};var us={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function cs(t){if(!t.phoneVerificationInfo)throw new C("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new C("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new C("missing-verification-code")}function ls(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new C("internal-error")}function hs(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&Jn(t=new Hn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function fs(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Bo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Bo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Bo(t)):t.errorMessage&&(e=$s(t.errorMessage)),e)throw e;as(t)}function ds(t,e){return e.returnIdpCredential=!0,Xs(t,Gs,e)}function ps(t,e){return e.returnIdpCredential=!0,Xs(t,Vs,e)}function gs(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Xs(t,Qs,e)}function ms(t){if(!t.oobCode)throw new C("invalid-action-code")}(t=Ba.prototype).Eb=function(t,e){var n={idToken:t},r=[];return ft(us,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),Xs(this,Ms,n)},t.wb=function(t,e){return mt(t={requestType:"PASSWORD_RESET",email:t},e),Xs(this,Ps,t)},t.xb=function(t,e){return mt(t={requestType:"EMAIL_SIGNIN",email:t},e),Xs(this,Ss,t)},t.vb=function(t,e){return mt(t={requestType:"VERIFY_EMAIL",idToken:t},e),Xs(this,Rs,t)},t.Fb=function(t,e,n){return mt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Xs(this,As,t)},t.gb=function(t){return Xs(this,zs,t)},t.ob=function(t,e){return Xs(this,Ds,{oobCode:t,newPassword:e})},t.Sa=function(t){return Xs(this,ys,{oobCode:t})},t.kb=function(t){return Xs(this,vs,{oobCode:t})};var vs={endpoint:"setAccountInfo",A:ms,Z:"email",B:!0},ys={endpoint:"resetPassword",A:ms,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new C("internal-error")},B:!0},bs={endpoint:"signupNewUser",A:function(t){if(is(t),!t.password)throw new C("weak-password")},G:as,V:!0,B:!0},_s={endpoint:"createAuthUri",B:!0},ws={endpoint:"deleteAccount",O:["idToken"]},Is={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new C("internal-error")}},Ts={endpoint:"emailLinkSignin",O:["email","oobCode"],A:is,G:as,V:!0,B:!0},Es={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:is,G:as,V:!0},Cs={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:cs,G:as,B:!0,Na:!0},ks={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:cs,G:as,B:!0,Na:!0},Os={endpoint:"getAccountInfo"},Ss={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new C("internal-error");is(t)},Z:"email",B:!0},Rs={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",B:!0},As={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",B:!0},Ps={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new C("internal-error");is(t)},Z:"email",B:!0},Ns={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},xs={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new C("internal-error")}},Ds={endpoint:"resetPassword",A:ms,Z:"email",B:!0},js={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ms={endpoint:"setAccountInfo",O:["idToken"],A:os,V:!0},Ls={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(os(t),!t.password)throw new C("weak-password")},G:as,V:!0},Fs={endpoint:"signupNewUser",G:as,V:!0,B:!0},Us={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new C("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new C("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},qs={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},Gs={endpoint:"verifyAssertion",A:ls,Za:hs,G:fs,V:!0,B:!0},Qs={endpoint:"verifyAssertion",A:ls,Za:hs,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new C("user-not-found");if(t.errorMessage)throw $s(t.errorMessage);as(t)},V:!0,B:!0},Vs={endpoint:"verifyAssertion",A:function(t){if(ls(t),!t.idToken)throw new C("internal-error")},Za:hs,G:fs,V:!0},Bs={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new C("invalid-custom-token")},G:as,V:!0,B:!0},Ks={endpoint:"verifyPassword",A:function(t){if(is(t),!t.password)throw new C("wrong-password")},G:as,V:!0,B:!0},zs={endpoint:"verifyPhoneNumber",A:ss,G:as,B:!0},Ws={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new C("internal-error");ss(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Bo(t);as(t)}},Hs={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ss,G:as,B:!0},Ys={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[za]^!!t.refreshToken)throw new C("internal-error")},B:!0,Na:!0};function Xs(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return Se(new C("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Oe(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,a){var s=Fn(e+n);Mn(s,"key",t.c),a&&Mn(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Mn(s,c,i[c]);return new _e((function(e,n){es(t,s.toString(),(function(t){t?t.error?n(Js(t,o||{})):e(t):n(new C("network-request-failed"))}),r,u?void 0:nr(xr(i)),t.a,t.v.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new C("internal-error");return r[e.Z]}))}function $s(t){return Js({error:{errors:[{message:t}],code:400,message:t}})}function Js(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new C(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",mt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new C(r[i],e);return!e&&t&&(e=Nr(t)),new C("internal-error",e)}function Zs(t){this.b=t,this.a=null,this.sb=function(t){return(ru||(ru=new _e((function(t,e){function n(){Lr(),kr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Lr(),e(Error("Network Error"))},timeout:eu.get()})}if(kr("gapi.iframes.Iframe"))t();else if(kr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){kr("gapi.load")?n():e(Error("Network Error"))},Oe(La(r=kt(tu,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw ru=null,t})))).then((function(){return new _e((function(e,n){kr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),nu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var tu=new yt(It,"https://apis.google.com/js/api.js?onload=%{onload}"),eu=new Fr(3e4,6e4),nu=new Fr(5e3,15e3),ru=null;function iu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Un((t=Fn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Un("https",this.l,null,"/__/auth/iframe"),this.a=t,Mn(this.a,"apiKey",this.h),Mn(this.a,"appName",this.i),this.b=null,this.c=[]}function ou(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function au(t){try{return Pt.default.app(t).auth().Ga()}catch(e){return[]}}function su(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function uu(t){var e=ur();return function(t){return Xs(t,Ns,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Fn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Fn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:dr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Qo(ur())}))}function cu(t){return t.m||(t.m=gr().then((function(){if(!t.u){var e=t.c,n=t.i,r=au(t.b),i=new iu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=$(r||[]),t.u=i.toString()}t.v=new Zs(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Fo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Oe(n)}return n.status="ERROR",Oe(n)}))}(t)}))),t.m}function lu(t){return t.l||(t.C=t.c?Er(t.c,au(t.b)):null,t.l=new Ba(t.g,P(t.i),t.C),t.f&&Ja(t.l,t.f)),t.l}function hu(t,e,n,r,i,o,a,s,u,c,l,h){return(t=new ou(t,e,n,r,i,h)).l=o,t.g=a,t.i=s,t.b=pt(u||null),t.f=c,t.zb(l).toString()}function fu(t){if(this.a=t||Pt.default.INTERNAL.reactNative&&Pt.default.INTERNAL.reactNative.AsyncStorage,!this.a)throw new C("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function du(t){this.b=t,this.a={},this.f=_(this.c,this)}iu.prototype.toString=function(){return this.f?Mn(this.a,"v",this.f):$n(this.a.b,"v"),this.b?Mn(this.a,"eid",this.b):$n(this.a.b,"eid"),this.c.length?Mn(this.a,"fw",this.c.join(",")):$n(this.a.b,"fw"),this.a.toString()},ou.prototype.zb=function(t){return this.h=t,this},ou.prototype.toString=function(){if(this.v){var t=Fn(this.v.url);t=Un(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Un("https",this.u,null,"/__/auth/handler");if(Mn(t,"apiKey",this.s),Mn(t,"appName",this.c),Mn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Pt.default.app(this.c).auth().la()}catch(s){n=null}for(var r in e.pb=n,Mn(t,"providerId",this.a.providerId),e=xr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=pt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),dt(e)||Mn(t,"customParameters",Nr(e))}if("function"==typeof this.a.Rb&&(n=this.a.Rb()).length&&Mn(t,"scopes",n.join(",")),this.l?Mn(t,"redirectUrl",this.l):$n(t.b,"redirectUrl"),this.g?Mn(t,"eventId",this.g):$n(t.b,"eventId"),this.i?Mn(t,"v",this.i):$n(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Ln(t,a)&&Mn(t,a,this.b[a]);return this.h?Mn(t,"tid",this.h):$n(t.b,"tid"),this.f?Mn(t,"eid",this.f):$n(t.b,"eid"),(a=au(this.c)).length&&Mn(t,"fw",a.join(",")),t.toString()},(t=su.prototype).Pb=function(t,e,n){var r=new C("popup-closed-by-user"),i=new C("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return cu(t).then((function(){return function(t,e){return t.sb.then((function(){return new _e((function(n){t.a.send(e.type,e,n,kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&hr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new _e((function(e){return function n(){Cn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return Cn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=Cr();return!Pr(t)&&!Mr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,a,s){if(!t)return Se(new C("popup-blocked"));if(a&&!Pr())return this.ma().o((function(e){hr(t),i(e)})),r(),Oe();this.a||(this.a=uu(lu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw hr(t),i(e),e}));return r(),e})).then((function(){Mo(n),a||cr(hu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=uu(lu(this)));var i=this;return this.a.then((function(){Mo(e),cr(hu(i.s,i.g,i.b,t,e,ur(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return cu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new C("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){Y(this.h,(function(e){return e==t}))},(t=fu.prototype).get=function(t){return Oe(this.a.getItem(t)).then((function(t){return t&&Dr(t)}))},t.set=function(t,e){return Oe(this.a.setItem(t,Nr(e)))},t.U=function(t){return Oe(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var pu,gu=[];function mu(t,e,n){dt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function vu(t){this.a=t}function yu(t){this.c=t,this.b=!1,this.a=[]}function bu(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Se(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new _e((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),t.a.push(c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}}),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return _u(t,c),e})).o((function(e){throw _u(t,c),e}))}function _u(t,e){if(e){var n=e.messageChannel;n&&(n.port1.removeEventListener("message",e.onMessage),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function wu(){if(!Eu())throw new C("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;yr()&&self?(this.v=function(){var t=yr()?self:null;if(V(gu,(function(n){n.b==t&&(e=n)})),!e){var e=new du(t);gu.push(e)}return e}(),mu(this.v,"keyChanged",(function(e,n){return Ru(t).then((function(e){return 0<e.length&&V(t.a,(function(t){t(e)})),{keyProcessed:W(e,n.key)}}))})),mu(this.v,"ping",(function(){return Oe(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?Oe().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Oe(null)}().then((function(e){(t.h=e)&&(t.g=new yu(new vu(e)),bu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&W(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Iu(t){return t.i||(t.i=function t(e){return new _e((function(n,r){var i=e.m.open("firebaseLocalStorageDb",1);i.onerror=function(t){try{t.preventDefault()}catch(e){}r(Error(t.target.error))},i.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){r(e)}},i.onsuccess=function(i){(i=i.target.result).objectStoreNames.contains("firebaseLocalStorage")?n(i):function(t){return new _e((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(e).then((function(){return t(e)})).then((function(t){n(t)})).o((function(t){r(t)}))}}))}(t)),t.i}function Tu(t,e){var n=0;return new _e((function r(i,o){Iu(t).then(e).then(i).o((function(e){if(!(3<++n))return Iu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Eu(){try{return!!a.indexedDB}catch(Wt){return!1}}function Cu(t){return t.objectStore("firebaseLocalStorage")}function ku(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Ou(t){return new _e((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Su(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?bu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Oe()}function Ru(t){return Iu(t).then((function(t){var e=Cu(ku(t,!1));return e.getAll?Ou(e.getAll()):new _e((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(t.c,n),t.c=n}return r}))}function Au(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Pu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Oe().then((function(){if(Eu()){var t=jr(),r="__sak"+t;return pu||(pu=new wu),(n=pu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){V(e.a,(function(e){e(t)}))})),t}))}function Nu(){this.a={},this.type="inMemory"}function xu(){if(!function(){var t="Node"==br();if(!(t=Du()||t&&Pt.default.INTERNAL.node&&Pt.default.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==br())throw new C("internal-error","The LocalStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Du()||Pt.default.INTERNAL.node.localStorage,this.type="localStorage"}function Du(){try{var t=a.localStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function ju(){this.type="nullStorage"}function Mu(){if(!function(){var t="Node"==br();if(!(t=Lu()||t&&Pt.default.INTERNAL.node&&Pt.default.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==br())throw new C("internal-error","The SessionStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Lu()||Pt.default.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Lu(){try{var t=a.sessionStorage,e=jr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Fu(){var t={};t.Browser=Gu,t.Node=Qu,t.ReactNative=Vu,t.Worker=Bu,this.a=t[br()]}du.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];V(r,(function(e){i.push(Oe().then((function(){return e(t.origin,t.data.data)})))})),Ae(i).then((function(r){var i=[];V(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),V(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},vu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},yu.prototype.close=function(){for(;0<this.a.length;)_u(this,this.a[0]);this.b=!0},(t=wu.prototype).set=function(t,e){var n=this,r=!1;return Tu(this,(function(e){return Ou((e=Cu(ku(e,!0))).get(t))})).then((function(i){return Tu(n,(function(o){if(o=Cu(ku(o,!0)),i)return i.value=e,Ou(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,Ou(o.add(a))}))})).then((function(){return n.c[t]=e,Su(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Tu(this,(function(e){return Ou(Cu(ku(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Tu(this,(function(r){return n=!0,e.b++,Ou(Cu(ku(r,!0)).delete(t))})).then((function(){return delete e.c[t],Su(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){Au(t),function e(){t.f=setTimeout((function(){t.l=Ru(t).then((function(e){0<e.length&&V(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&Au(this)},(t=Pu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){Y(this.a,(function(e){return e==t}))},(t=Nu.prototype).get=function(t){return Oe(this.a[t])},t.set=function(t,e){return this.a[t]=e,Oe()},t.U=function(t){return delete this.a[t],Oe()},t.ca=function(){},t.ia=function(){},(t=xu.prototype).get=function(t){var e=this;return Oe().then((function(){return Dr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Oe().then((function(){var r=Nr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Oe().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&un(a.window,"storage",t)},t.ia=function(t){a.window&&hn(a.window,"storage",t)},(t=ju.prototype).get=function(){return Oe(null)},t.set=function(){return Oe()},t.U=function(){return Oe()},t.ca=function(){},t.ia=function(){},(t=Mu.prototype).get=function(t){var e=this;return Oe().then((function(){return Dr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Oe().then((function(){var r=Nr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Oe().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Uu,qu,Gu={F:xu,cb:Mu},Qu={F:xu,cb:Mu},Vu={F:fu,cb:ju},Bu={F:xu,cb:ju},Ku={rd:"local",NONE:"none",td:"session"};function zu(){var t=!(Mr(Cr())||!vr()),e=Pr(),n=Or();this.m=t,this.h=e,this.l=n,this.a={},Uu||(Uu=new Fu),t=Uu;try{this.g=!sr()&&Gr()||!a.indexedDB?new t.a.F:new Pu(yr()?new Nu:new t.a.F)}catch(r){this.g=new Nu,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new Nu}this.v=new Nu,this.f=_(this.Zb,this),this.b={}}function Wu(){return qu||(qu=new zu),qu}function Hu(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function Yu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Xu(t,e,n){return n=Yu(e,n),"local"==e.F&&(t.b[n]=null),Hu(t,e.F).U(n)}function $u(t){t.c&&(clearInterval(t.c),t.c=null)}function Ju(t){this.a=t,this.b=Wu()}(t=zu.prototype).get=function(t,e){return Hu(this,t.F).get(Yu(t,e))},t.set=function(t,e,n){var r=Yu(t,n),i=this,o=Hu(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=Yu(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),dt(this.a)&&(Hu(this,"local").ca(this.f),this.h||(sr()||!Gr())&&a.indexedDB||!this.l||function(t){$u(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Xe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Yu(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),dt(this.a)&&(Hu(this,"local").ia(this.f),$u(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Hu(this,"local").ia(this.f):$u(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.nb(e))},Yt&&ae&&10==ae&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else V(t,_(this.nb,this))},t.nb=function(t){this.a[t]&&V(this.a[t],(function(t){t()}))};var Zu,tc={name:"authEvent",F:"local"};function ec(){this.a=Wu()}function nc(t,e){this.b=rc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===Zu&&(Zu=a.Int32Array?new Int32Array(lc):lc),this.reset()}T(nc,(function(){this.b=-1}));for(var rc=64,ic=rc-1,oc=[],ac=0;ac<ic;ac++)oc[ac]=0;var sc=X(128,oc);function uc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){var o=(0|n[e-16])+(((i=0|n[e-15])>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+(((r=0|n[e-2])>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|Zu[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function cc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(uc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(uc(t),i=0)}}t.c=i,t.g+=n}nc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):$(this.h)};var lc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function hc(){nc.call(this,8,fc)}T(hc,nc);var fc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function dc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new ec,this.g=new Ju(this.h),this.f=null,this.b=[],this.a=this.c=null}function pc(t){return new C("invalid-cordova-configuration",t)}function gc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function mc(t){return t.f||(t.f=t.ma().then((function(){return new _e((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),vc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=eo(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Dr(Ln(o=Fn(i),"firebaseError")||null))?k(o):null)?new Lo(r.c,r.b,null,null,o,null,r.T()):new Lo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}gc(t,i)}))}var n=new Lo("unknown",null,null,null,new C("no-auth-event")),r=!1,i=Cn(500).then((function(){return vc(t).then((function(){r||gc(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(kr("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Go||(Go=new Uo),function(t){var e=Go;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=kr("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function vc(t){var e=null;return function(t){return t.b.get(tc,t.a).then((function(t){return Fo(t)}))}(t.g).then((function(n){return e=n,Xu((n=t.g).b,tc,n.a)})).then((function(){return e}))}function yc(t){this.a=t,this.b=Wu()}(t=dc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(mr(void 0)?gr().then((function(){return new _e((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Se(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof kr("universalLinks.subscribe",a))throw pc("cordova-universal-links-plugin-fix is not installed");if(void 0===kr("BuildInfo.packageName",a))throw pc("cordova-plugin-buildinfo is not installed");if("function"!=typeof kr("cordova.plugins.browsertab.openUrl",a))throw pc("cordova-plugin-browsertab is not installed");if("function"!=typeof kr("cordova.InAppBrowser.open",a))throw pc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new C("cordova-not-ready")}))},t.Pb=function(t,e){return e(new C("operation-not-supported-in-this-environment")),Oe()},t.Nb=function(){return Se(new C("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return Se(new C("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,l=null;return this.c=Oe().then((function(){return Mo(e),mc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Lo(e,r,null,o,new C("no-auth-event"),null,i),u=kr("BuildInfo.packageName",a);if("string"!=typeof u)throw new C("invalid-cordova-configuration");var c=kr("BuildInfo.displayName",a),l={};if(Cr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Cr().toLowerCase().match(/android/))return Se(new C("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=function(t){var e=new hc;cc(e,t),t=[];var n=8*e.g;cc(e,sc,56>e.c?56-e.c:e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(uc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),l.sessionId=o;var h=hu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(tc,s.w(),e)})).then((function(){var e=kr("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new C("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=kr("cordova.plugins.browsertab.openUrl",a)))throw new C("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=kr("cordova.InAppBrowser.open",a)))throw new C("invalid-cordova-configuration");e=Cr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new _e((function(t,e){u=function(){var e=kr("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),l=function(){Ur()&&c()},o.addEventListener("resume",c=function(){s||(s=Cn(2e3).then((function(){e(new C("redirect-cancelled-by-user"))})))},!1),Cr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return vc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),s&&s.cancel(),u&&i.Ta(u),i.c=null}))},t.Ea=function(t){this.b.push(t),mc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Lo("unknown",null,null,null,new C("no-auth-event")),t(e))}))},t.Ta=function(t){Y(this.b,(function(e){return e==t}))};var bc={name:"pendingRedirect",F:"session"};function _c(t){return Xu(t.b,bc,t.a)}function wc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Mc,this.C=new Gc,this.g=new yc(Dc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Ic(this.D,this.v,this.m,O,this.J)}function Ic(t,e,n,r,i){var o=Pt.default.SDK_VERSION||null;return mr()?new dc(t,e,n,o,r,i):new su(t,e,n,o,r,i)}function Tc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Ec(t){t.a.Yb()&&Tc(t).o((function(e){var n=new Lo("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Ac(e)&&t.s(n)})),t.a.Ub()||Lc(t.b)}function Cc(t,e){W(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(bc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?_c(t.g).then((function(){Tc(t).o((function(e){var n=new Lo("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Ac(e)&&t.s(n)}))})):Ec(t)})).o((function(){Ec(t)}))}function kc(t,e){Y(t.h,(function(t){return t==e}))}wc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Ic(this.D,this.v,this.m,null,this.J),this.i={}},wc.prototype.s=function(t){if(!t)throw new C("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Lc(this.b),e};var Oc=new Fr(2e3,1e4),Sc=new Fr(3e4,6e4);function Rc(t,e,n,r,i,o,a){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Ac(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Pc(t,e,n,r,i){var o;return function(t){return t.b.set(bc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Ac(e))throw new C("operation-not-supported-in-this-environment");return o=e,_c(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new _e((function(){})):_c(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Nc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Oc.get())}wc.prototype.ra=function(){return this.b.ra()};var xc={};function Dc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function jc(t,e,n,r){var i=Dc(e,n,r);return xc[i]||(xc[i]=new wc(t,e,n,r)),xc[i]}function Mc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Lc(t){t.g||(t.g=!0,qc(t,!1,null,null))}function Fc(t){t.g&&!t.i&&qc(t,!1,null,null)}function Uc(t,e){if(t.b=function(){return Oe(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function qc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Se(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Uc(t,n):Uc(t,{user:null}),t.f=[],t.c=[]}function Gc(){}function Qc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Vc(t,e){this.a=e,zr(this,"verificationId",t)}function Bc(t,e,n,r){return new xo(t).gb(e,n).then((function(t){return new Vc(t,r)}))}function Kc(t){var e=Gi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new C("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Wr(this,{token:t,expirationTime:qr(1e3*e.exp),authTime:qr(1e3*e.auth_time),issuedAtTime:qr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function zc(t,e,n){var r=e&&e[Hc];if(!r)throw new C("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=pt(e),this.g=n,this.c=new no(null,r),this.b=[];var i=this;V(e[Wc]||[],(function(t){(t=$r(t))&&i.b.push(t)})),zr(this,"auth",this.a),zr(this,"session",this.c),zr(this,"hints",this.b)}Mc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Mc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(qc(this,!0,null,t.a),Oe()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){qc(t,s,e,null)})).o((function(e){qc(t,s,null,e)}))}(this,t,e):Se(new C("invalid-auth-event")):(qc(this,!1,null,null),Oe())}else Se(new C("invalid-auth-event"))},Mc.prototype.ra=function(){var t=this;return new _e((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new C("timeout");t.a&&t.a.cancel(),t.a=Cn(Sc.get()).then((function(){t.b||(t.g=!0,qc(t,!0,null,e))}))}(t))}))},Gc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Oe()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Se(new C("invalid-auth-event"))}else Se(new C("invalid-auth-event"))},Vc.prototype.confirm=function(t){return t=Do(this.verificationId,t),this.a(t)};var Wc="mfaInfo",Hc="mfaPendingCredential";function Yc(t,e,n,r){C.call(this,"multi-factor-auth-required",r,e),this.b=new zc(t,e,n),zr(this,"resolver",this.b)}function Xc(t,e,n){if(t&&p(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Yc(e,t.serverResponse,n,t.message)}catch(r){}return null}function $c(){}function Jc(t){zr(this,"factorId",t.fa),this.a=t}function Zc(t){if(Jc.call(this,t),this.a.fa!=xo.PROVIDER_ID)throw new C("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function tl(t,e){for(var n in Ye.call(this,t),e)this[n]=e[n]}function el(t,e){this.a=t,this.b=[],this.c=_(this.yc,this),un(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&V(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ti]=t.uid),t.displayName&&(r[Jr]=t.displayName),t.enrollmentTime&&(r[Zr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ei]=t.phoneNumber);try{e=new ni(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),nl(this,n)}function nl(t,e){t.b=e,zr(t,"enrolledFactors",e)}function rl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function il(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function ol(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function al(t,e){t.b=qi(e[za]||""),t.a=e.refreshToken,ol(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function sl(t,e){this.a=t||null,this.b=e||null,Wr(this,{lastSignInTime:qr(e||null),creationTime:qr(t||null)})}function ul(t,e,n,r,i,o){Wr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function cl(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Pt.default.SDK_VERSION?Er(Pt.default.SDK_VERSION):null;this.a=new Ba(this.l,P(O),r),(this.u=t.emulatorConfig||null)&&Ja(this.a,this.u),this.h=new il(this.a),yl(this,e[za]),al(this.h,e),zr(this,"refreshToken",this.h.a),wl(this,n||{}),_n.call(this),this.P=!1,this.s&&Sr()&&(this.b=jc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new rl((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=_(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){ll(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){dl(i,t.f)},this.ja=null,this.S=new el(this,n),zr(this,"multiFactor",this.S)}function ll(t,e){t.u=e,Ja(t.a,e),t.b&&(e=t.b,t.b=jc(t.s,t.l,t.m,t.u),t.P&&(kc(e,t),Cc(t.b,t)))}function hl(t,e){t.qa&&hn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&un(e,"languageCodeChanged",t.Pa)}function fl(t,e){t.$&&hn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&un(e,"emulatorConfigChanged",t.Ba)}function dl(t,e){t.aa=e,ts(t.a,Pt.default.SDK_VERSION?Er(Pt.default.SDK_VERSION,t.aa):null)}function pl(t,e){t.ja&&hn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&un(e,"frameworkChanged",t.Oa)}function gl(t){try{return Pt.default.app(t.m).auth()}catch(e){throw new C("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function ml(t){t.J||t.D.b||(t.D.start(),hn(t,"tokenChanged",t.ba),un(t,"tokenChanged",t.ba))}function vl(t){hn(t,"tokenChanged",t.ba),t.D.stop()}function yl(t,e){t.Aa=e,zr(t,"_lat",e)}function bl(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Ae(e).then((function(){return t}))}function _l(t){t.b&&!t.P&&(t.P=!0,Cc(t.b,t))}function wl(t,e){Wr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new sl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Il(){}function Tl(t){return Oe().then((function(){if(t.J)throw new C("app-deleted")}))}function El(t){return K(t.providerData,(function(t){return t.providerId}))}function Cl(t,e){e&&(kl(t,e.providerId),t.providerData.push(e))}function kl(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function Ol(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&zr(t,e,n)}function Sl(t,e){t!=e&&(Wr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),zr(t,"metadata",e.metadata?function(t){return new sl(t.a,t.b)}(e.metadata):new sl),V(e.providerData,(function(e){Cl(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),zr(t,"refreshToken",t.h.a),nl(t.S,e.S.b))}function Rl(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return Xs(t.a,Os,{idToken:e}).then(_(t.Kc,t))}(t,e).then((function(){return n||Ol(t,"isAnonymous",!1),e}))}))}function Al(t,e){e[za]&&t.Aa!=e[za]&&(al(t.h,e),t.dispatchEvent(new tl("tokenChanged")),yl(t,e[za]),Ol(t,"refreshToken",t.h.a))}function Pl(t,e){return Rl(t).then((function(){if(W(El(t),e))return bl(t).then((function(){throw new C("provider-already-linked")}))}))}function Nl(t,e,n){return Hr({user:t,credential:jo(e),additionalUserInfo:e=zi(e),operationType:n})}function xl(t,e){return Al(t,e),t.reload().then((function(){return t}))}function Dl(t,e,n,r,i){if(!Sr())return Se(new C("operation-not-supported-in-this-environment"));if(t.i&&!i)return Se(t.i);var o=Ki(n.providerId),a=jr(t.uid+":::"),s=null;(!Pr()||vr())&&t.s&&n.isOAuthProvider&&(s=hu(t.s,t.l,t.m,e,n,null,a,Pt.default.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=fr(s,o&&o.va,o&&o.ua);return r=r().then((function(){if(Ml(t),!i)return t.I().then((function(){}))})).then((function(){return Rc(t.b,u,e,n,a,!!s,t.tenantId)})).then((function(){return new _e((function(n,r){t.na(e,null,new C("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Nc(t.b,t,e,u,a)}))})).then((function(t){return u&&hr(u),t?Hr(t):null})).o((function(t){throw u&&hr(u),t})),Ll(t,r,i)}function jl(t,e,n,r,i){if(!Sr())return Se(new C("operation-not-supported-in-this-environment"));if(t.i&&!i)return Se(t.i);var o=null,a=jr(t.uid+":::");return r=r().then((function(){if(Ml(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,bl(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(ql,t.w(),e.a)),e})).then((function(){return Pc(t.b,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return Gl(t.ha);throw o})).then((function(){if(o)throw o})),Ll(t,r,i)}function Ml(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new C("internal-error");throw new C("auth-domain-config-required")}}function Ll(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Se(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new tl("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){H(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Xc(e.w(),gl(t),_(t.jc,t))),n||e}))}function Fl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[za]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new cl(e,n,t);return t.providerData&&V(t.providerData,(function(t){t&&Cl(i,Hr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Ul(t){this.a=t,this.b=Wu()}zc.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=pt(e.f);return delete n[Wc],delete n[Hc],mt(n,t),e.g(n)}))},T(Yc,C),$c.prototype.tb=function(t,e,n){return e.type==ro?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),mt(n,{phoneVerificationInfo:No(t.a)}),Xs(e,Cs,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return mt(n={mfaPendingCredential:n},{phoneVerificationInfo:No(t.a)}),Xs(e,ks,n)}))}(this,t,e)},T(Jc,$c),T(Zc,Jc),T(tl,Ye),(t=el.prototype).yc=function(t){nl(this,function(t){var e=[];return V(t.mfaInfo||[],(function(t){(t=$r(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new no(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Al(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return Xs(r,Ys,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=B(e.b,(function(t){return t.uid!=n}));return nl(e,r),Al(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(t){return t.w()}))}}},rl.prototype.start=function(){this.a=this.c,function t(e,n){e.stop(),e.b=Cn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(e,n)).then((function(){return function(){var t=a.document,e=null;return Ur()||!t?Oe():new _e((function(n){e=function(){Ur()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return e.h()})).then((function(){t(e,!0)})).o((function(n){e.i(n)&&t(e,!1)}))}(this,!0)},rl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},il.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},il.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Se(new C("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new _e((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?es(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(Js(t)):t.access_token&&t.refresh_token?n(t):r(new C("internal-error")):r(new C("network-request-failed"))}),"POST",Xn(e).toString(),t.g,t.m.get()):r(new C("internal-error"))}))}(t.f,e).then((function(e){return t.b=qi(e.access_token),t.a=e.refresh_token,ol(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Oe(null):Oe({accessToken:this.b.toString(),refreshToken:this.a})},sl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},T(cl,_n),cl.prototype.xa=function(t){this.za=t,$a(this.a,t)},cl.prototype.la=function(){return this.za},cl.prototype.Ga=function(){return $(this.aa)},cl.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},zr(cl.prototype,"providerId","firebase"),(t=cl.prototype).reload=function(){var t=this;return Ll(this,Tl(this).then((function(){return Rl(t).then((function(){return bl(t)})).then(Il)})))},t.oc=function(t){return this.I(t).then((function(t){return new Kc(t)}))},t.I=function(t){var e=this;return Ll(this,Tl(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new C("internal-error");return t.accessToken!=e.Aa&&(yl(e,t.accessToken),e.dispatchEvent(new tl("tokenChanged"))),Ol(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new C("internal-error");wl(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,(function(t){return new ul(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Cl(this,e[n]);Ol(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new tl("userReloaded",{hd:t}))},t.Lc=function(t){return Br("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Ll(this,t.c(this.a,this.uid).then((function(t){return Al(e,t),n=Nl(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Br("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return Ll(this,Pl(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Nl(e,t,"link"),xl(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Ll(this,Pl(this,"phone").then((function(){return Bc(gl(n),t,e,_(n.rb,n))})))},t.Mc=function(t,e){var n=this;return Ll(this,Oe().then((function(){return Bc(gl(n),t,e,_(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return Ll(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Al(e,t),e.reload()})))},t.ed=function(t){var e=this;return Ll(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Al(e,t),e.reload()})))},t.Db=function(t){var e=this;return Ll(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Al(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Tl(this);var e=this;return Ll(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Al(e,t),Ol(e,"displayName",t.displayName||null),Ol(e,"photoURL",t.photoUrl||null),V(e.providerData,(function(t){"password"===t.providerId&&(zr(t,"displayName",e.displayName),zr(t,"photoURL",e.photoURL))})),bl(e)})).then(Il))},t.cd=function(t){var e=this;return Ll(this,Rl(this).then((function(n){return W(El(e),t)?function(t,e,n){return Xs(t,Is,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return V(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),V(El(e),(function(t){n[t]||kl(e,t)})),n[xo.PROVIDER_ID]||zr(e,"phoneNumber",null),bl(e)})):bl(e).then((function(){throw new C("no-such-provider")}))})))},t.delete=function(){var t=this;return Ll(this,this.I().then((function(e){return Xs(t.a,ws,{idToken:e})})).then((function(){t.dispatchEvent(new tl("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");hl(t,null),fl(t,null),pl(t,null),t.N=[],t.J=!0,vl(t),zr(t,"refreshToken",null),t.b&&kc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Mb,this):null},t.Ec=function(t){var e=this;return Dl(this,"linkViaPopup",t,(function(){return Pl(e,t.providerId).then((function(){return bl(e)}))}),!1)},t.Nc=function(t){return Dl(this,"reauthViaPopup",t,(function(){return Oe()}),!0)},t.Fc=function(t){var e=this;return jl(this,"linkViaRedirect",t,(function(){return Pl(e,t.providerId)}),!1)},t.Oc=function(t){return jl(this,"reauthViaRedirect",t,(function(){return Oe()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ll(this,this.I().then((function(n){return ps(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Nl(i,t,"link"),xl(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ll(this,Oe().then((function(){return ao(gs(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Nl(i,t,"reauthenticate"),Al(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return Ll(this,this.I().then((function(e){return n=e,void 0===t||dt(t)?{}:Li(new Oi(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return Ll(this,this.I().then((function(t){return r=t,void 0===e||dt(e)?{}:Li(new Oi(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Ll(this,t=ao(Oe(t),n.uid).then((function(t){return e=Nl(n,t,"reauthenticate"),Al(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&mt(t,this.metadata.w()),V(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),mt(t,this.S.w()),t};var ql={name:"redirectUser",F:"session"};function Gl(t){return Xu(t.b,ql,t.a)}function Ql(t){this.a=t,this.b=Wu(),this.c=null,this.f=function(t){var e=Kl("local"),n=Kl("session"),r=Kl("none");return function(t,e,n){var r=Yu(e,n),i=Hu(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Dr(a.localStorage.getItem(r))}catch(u){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Bl,t.a).then((function(t){return t?Kl(t):e}))}))}))})).then((function(e){return t.c=e,Vl(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Kl("local"),this.a,_(this.g,this))}function Vl(t,e){var n,r=[];for(n in Ku)Ku[n]!==e&&r.push(Xu(t.b,Kl(Ku[n]),t.a));return r.push(Xu(t.b,Bl,t.a)),function(t){return new _e((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Re(t[s],w(o,s),a);else e(i)}))}(r)}Ql.prototype.g=function(){var t=this,e=Kl("local");Yl(this,(function(){return Oe().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Vl(t,"local").then((function(){t.c=e}))}))}))};var Bl={name:"persistence",F:"session"};function Kl(t){return{name:"authUser",F:t}}function zl(t,e){return Yl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function Wl(t){return Yl(t,(function(){return Xu(t.b,t.c,t.a)}))}function Hl(t,e,n){return Yl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Fl(t||{})}))}))}function Yl(t,e){return t.f=t.f.then(e,e),t.f}function Xl(t){if(this.l=!1,zr(this,"settings",new Qc),zr(this,"app",t),!ih(this).options||!ih(this).options.apiKey)throw new C("invalid-api-key");t=Pt.default.SDK_VERSION?Er(Pt.default.SDK_VERSION):null,this.a=new Ba(ih(this).options&&ih(this).options.apiKey,P(O),t),this.P=[],this.s=[],this.N=[],this.Pa=Pt.default.INTERNAL.createSubscribe(_(this.zc,this)),this.W=void 0,this.ib=Pt.default.INTERNAL.createSubscribe(_(this.Ac,this)),nh(this,null),this.i=new Ql(ih(this).options.apiKey+":"+ih(this).name),this.D=new Ul(ih(this).options.apiKey+":"+ih(this).name),this.$=uh(this,function(t){var e=ih(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(ql,t.a).then((function(t){return t&&e&&(t.authDomain=e),Fl(t||{})}))}(t.D,ih(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Gl(t.D)}));return uh(t,e)}(t).then((function(){return Hl(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return zl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:Wl(t.i)}))):null})).then((function(e){nh(t,e||null)}));return uh(t,n)}(this)),this.h=uh(this,function(t){return t.$.then((function(){return eh(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Kl("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.qa=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(t){var e=ih(t).options.authDomain,n=ih(t).options.apiKey;e&&Sr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=jc(e,n,ih(t).name,t.R),Cc(t.b,t),oh(t)&&_l(oh(t)),t.m){_l(t.m);var r=t.m;r.xa(t.la()),hl(r,t),dl(r=t.m,t.J),pl(r,t),ll(r=t.m,t.R),fl(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,_n.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Fn(this.R.url);t=Hr({protocol:t.c,host:t.a,port:t.g,options:Hr({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function $l(t){Ye.call(this,"languageCodeChanged"),this.h=t}function Jl(t){Ye.call(this,"emulatorConfigChanged"),this.c=t}function Zl(t){Ye.call(this,"frameworkChanged"),this.f=t}function th(t){return t.Oa||Se(new C("auth-domain-config-required"))}function eh(t){if(!Sr())return Se(new C("operation-not-supported-in-this-environment"));var e=th(t).then((function(){return t.b.ra()})).then((function(t){return t?Hr(t):null}));return uh(t,e)}function nh(t,e){oh(t)&&(function(t,e){Y(t.W,(function(t){return t==e}))}(oh(t),t.Ba),hn(oh(t),"tokenChanged",t.qa),hn(oh(t),"userDeleted",t.za),hn(oh(t),"userInvalidated",t.Aa),vl(oh(t))),e&&(e.W.push(t.Ba),un(e,"tokenChanged",t.qa),un(e,"userDeleted",t.za),un(e,"userInvalidated",t.Aa),0<t.u&&ml(e)),zr(t,"currentUser",e),e&&(e.xa(t.la()),hl(e,t),dl(e,t.J),pl(e,t),ll(e,t.R),fl(e,t))}function rh(t,e){var n=null,r=null;return uh(t,e.then((function(e){return n=jo(e),r=zi(e),function(t,e){var n={};return n.apiKey=ih(t).options.apiKey,n.authDomain=ih(t).options.authDomain,n.appName=ih(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new cl(t,e);return n&&(i.ha=n),r&&dl(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return oh(t)&&e.uid==oh(t).uid?(Sl(oh(t),e),t.da(e)):(nh(t,e),_l(e),t.da(e))})).then((function(){sh(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=Xc(e.w(),t,_(t.kc,t))),n||e})).then((function(){return Hr({user:oh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function ih(t){return t.app}function oh(t){return t.currentUser}function ah(t){return oh(t)&&oh(t)._lat||null}function sh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](ah(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](ah(t))}}function uh(t,e){return t.P.push(e),e.oa((function(){H(t.P,e)})),e}function ch(){}function lh(){this.a={},this.b=1e12}Ql.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new C("invalid-persistence-type"),n=new C("unsupported-persistence-type");t:{for(r in Ku)if(Ku[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(br()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Eu()&&"none"!==t)throw n;break;default:if(!Or()&&"none"!==t)throw n}}(t),Yl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Vl(n,t)})).then((function(){if(n.c=Kl(t),e)return n.b.set(n.c,e,n.a)})):Oe()}))},T(Xl,_n),T($l,Ye),T(Jl,Ye),T(Zl,Ye),(t=Xl.prototype).yb=function(t){return uh(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,$a(this.a,this.aa),this.dispatchEvent(new $l(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new C("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&gr().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,Ja(this.a,this.R),this.dispatchEvent(new Jl(this.R))}},t.Gc=function(t){this.J.push(t),ts(this.a,Pt.default.SDK_VERSION?Er(Pt.default.SDK_VERSION,this.J):null),this.dispatchEvent(new Zl(this.J))},t.Ga=function(){return $(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:ih(this).options.apiKey,authDomain:ih(this).options.authDomain,appName:ih(this).name,currentUser:oh(this)&&oh(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return rh(i,ds(i.a,o))}))},t.Xc=function(t){if(!Sr())return Se(new C("operation-not-supported-in-this-environment"));var e=this,n=Ki(t.providerId),r=jr(),i=null;(!Pr()||vr())&&ih(this).options.authDomain&&t.isOAuthProvider&&(i=hu(ih(this).options.authDomain,ih(this).options.apiKey,ih(this).name,"signInViaPopup",t,null,r,Pt.default.SDK_VERSION||null,null,null,this.T(),this.R));var o=fr(i,n&&n.va,n&&n.ua);return uh(this,n=th(this).then((function(n){return Rc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new _e((function(t,n){e.na("signInViaPopup",null,new C("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Nc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&hr(o),t?Hr(t):null})).o((function(t){throw o&&hr(o),t})))},t.Yc=function(t){if(!Sr())return Se(new C("operation-not-supported-in-this-environment"));var e=this;return uh(this,th(this).then((function(){return function(t){return Yl(t,(function(){return t.b.set(Bl,t.c.F,t.a)}))}(e.i)})).then((function(){return Pc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.ra=function(){var t=this;return eh(this).then((function(e){return t.b&&Fc(t.b.b),e})).o((function(e){throw t.b&&Fc(t.b.b),e}))},t.dd=function(t){if(!t)return Se(new C("null-user"));if(this.S!=t.tenantId)return Se(new C("tenant-id-mismatch"));var e=this,n={};n.apiKey=ih(this).options.apiKey,n.authDomain=ih(this).options.authDomain,n.appName=ih(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[za]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new cl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&dl(e,r),Sl(e,t),e}(t,n,e.D,e.Ga());return uh(this,this.h.then((function(){if(ih(e).options.apiKey!=t.l)return r.reload()})).then((function(){return oh(e)&&t.uid==oh(e).uid?(Sl(oh(e),t),e.da(t)):(nh(e,r),_l(r),e.da(r))})).then((function(){sh(e)})))},t.Bb=function(){var t=this;return uh(this,this.h.then((function(){return t.b&&Fc(t.b.b),oh(t)?(nh(t,null),Wl(t.i).then((function(){sh(t)}))):Oe()})))},t.Zc=function(){var t=this;return Hl(this.i,ih(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=oh(t)&&e){n=oh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Sl(oh(t),e),oh(t).I();(oh(t)||e)&&(nh(t,e),e&&(_l(e),e.ha=t.D),t.b&&Cc(t.b,t),sh(t))}}))},t.da=function(t){return zl(this.i,t)},t.mc=function(){sh(this),this.da(oh(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return rh(e,Oe(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(oh(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),uh(t,t.h.then((function(){!t.l&&W(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(ah(t)))})))}(this,(function(){t.next(oh(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(oh(r)):"function"==typeof t.next&&t.next(oh(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(oh(r)):"function"==typeof t.next&&t.next(oh(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return uh(this,this.h.then((function(){return oh(e)?oh(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return rh(e,Xs(e.a,Bs,{token:t}))})).then((function(t){var n=t.user;return Ol(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return rh(n,Xs(n.a,Ks,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return rh(n,Xs(n.a,bs,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return rh(e,t.ka(e.a))}))},t.Sc=function(t){return Br("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=oh(t);if(e&&e.isAnonymous){var n=Hr({providerId:null,isNewUser:!1});return Hr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return rh(t,t.a.Ab()).then((function(e){var n=e.user;return Ol(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return oh(this)&&oh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&oh(this)&&ml(oh(this))},t.Pc=function(t){var e=this;V(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&oh(this)&&vl(oh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),uh(this,this.h.then((function(){e.l||W(e.s,t)&&t(ah(e))})))},t.removeAuthTokenListener=function(t){Y(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Kl("local"),t.a,this.ja),this.b&&(kc(this.b,this),Fc(this.b.b)),Promise.resolve()},t.hc=function(t){return uh(this,function(t,e){return Xs(t,_s,{identifier:e,continueUri:Rr()?ur():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Ro(t)},t.xb=function(t,e){var n=this;return uh(this,Oe().then((function(){var t=new Oi(e);if(!t.c)throw new C("argument-error",Ai+" must be true when sending sign in link to email");return Li(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return uh(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return uh(this,this.a.Sa(t).then((function(t){return new ri(t)})))},t.kb=function(t){return uh(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return uh(this,Oe().then((function(){return void 0===e||dt(e)?{}:Li(new Oi(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return uh(this,Bc(this,t,e,_(this.ab,this)))},t.Vc=function(t,e){var n=this;return uh(this,Oe().then((function(){var r=e||ur(),i=So(t,r);if(!(r=Ro(r)))throw new C("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new C("tenant-id-mismatch");return n.ab(i)})))},ch.prototype.render=function(){},ch.prototype.reset=function(){},ch.prototype.getResponse=function(){},ch.prototype.execute=function(){};var hh=null;function fh(t,e){return(e=dh(e))&&t.a[e]||null}function dh(t){return(t=void 0===t?1e12:t)?t.toString():null}function ph(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ue(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():un(this.f,"click",this.i)}function gh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function mh(){}function vh(){}lh.prototype.render=function(t,e){return this.a[this.b.toString()]=new ph(t,e),this.b++},lh.prototype.reset=function(t){var e=fh(this,t);t=dh(t),e&&t&&(e.delete(),delete this.a[t])},lh.prototype.getResponse=function(t){return(t=fh(this,t))?t.getResponse():null},lh.prototype.execute=function(t){(t=fh(this,t))&&t.execute()},ph.prototype.getResponse=function(){return gh(this),this.b},ph.prototype.execute=function(){gh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},ph.prototype.delete=function(){gh(this),this.g=!0,clearTimeout(this.a),this.a=null,hn(this.f,"click",this.i)},zr(mh,"FACTOR_ID","phone"),vh.prototype.g=function(){return hh||(hh=new lh),Oe(hh)},vh.prototype.c=function(){};var yh=null;function bh(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var _h=new yt(It,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),wh=new Fr(3e4,6e4);bh.prototype.g=function(t){var e=this;return new _e((function(n,r){var i=setTimeout((function(){r(new C("network-request-failed"))}),wh.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new C("internal-error"));delete a[e.a]},Oe(La(kt(_h,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new C("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},bh.prototype.c=function(){this.b--};var Ih=null;function Th(t,e,n,r,i,o,s){if(zr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s?(yh||(yh=new vh),s=yh):(Ih||(Ih=new bh),s=Ih),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[kh])throw new C("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Oh],!a.document)throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ue(e)||!this.i&&ue(e).hasChildNodes())throw new C("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Ba(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Eh];this.a[Eh]=function(t){if(Sh(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=kr(c,a);"function"==typeof e&&e(t)}};var l=this.a[Ch];this.a[Ch]=function(){if(Sh(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=kr(l,a);"function"==typeof t&&t()}}}var Eh="callback",Ch="expired-callback",kh="sitekey",Oh="size";function Sh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function Rh(t,e){return t.h.push(e),e.oa((function(){H(t.h,e)})),e}function Ah(t){if(t.J)throw new C("internal-error","RecaptchaVerifier instance has been destroyed.")}function Ph(t,e,n){var r=!1;try{this.b=n||Pt.default.app()}catch(a){throw new C("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new C("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(a){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(a){}o=Pt.default.SDK_VERSION?Er(Pt.default.SDK_VERSION,o):null,Th.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,P(O),r)}function Nh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new C("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=xh.length)throw new C("internal-error","Argument validator received an unsupported number of arguments.");n=xh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new C("argument-error",t+" failed: "+r)}(t=Th.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Rh(this,Oe().then((function(){if(Rr()&&!yr())return gr();throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,Xs(t.s,xs,{})})).then((function(e){t.a[kh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Ah(this);var t=this;return Rh(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=ue(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!se&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Bt(a.name),'"'),a.type){o.push(' type="',Bt(a.type),'"');var s={};mt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=pe(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):ce(o,a)),2<r.length&&de(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Ah(this);var t=this;return Rh(this,this.render().then((function(e){return new _e((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Ah(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ah(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ue(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},T(Ph,Th);var xh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Dh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function jh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Mh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:p}}function Lh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Fh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Uh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){return!!e&&!(!e.ka||t&&e.providerId!==t)}}}function qh(t,e){return p(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Gh(t){return p(t)&&"string"==typeof t.uid}function Qh(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Vh(t,e){for(var n in e){var r=e[n].name;t[r]=zh(r,t[n],e[n].j)}}function Bh(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w((function(t){return this[t]}),n),set:w((function(t,e,n,r){Nh(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function Kh(t,e,n,r){t[e]=zh(e,n,r)}function zh(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Nh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Vh(Xl.prototype,{kb:{name:"applyActionCode",j:[Dh("code")]},Sa:{name:"checkActionCode",j:[Dh("code")]},ob:{name:"confirmPasswordReset",j:[Dh("code"),Dh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Dh("email"),Dh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Dh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Dh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Qh(Mh(),Lh(),"nextOrObserver"),Lh("opt_error",!0),Lh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Qh(Mh(),Lh(),"nextOrObserver"),Lh("opt_error",!0),Lh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Dh("email"),Qh(Mh("opt_actionCodeSettings",!0),Fh(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Dh("email"),Mh("actionCodeSettings")]},yb:{name:"setPersistence",j:[Dh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Uh()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Uh()]},Tc:{name:"signInWithCustomToken",j:[Dh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Dh("email"),Dh("password")]},Vc:{name:"signInWithEmailLink",j:[Dh("email"),Dh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Dh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Qh({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof cl)}},Fh(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Dh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Dh("url"),Mh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Dh("code")]}}),Bh(Xl.prototype,{lc:{name:"languageCode",lb:Qh(Dh(),Fh(),"languageCode")},ti:{name:"tenantId",lb:Qh(Dh(),Fh(),"tenantId")}}),(Xl.Persistence=Ku).LOCAL="local",Xl.Persistence.SESSION="session",Xl.Persistence.NONE="none",Vh(cl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[jh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[jh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Uh()]},rb:{name:"linkWithCredential",j:[Uh()]},Dc:{name:"linkWithPhoneNumber",j:[Dh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Uh()]},ub:{name:"reauthenticateWithCredential",j:[Uh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Dh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Qh(Mh("opt_actionCodeSettings",!0),Fh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Dh(null,!0)]},cd:{name:"unlink",j:[Dh("provider")]},Cb:{name:"updateEmail",j:[Dh("email")]},Db:{name:"updatePassword",j:[Dh("password")]},ed:{name:"updatePhoneNumber",j:[Uh("phone")]},Eb:{name:"updateProfile",j:[Mh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Dh("email"),Qh(Mh("opt_actionCodeSettings",!0),Fh(null,!0),"opt_actionCodeSettings",!0)]}}),Vh(lh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Vh(ch.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Vh(_e.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Bh(Qc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:jh("appVerificationDisabledForTesting")}}),Vh(Vc.prototype,{confirm:{name:"confirm",j:[Dh("verificationCode")]}}),Kh(oo,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[fo,ko,Po,co],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Qh(Dh(),Mh(),"json")]),Kh(Oo,"credential",(function(t,e){return new Co(t,e)}),[Dh("email"),Dh("password")]),Vh(Co.prototype,{w:{name:"toJSON",j:[Dh(null,!0)]}}),Vh(vo.prototype,{Ca:{name:"addScope",j:[Dh("scope")]},Ka:{name:"setCustomParameters",j:[Mh("customOAuthParameters")]}}),Kh(vo,"credential",yo,[Qh(Dh(),Mh(),"token")]),Kh(Oo,"credentialWithLink",So,[Dh("email"),Dh("emailLink")]),Vh(bo.prototype,{Ca:{name:"addScope",j:[Dh("scope")]},Ka:{name:"setCustomParameters",j:[Mh("customOAuthParameters")]}}),Kh(bo,"credential",_o,[Qh(Dh(),Mh(),"token")]),Vh(wo.prototype,{Ca:{name:"addScope",j:[Dh("scope")]},Ka:{name:"setCustomParameters",j:[Mh("customOAuthParameters")]}}),Kh(wo,"credential",Io,[Qh(Dh(),Qh(Mh(),Fh()),"idToken"),Qh(Dh(),Fh(),"accessToken",!0)]),Vh(To.prototype,{Ka:{name:"setCustomParameters",j:[Mh("customOAuthParameters")]}}),Kh(To,"credential",Eo,[Qh(Dh(),Mh(),"token"),Dh("secret",!0)]),Vh(mo.prototype,{Ca:{name:"addScope",j:[Dh("scope")]},credential:{name:"credential",j:[Qh(Dh(),Qh(Mh(),Fh()),"optionsOrIdToken"),Qh(Dh(),Fh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Mh("customOAuthParameters")]}}),Vh(lo.prototype,{w:{name:"toJSON",j:[Dh(null,!0)]}}),Vh(so.prototype,{w:{name:"toJSON",j:[Dh(null,!0)]}}),Kh(xo,"credential",Do,[Dh("verificationId"),Dh("verificationCode")]),Vh(xo.prototype,{gb:{name:"verifyPhoneNumber",j:[Qh(Dh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?qh(t.session,ro)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?qh(t.session,io)&&Gh(t.multiFactorHint):t.session&&t.multiFactorUid?qh(t.session,io)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Vh(Ao.prototype,{w:{name:"toJSON",j:[Dh(null,!0)]}}),Vh(C.prototype,{toJSON:{name:"toJSON",j:[Dh(null,!0)]}}),Vh(Vo.prototype,{toJSON:{name:"toJSON",j:[Dh(null,!0)]}}),Vh(Qo.prototype,{toJSON:{name:"toJSON",j:[Dh(null,!0)]}}),Vh(Yc.prototype,{toJSON:{name:"toJSON",j:[Dh(null,!0)]}}),Vh(zc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),Vh(el.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},Dh("displayName",!0)]},bd:{name:"unenroll",j:[Qh({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Gh},Dh(),"multiFactorInfoIdentifier")]}}),Vh(Ph.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Kh(yi,"parseLink",ki,[Dh("link")]),Kh(mh,"assertion",(function(t){return new Zc(t)}),[Uh("phone")]),function(){if(void 0===Pt.default||!Pt.default.INTERNAL||!Pt.default.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ai,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:oi,VERIFY_AND_CHANGE_EMAIL:si,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Xl,AuthCredential:oo,Error:C};Kh(t,"EmailAuthProvider",Oo,[]),Kh(t,"FacebookAuthProvider",vo,[]),Kh(t,"GithubAuthProvider",bo,[]),Kh(t,"GoogleAuthProvider",wo,[]),Kh(t,"TwitterAuthProvider",To,[]),Kh(t,"OAuthProvider",mo,[Dh("providerId")]),Kh(t,"SAMLAuthProvider",go,[Dh("providerId")]),Kh(t,"PhoneAuthProvider",xo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof Xl)}}]),Kh(t,"RecaptchaVerifier",Ph,[Qh(Dh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Mh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Pt.default.app.App)}}]),Kh(t,"ActionCodeURL",yi,[]),Kh(t,"PhoneMultiFactorGenerator",mh,[]),Pt.default.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Xl(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),Pt.default.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.nc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Pt.default.registerVersion("@firebase/auth","0.16.8"),Pt.default.INTERNAL.extendNamespace({User:cl})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{}),n("6Uf2");var Nt=n("mrSG"),xt=n("qOnz"),Dt=n("q/0M"),jt=function(t,e){return(jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Mt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Lt,Ft="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ut=Ut||{},qt=Ft||self;function Gt(){}function Qt(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Vt(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Bt="closure_uid_"+(1e9*Math.random()>>>0),Kt=0;function zt(t,e,n){return t.call.apply(t.bind,arguments)}function Wt(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Ht(t,e,n){return(Ht=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zt:Wt).apply(null,arguments)}function Yt(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Xt(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function $t(){this.s=this.s,this.o=this.o}var Jt={};$t.prototype.s=!1,$t.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Bt)&&t[Bt]||(t[Bt]=++Kt)}(this);delete Jt[t]}},$t.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Zt=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},te=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ee(t){return Array.prototype.concat.apply([],arguments)}function ne(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function re(t){return/^[\s\xa0]*$/.test(t)}var ie,oe=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ae(t,e){return-1!=t.indexOf(e)}function se(t,e){return t<e?-1:t>e?1:0}t:{var ue=qt.navigator;if(ue){var ce=ue.userAgent;if(ce){ie=ce;break t}}ie=""}function le(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function he(t){var e={};for(var n in t)e[n]=t[n];return e}var fe="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<fe.length;o++)n=fe[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function pe(t){return pe[" "](t),t}pe[" "]=Gt;var ge,me,ve=ae(ie,"Opera"),ye=ae(ie,"Trident")||ae(ie,"MSIE"),be=ae(ie,"Edge"),_e=be||ye,we=ae(ie,"Gecko")&&!(ae(ie.toLowerCase(),"webkit")&&!ae(ie,"Edge"))&&!(ae(ie,"Trident")||ae(ie,"MSIE"))&&!ae(ie,"Edge"),Ie=ae(ie.toLowerCase(),"webkit")&&!ae(ie,"Edge");function Te(){var t=qt.document;return t?t.documentMode:void 0}t:{var Ee="",Ce=(me=ie,we?/rv:([^\);]+)(\)|;)/.exec(me):be?/Edge\/([\d\.]+)/.exec(me):ye?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(me):Ie?/WebKit\/(\S+)/.exec(me):ve?/(?:Version)[ \/]?(\S+)/.exec(me):void 0);if(Ce&&(Ee=Ce?Ce[1]:""),ye){var ke=Te();if(null!=ke&&ke>parseFloat(Ee)){ge=String(ke);break t}}ge=Ee}var Oe={};var Se=qt.document&&ye&&(Te()||parseInt(ge,10))||void 0,Re=function(){if(!qt.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{qt.addEventListener("test",Gt,e),qt.removeEventListener("test",Gt,e)}catch(n){}return t}();function Ae(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Pe(t,e){if(Ae.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(we){t:{try{pe(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ne[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Pe.Z.h.call(this)}}Ae.prototype.h=function(){this.defaultPrevented=!0},Xt(Pe,Ae);var Ne={2:"touch",3:"pen",4:"mouse"};Pe.prototype.h=function(){Pe.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var xe="closure_listenable_"+(1e6*Math.random()|0),De=0;function je(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++De,this.ca=this.fa=!1}function Me(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Le(t){this.src=t,this.g={},this.h=0}function Fe(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Zt(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Me(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Ue(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Le.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=Ue(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new je(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var qe="closure_lm_"+(1e6*Math.random()|0),Ge={};function Qe(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);return null}return r=Ye(r),e&&e[xe]?e.O(n,r,Vt(i)?!!i.capture:!!i,o):Ve(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Qe(t,e[o],n,r,i);return null}return n=Ye(n),t&&t[xe]?t.N(e,n,Vt(r)?!!r.capture:!!r,i):Ve(t,e,n,!1,r,i)}function Ve(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Vt(i)?!!i.capture:!!i,s=We(t);if(s||(t[qe]=s=new Le(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){var t=ze;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Re||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Ke(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Be(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[xe])Fe(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Ke(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=We(e))?(Fe(n,t),0==n.h&&(n.src=null,e[qe]=null)):Me(t)}}}function Ke(t){return t in Ge?Ge[t]:Ge[t]="on"+t}function ze(t,e){if(t.ca)t=!0;else{e=new Pe(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Be(t),t=n.call(r,e)}return t}function We(t){return(t=t[qe])instanceof Le?t:null}var He="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ye(t){return"function"==typeof t?t:(t[He]||(t[He]=function(e){return t.handleEvent(e)}),t[He])}function Xe(){$t.call(this),this.i=new Le(this),this.P=this,this.I=null}function $e(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Ae(e,t);else if(e instanceof Ae)e.target=e.target||t;else{var i=e;de(e=new Ae(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=Je(a,r,!0,e)&&i}if(i=Je(a=e.g=t,r,!0,e)&&i,i=Je(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Je(a=e.g=n[o],r,!1,e)&&i}function Je(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&Fe(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Xt(Xe,$t),Xe.prototype[xe]=!0,Xe.prototype.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var a=0;a<n.length;a++)t(e,n[a],r,i,o);else i=Vt(i)?!!i.capture:!!i,r=Ye(r),e&&e[xe]?(e=e.i,(n=String(n).toString())in e.g&&-1<(r=Ue(a=e.g[n],r,i,o))&&(Me(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete e.g[n],e.h--))):e&&(e=We(e))&&(n=e.g[n.toString()],e=-1,n&&(e=Ue(n,r,i,o)),(r=-1<e?n[e]:null)&&Be(r))}(this,t,e,n,r)},Xe.prototype.M=function(){if(Xe.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Me(n[r]);delete e.g[t],e.h--}}this.I=null},Xe.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Xe.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Ze=qt.JSON.stringify;function tn(){var t=cn,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var en,nn=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=rn.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),rn=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,this.g=(t=this.g).next,t.next=null):t=this.i(),t},t}())((function(){return new on}),(function(t){return t.reset()})),on=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function an(t){qt.setTimeout((function(){throw t}),0)}function sn(t,e){en||function(){var t=qt.Promise.resolve(void 0);en=function(){t.then(ln)}}(),un||(en(),un=!0),cn.add(t,e)}var un=!1,cn=new nn;function ln(){for(var t;t=tn();){try{t.h.call(t.g)}catch(n){an(n)}var e=rn;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}un=!1}function hn(t,e){Xe.call(this),this.h=t||1,this.g=e||qt,this.j=Ht(this.kb,this),this.l=Date.now()}function fn(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function dn(t,e,n){if("function"==typeof t)n&&(t=Ht(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Ht(t.handleEvent,t)}return 2147483647<Number(e)?-1:qt.setTimeout(t,e||0)}function pn(t){t.g=dn((function(){t.g=null,t.i&&(t.i=!1,pn(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Xt(hn,Xe),(Lt=hn.prototype).da=!1,Lt.S=null,Lt.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),$e(this,"tick"),this.da&&(fn(this),this.start()))}},Lt.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Lt.M=function(){hn.Z.M.call(this),fn(this),delete this.g};var gn=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}jt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:pn(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(qt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}($t);function mn(t){$t.call(this),this.h=t,this.g={}}Xt(mn,$t);var vn=[];function yn(t,e,n,r){Array.isArray(n)||(n&&(vn[0]=n.toString()),n=vn);for(var i=0;i<n.length;i++){var o=Qe(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function bn(t){le(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Be(t)}),t),t.g={}}function _n(){this.g=!0}function wn(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return Ze(n)}catch(s){return e}}(t,n)+(r?" "+r:"")}))}mn.prototype.M=function(){mn.Z.M.call(this),bn(this)},mn.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},_n.prototype.Aa=function(){this.g=!1},_n.prototype.info=function(){};var In={},Tn=null;function En(){return Tn=Tn||new Xe}function Cn(t){Ae.call(this,In.Ma,t)}function kn(t){var e=En();$e(e,new Cn(e,t))}function On(t,e){Ae.call(this,In.STAT_EVENT,t),this.stat=e}function Sn(t){var e=En();$e(e,new On(e,t))}function Rn(t,e){Ae.call(this,In.Na,t),this.size=e}function An(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return qt.setTimeout((function(){t()}),e)}In.Ma="serverreachability",Xt(Cn,Ae),In.STAT_EVENT="statevent",Xt(On,Ae),In.Na="timingevent",Xt(Rn,Ae);var Pn={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Nn={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function xn(){}function Dn(){}xn.prototype.h=null;var jn,Mn={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Ln(){Ae.call(this,"d")}function Fn(){Ae.call(this,"c")}function Un(){}function qn(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new mn(this),this.P=Qn,this.W=new hn(t=_e?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Gn}function Gn(){this.i=null,this.g="",this.h=!1}Xt(Ln,Ae),Xt(Fn,Ae),Xt(Un,xn),Un.prototype.g=function(){return new XMLHttpRequest},Un.prototype.i=function(){return{}},jn=new Un;var Qn=45e3,Vn={},Bn={};function Kn(t,e,n){t.K=1,t.v=pr(ur(e)),t.s=n,t.U=!0,zn(t,null)}function zn(t,e){t.F=Date.now(),Xn(t),t.A=ur(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),Or(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Gn,t.g=Si(t.l,n?e:null,!t.s),0<t.O&&(t.L=new gn(Ht(t.Ia,t,t.g),t.O)),yn(t.V,t.g,"readystatechange",t.gb),e=t.H?he(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),kn(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Wn(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Hn(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Yn(t,n))==Bn){4==e&&(t.o=4,Sn(14),i=!1),wn(t.j,t.m,null,"[Incomplete Response]");break}if(r==Vn){t.o=4,Sn(15),wn(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}wn(t.j,t.m,r,null),er(t,r)}Wn(t)&&r!=Bn&&r!=Vn&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,Sn(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),_i(e),e.L=!0,Sn(11))):(wn(t.j,t.m,n,"[Invalid Chunked Response]"),tr(t),Zn(t))}function Yn(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Bn:(n=Number(e.substring(n,r)),isNaN(n)?Vn:(r+=1)+n>e.length?Bn:(e=e.substr(r,n),t.C=r+n,e))}function Xn(t){t.Y=Date.now()+t.P,$n(t,t.P)}function $n(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=An(Ht(t.eb,t),e)}function Jn(t){t.B&&(qt.clearTimeout(t.B),t.B=null)}function Zn(t){0==t.l.G||t.I||Ti(t.l,t)}function tr(t){Jn(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,fn(t.W),bn(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function er(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Dr(n.i,t)))if(n.I=t.N,!t.J&&Dr(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Ii(n),hi(n)}bi(n),Sn(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=An(Ht(n.ab,n),6e3));if(1>=xr(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Ci(n,11)}else if((t.J||n.g==t)&&Ii(n),!re(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(ae(l,"spdy")||ae(l,"quic")||ae(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(jr(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,dr(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=Oi(r,r.H?r.la:null,r.W),d.J){Mr(r.i,d);var p=d,g=r.K;g&&p.setTimeout(g),p.B&&(Jn(p),Xn(p)),r.g=d}else yi(r);0<n.l.length&&pi(n)}else"stop"!=o[0]&&"close"!=o[0]||Ci(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Ci(n,7):li(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}kn(4)}catch(o){}}function nr(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Qt(t)||"string"==typeof t)te(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Qt(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Qt(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function rr(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof rr)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function ir(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];or(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)or(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function or(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Lt=qn.prototype).setTimeout=function(t){this.P=t},Lt.gb=function(t){t=t.target;var e=this.L;e&&3==oi(t)?e.l():this.Ia(t)},Lt.Ia=function(t){try{if(t==this.g)t:{var e=oi(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||_e||this.g&&(this.h.h||this.g.ga()||ai(this.g)))){this.I||4!=e||7==n||kn(8==n||0>=r?3:2),Jn(this);var i=this.g.ba();this.N=i;e:if(Wn(this)){var o=ai(this.g);t="";var a=o.length,s=4==oi(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){tr(this),Zn(this);var u="";break e}this.h.i=new qt.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!re(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,Sn(12),tr(this),Zn(this);break t}wn(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,er(this,i)}this.U?(Hn(this,e,u),_e&&this.i&&3==e&&(yn(this.V,this.W,"tick",this.fb),this.W.start())):(wn(this.j,this.m,u,null),er(this,u)),4==e&&tr(this),this.i&&!this.I&&(4==e?Ti(this.l,this):(this.i=!1,Xn(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,Sn(12)):(this.o=0,Sn(13)),tr(this),Zn(this)}}}catch(e){}},Lt.fb=function(){if(this.g){var t=oi(this.g),e=this.g.ga();this.C<e.length&&(Jn(this),Hn(this,t,e),this.i&&4!=t&&Xn(this))}},Lt.cancel=function(){this.I=!0,tr(this)},Lt.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(kn(3),Sn(17)),tr(this),this.o=2,Zn(this)):$n(this,this.Y-t)},(Lt=rr.prototype).R=function(){ir(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Lt.T=function(){return ir(this),this.g.concat()},Lt.get=function(t,e){return or(this.h,t)?this.h[t]:e},Lt.set=function(t,e){or(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Lt.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var ar=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function sr(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof sr){this.g=void 0!==e?e:t.g,cr(this,t.j),this.s=t.s,lr(this,t.i),hr(this,t.m),this.l=t.l,e=t.h;var n=new Tr;n.i=e.i,e.g&&(n.g=new rr(e.g),n.h=e.h),fr(this,n),this.o=t.o}else t&&(n=String(t).match(ar))?(this.g=!!e,cr(this,n[1]||"",!0),this.s=gr(n[2]||""),lr(this,n[3]||"",!0),hr(this,n[4]),this.l=gr(n[5]||"",!0),fr(this,n[6]||"",!0),this.o=gr(n[7]||"")):(this.g=!!e,this.h=new Tr(null,this.g))}function ur(t){return new sr(t)}function cr(t,e,n){t.j=n?gr(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function lr(t,e,n){t.i=n?gr(e,!0):e}function hr(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function fr(t,e,n){e instanceof Tr?(t.h=e,function(t,e){e&&!t.j&&(Er(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Cr(this,e),Or(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=mr(e,wr)),t.h=new Tr(e,t.g))}function dr(t,e,n){t.h.set(e,n)}function pr(t){return dr(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function gr(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function mr(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,vr),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function vr(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}sr.prototype.toString=function(){var t=[],e=this.j;e&&t.push(mr(e,yr,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(mr(e,yr,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(mr(n,"/"==n.charAt(0)?_r:br,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",mr(n,Ir)),t.join("")};var yr=/[#\/\?@]/g,br=/[#\?:]/g,_r=/[#\?]/g,wr=/[#\?@]/g,Ir=/#/g;function Tr(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Er(t){t.g||(t.g=new rr,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Cr(t,e){Er(t),e=Sr(t,e),or(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,or((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&ir(t)))}function kr(t,e){return Er(t),e=Sr(t,e),or(t.g.h,e)}function Or(t,e,n){Cr(t,e),0<n.length&&(t.i=null,t.g.set(Sr(t,e),ne(n)),t.h+=n.length)}function Sr(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Lt=Tr.prototype).add=function(t,e){Er(this),this.i=null,t=Sr(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Lt.forEach=function(t,e){Er(this),this.g.forEach((function(n,r){te(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Lt.T=function(){Er(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Lt.R=function(t){Er(this);var e=[];if("string"==typeof t)kr(this,t)&&(e=ee(e,this.g.get(Sr(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=ee(e,t[n])}return e},Lt.set=function(t,e){return Er(this),this.i=null,kr(this,t=Sr(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Lt.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Lt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var Rr=function(){return function(t,e){this.h=t,this.g=e}}();function Ar(t){this.l=t||Pr,t=qt.PerformanceNavigationTiming?0<(t=qt.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(qt.g&&qt.g.Ea&&qt.g.Ea()&&qt.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Pr=10;function Nr(t){return!!t.h||!!t.g&&t.g.size>=t.j}function xr(t){return t.h?1:t.g?t.g.size:0}function Dr(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function jr(t,e){t.g?t.g.add(e):t.h=e}function Mr(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Lr(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Mt(t.g.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.D)}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return ne(t.i)}function Fr(){}function Ur(){this.g=new Fr}function qr(t,e,n){var r=n||"";try{nr(t,(function(t,n){var i=t;Vt(t)&&(i=Ze(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(Jp){throw e.push(r+"type="+encodeURIComponent("_badmap")),Jp}}function Gr(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Qr(t){this.l=t.$b||null,this.j=t.ib||!1}function Vr(t,e){Xe.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Br,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ar.prototype.cancel=function(){var t,e;if(this.i=Lr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Mt(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Fr.prototype.stringify=function(t){return qt.JSON.stringify(t,void 0)},Fr.prototype.parse=function(t){return qt.JSON.parse(t,void 0)},Xt(Qr,xn),Qr.prototype.g=function(){return new Vr(this.l,this.j)},Qr.prototype.i=function(t){return function(){return t}}({}),Xt(Vr,Xe);var Br=0;function Kr(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function zr(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Wr(t)}function Wr(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Lt=Vr.prototype).open=function(t,e){if(this.readyState!=Br)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Wr(this)},Lt.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||qt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Lt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,zr(this)),this.readyState=Br},Lt.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Wr(this)),this.g&&(this.readyState=3,Wr(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==qt.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Kr(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Lt.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?zr(this):Wr(this),3==this.readyState&&Kr(this)}},Lt.Ua=function(t){this.g&&(this.response=this.responseText=t,zr(this))},Lt.Ta=function(t){this.g&&(this.response=t,zr(this))},Lt.ha=function(){this.g&&zr(this)},Lt.setRequestHeader=function(t,e){this.v.append(t,e)},Lt.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Lt.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)t.push((n=n.value)[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Vr.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Hr=qt.JSON.parse;function Yr(t){Xe.call(this),this.headers=new rr,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Xr,this.K=this.L=!1}Xt(Yr,Xe);var Xr="",$r=/^https?$/i,Jr=["POST","PUT"];function Zr(t){return"content-type"==t.toLowerCase()}function ti(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,ei(t),ri(t)}function ei(t){t.D||(t.D=!0,$e(t,"complete"),$e(t,"error"))}function ni(t){if(t.h&&void 0!==Ut&&(!t.C[1]||4!=oi(t)||2!=t.ba()))if(t.v&&4==oi(t))dn(t.Fa,0,t);else if($e(t,"readystatechange"),4==oi(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(ar)[1]||null;if(!o&&qt.self&&qt.self.location){var a=qt.self.location.protocol;o=a.substr(0,a.length-1)}i=!$r.test(o?o.toLowerCase():"")}e=i}if(e)$e(t,"complete"),$e(t,"success");else{t.m=6;try{var s=2<oi(t)?t.g.statusText:""}catch(u){s=""}t.j=s+" ["+t.ba()+"]",ei(t)}}finally{ri(t)}}}function ri(t,e){if(t.g){ii(t);var n=t.g,r=t.C[0]?Gt:null;t.g=null,t.C=null,e||$e(t,"ready");try{n.onreadystatechange=r}catch(Jp){}}}function ii(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(qt.clearTimeout(t.A),t.A=null)}function oi(t){return t.g?t.g.readyState:0}function ai(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Xr:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function si(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return le(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):dr(t,e,n))}function ui(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function ci(t){this.za=0,this.l=[],this.h=new _n,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=ui("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=ui("baseRetryDelayMs",5e3,t),this.$a=ui("retryDelaySeedMs",1e4,t),this.Ya=ui("forwardChannelMaxRetries",2,t),this.ra=ui("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Ar(t&&t.concurrentRequestLimit),this.Ca=new Ur,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function li(t){if(fi(t),3==t.G){var e=t.V++,n=ur(t.F);dr(n,"SID",t.J),dr(n,"RID",e),dr(n,"TYPE","terminate"),mi(t,n),(e=new qn(t,t.h,e,void 0)).K=2,e.v=pr(ur(n)),n=!1,qt.navigator&&qt.navigator.sendBeacon&&(n=qt.navigator.sendBeacon(e.v.toString(),"")),!n&&qt.Image&&((new Image).src=e.v,n=!0),n||(e.g=Si(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Xn(e)}ki(t)}function hi(t){t.g&&(_i(t),t.g.cancel(),t.g=null)}function fi(t){hi(t),t.u&&(qt.clearTimeout(t.u),t.u=null),Ii(t),t.i.cancel(),t.m&&("number"==typeof t.m&&qt.clearTimeout(t.m),t.m=null)}function di(t,e){t.l.push(new Rr(t.Za++,e)),3==t.G&&pi(t)}function pi(t){Nr(t.i)||t.m||(t.m=!0,sn(t.Ha,t),t.C=0)}function gi(t,e){var n;n=e?e.m:t.V++;var r=ur(t.F);dr(r,"SID",t.J),dr(r,"RID",n),dr(r,"AID",t.U),mi(t,r),t.o&&t.s&&si(r,t.o,t.s),n=new qn(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=vi(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),jr(t.i,n),Kn(n,r,e)}function mi(t,e){t.j&&nr({},(function(t,n){dr(e,n,t)}))}function vi(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Ht(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?a.push("ofs="+(o=i[0].h)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{qr(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function yi(t){t.g||t.u||(t.Y=1,sn(t.Ga,t),t.A=0)}function bi(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=An(Ht(t.Ga,t),Ei(t,t.A)),t.A++,0))}function _i(t){null!=t.B&&(qt.clearTimeout(t.B),t.B=null)}function wi(t){t.g=new qn(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=ur(t.oa);dr(e,"RID","rpc"),dr(e,"SID",t.J),dr(e,"CI",t.N?"0":"1"),dr(e,"AID",t.U),mi(t,e),dr(e,"TYPE","xmlhttp"),t.o&&t.s&&si(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=pr(ur(e)),n.s=null,n.U=!0,zn(n,t)}function Ii(t){null!=t.v&&(qt.clearTimeout(t.v),t.v=null)}function Ti(t,e){var n=null;if(t.g==e){Ii(t),_i(t),t.g=null;var r=2}else{if(!Dr(t.i,e))return;n=e.D,Mr(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;$e(r=En(),new Rn(r,n,e,i)),pi(t)}else yi(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(xr(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=An(Ht(t.Ha,t,e),Ei(t,t.C)),t.C++,0)))}(t,e)||2==r&&bi(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Ci(t,5);break;case 4:Ci(t,10);break;case 3:Ci(t,6);break;default:Ci(t,2)}}function Ei(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Ci(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Ht(t.jb,t);n||(n=new sr("//www.google.com/images/cleardot.gif"),qt.location&&"http"==qt.location.protocol||cr(n,"https"),pr(n)),function(t,e){var n=new _n;if(qt.Image){var r=new Image;r.onload=Yt(Gr,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Yt(Gr,n,r,"TestLoadImage: error",!1,e),r.onabort=Yt(Gr,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Yt(Gr,n,r,"TestLoadImage: timeout",!1,e),qt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else Sn(2);t.G=0,t.j&&t.j.va(e),ki(t),fi(t)}function ki(t){t.G=0,t.I=-1,t.j&&(0==Lr(t.i).length&&0==t.l.length||(t.i.i.length=0,ne(t.l),t.l.length=0),t.j.ua())}function Oi(t,e,n){var r=function(t){return t instanceof sr?ur(t):new sr(t,void 0)}(n);if(""!=r.i)e&&lr(r,e+"."+r.i),hr(r,r.m);else{var i=qt.location;r=function(t,e,n,r){var i=new sr(null,void 0);return t&&cr(i,t),e&&lr(i,e),n&&hr(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&le(t.aa,(function(t,e){dr(r,e,t)})),n=t.sa,(e=t.D)&&n&&dr(r,e,n),dr(r,"VER",t.ma),mi(t,r),r}function Si(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Yr(n&&t.Ba&&!t.qa?new Qr({ib:!0}):t.qa)).L=t.H,e}function Ri(){}function Ai(){if(ye&&!(10<=Number(Se)))throw Error("Environmental error: no available transport.")}function Pi(t,e){Xe.call(this),this.g=new ci(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!re(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!re(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new Di(this)}function Ni(t){Ln.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function xi(){Fn.call(this),this.status=1}function Di(t){this.g=t}(Lt=Yr.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():jn.g(),this.C=function(t){return t.h||(t.h=t.i())}(this.u?this.u:jn),this.g.onreadystatechange=Ht(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void ti(this,o)}t=n||"";var i=new rr(this.headers);r&&nr(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Zr,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=qt.FormData&&t instanceof qt.FormData,!(0<=Zt(Jr,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{ii(this),0<this.B&&((this.K=function(t){return ye&&function(){return t=Oe,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=oe(String(ge)).split("."),n=oe("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=se(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||se(0==o[2].length,0==a[2].length)||se(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}();var t}()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ht(this.pa,this)):this.A=dn(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){ti(this,o)}},Lt.pa=function(){void 0!==Ut&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$e(this,"timeout"),this.abort(8))},Lt.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,$e(this,"complete"),$e(this,"abort"),ri(this))},Lt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ri(this,!0)),Yr.Z.M.call(this)},Lt.Fa=function(){this.s||(this.F||this.v||this.l?ni(this):this.cb())},Lt.cb=function(){ni(this)},Lt.ba=function(){try{return 2<oi(this)?this.g.status:-1}catch(me){return-1}},Lt.ga=function(){try{return this.g?this.g.responseText:""}catch(me){return""}},Lt.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Hr(e)}},Lt.Da=function(){return this.m},Lt.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Lt=ci.prototype).ma=8,Lt.G=1,Lt.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},Lt.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new qn(this,this.h,t,void 0),n=this.s;if(this.P&&(n?de(n=he(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=vi(this,e,r),dr(i=ur(this.F),"RID",t),dr(i,"CVER",22),this.D&&dr(i,"X-HTTP-Session-Id",this.D),mi(this,i),this.o&&n&&si(i,this.o,n),jr(this.i,e),this.Ra&&dr(i,"TYPE","init"),this.ja?(dr(i,"$req",r),dr(i,"SID","null"),e.$=!0,Kn(e,i,null)):Kn(e,i,r),this.G=2}}else 3==this.G&&(t?gi(this,t):0==this.l.length||Nr(this.i)||gi(this))},Lt.Ga=function(){if(this.u=null,wi(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=An(Ht(this.bb,this),t)}},Lt.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Sn(10),hi(this),wi(this))},Lt.ab=function(){null!=this.v&&(this.v=null,hi(this),bi(this),Sn(19))},Lt.jb=function(t){t?(this.h.info("Successfully pinged google.com"),Sn(2)):(this.h.info("Failed to ping google.com"),Sn(1))},(Lt=Ri.prototype).xa=function(){},Lt.wa=function(){},Lt.va=function(){},Lt.ua=function(){},Lt.Oa=function(){},Ai.prototype.g=function(t,e){return new Pi(t,e)},Xt(Pi,Xe),Pi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),sn(Ht(t.hb,t,e))),Sn(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Oi(t,null,t.W),pi(t)},Pi.prototype.close=function(){li(this.g)},Pi.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,di(this.g,e)}else this.v?((e={}).__data__=Ze(t),di(this.g,e)):di(this.g,t)},Pi.prototype.M=function(){this.g.j=null,delete this.j,li(this.g),delete this.g,Pi.Z.M.call(this)},Xt(Ni,Ln),Xt(xi,Fn),Xt(Di,Ri),Di.prototype.xa=function(){$e(this.g,"a")},Di.prototype.wa=function(t){$e(this.g,new Ni(t))},Di.prototype.va=function(t){$e(this.g,new xi(t))},Di.prototype.ua=function(){$e(this.g,"b")},Ai.prototype.createWebChannel=Ai.prototype.g,Pi.prototype.send=Pi.prototype.u,Pi.prototype.open=Pi.prototype.m,Pi.prototype.close=Pi.prototype.close,Pn.NO_ERROR=0,Pn.TIMEOUT=8,Pn.HTTP_ERROR=6,Nn.COMPLETE="complete",Dn.EventType=Mn,Mn.OPEN="a",Mn.CLOSE="b",Mn.ERROR="c",Mn.MESSAGE="d",Xe.prototype.listen=Xe.prototype.N,Yr.prototype.listenOnce=Yr.prototype.O,Yr.prototype.getLastError=Yr.prototype.La,Yr.prototype.getLastErrorCode=Yr.prototype.Da,Yr.prototype.getStatus=Yr.prototype.ba,Yr.prototype.getResponseJson=Yr.prototype.Qa,Yr.prototype.getResponseText=Yr.prototype.ga,Yr.prototype.send=Yr.prototype.ea;var ji=Pn,Mi=Nn,Li=In,Fi=Qr,Ui=Dn,qi=Yr,Gi=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Gi.o=-1;var Qi={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Vi=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Nt.__extends)(e,t),e}(Error),Bi=new Dt.Logger("@firebase/firestore");function Ki(){return Bi.logLevel}function zi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Bi.logLevel<=Dt.LogLevel.DEBUG){var r=e.map(Yi);Bi.debug.apply(Bi,Object(Nt.__spreadArray)(["Firestore (8.8.1): "+t],r))}}function Wi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Bi.logLevel<=Dt.LogLevel.ERROR){var r=e.map(Yi);Bi.error.apply(Bi,Object(Nt.__spreadArray)(["Firestore (8.8.1): "+t],r))}}function Hi(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Bi.logLevel<=Dt.LogLevel.WARN){var r=e.map(Yi);Bi.warn.apply(Bi,Object(Nt.__spreadArray)(["Firestore (8.8.1): "+t],r))}}function Yi(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Jp){return t}}function Xi(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.8.1) INTERNAL ASSERTION FAILED: "+t;throw Wi(e),new Error(e)}function $i(t,e){t||Xi()}function Ji(t,e){return t}function Zi(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var to=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Zi(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function eo(t,e){return t<e?-1:t>e?1:0}function no(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function ro(t){return t+"\0"}var io=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Vi(Qi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Vi(Qi.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Vi(Qi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Vi(Qi.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?eo(this.nanoseconds,t.nanoseconds):eo(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),oo=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new io(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function ao(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function so(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var co=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Xi(),void 0===n?n=t.length-e:n>t.length-e&&Xi(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nt.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Vi(Qi.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(co),ho=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nt.__extends)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return ho.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Vi(Qi.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Vi(Qi.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Vi(Qi.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Vi(Qi.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(co),po=function(){function t(t){this.fields=t,t.sort(fo.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return no(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),go=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return eo(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();go.EMPTY_BYTE_STRING=new go("");var mo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vo(t){if($i(!!t),"string"==typeof t){var e=0,n=mo.exec(t);if($i(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:yo(t.seconds),nanos:yo(t.nanos)}}function yo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function bo(t){return"string"==typeof t?go.fromBase64String(t):go.fromUint8Array(t)}function _o(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function wo(t){var e=vo(t.mapValue.fields.__local_write_time__.timestampValue);return new io(e.seconds,e.nanos)}function Io(t){return null==t}function To(t){return 0===t&&1/t==-1/0}function Eo(t){return"number"==typeof t&&Number.isInteger(t)&&!To(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Co=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(lo.fromString(e))},t.fromName=function(e){return new t(lo.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===lo.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return lo.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new lo(e.slice()))},t}();function ko(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_o(t)?4:10:Xi()}function Oo(t,e){var n=ko(t);if(n!==ko(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wo(t).isEqual(wo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=vo(t.timestampValue),r=vo(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return bo(t.bytesValue).isEqual(bo(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return yo(t.geoPointValue.latitude)===yo(e.geoPointValue.latitude)&&yo(t.geoPointValue.longitude)===yo(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return yo(t.integerValue)===yo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=yo(t.doubleValue),r=yo(e.doubleValue);return n===r?To(n)===To(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return no(t.arrayValue.values||[],e.arrayValue.values||[],Oo);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(ao(n)!==ao(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Oo(n[i],r[i])))return!1;return!0}(t,e);default:return Xi()}}function So(t,e){return void 0!==(t.values||[]).find((function(t){return Oo(t,e)}))}function Ro(t,e){var n=ko(t),r=ko(e);if(n!==r)return eo(n,r);switch(n){case 0:return 0;case 1:return eo(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=yo(t.integerValue||t.doubleValue),r=yo(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Ao(t.timestampValue,e.timestampValue);case 4:return Ao(wo(t),wo(e));case 5:return eo(t.stringValue,e.stringValue);case 6:return function(t,e){var n=bo(t),r=bo(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=eo(n[i],r[i]);if(0!==o)return o}return eo(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=eo(yo(t.latitude),yo(e.latitude));return 0!==n?n:eo(yo(t.longitude),yo(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ro(n[i],r[i]);if(o)return o}return eo(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=eo(r[a],o[a]);if(0!==s)return s;var u=Ro(n[r[a]],i[o[a]]);if(0!==u)return u}return eo(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Xi()}}function Ao(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return eo(t,e);var n=vo(t),r=vo(e),i=eo(n.seconds,r.seconds);return 0!==i?i:eo(n.nanos,r.nanos)}function Po(t){return function t(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(t){var e=vo(t);return"time("+e.seconds+","+e.nanos+")"}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?bo(e.bytesValue).toBase64():"referenceValue"in e?Co.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo("+(n=e.geoPointValue).latitude+","+n.longitude+")":"arrayValue"in e?function(e){for(var n="[",r=!0,i=0,o=e.values||[];i<o.length;i++)r?r=!1:n+=",",n+=t(o[i]);return n+"]"}(e.arrayValue):"mapValue"in e?function(e){for(var n="{",r=!0,i=0,o=Object.keys(e.fields||{}).sort();i<o.length;i++){var a=o[i];r?r=!1:n+=",",n+=a+":"+t(e.fields[a])}return n+"}"}(e.mapValue):Xi();var n}(t)}function No(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function xo(t){return!!t&&"integerValue"in t}function Do(t){return!!t&&"arrayValue"in t}function jo(t){return!!t&&"nullValue"in t}function Mo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Lo(t){return!!t&&"mapValue"in t}function Fo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return so(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Fo(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Fo(t.arrayValue.values[r]);return n}return Object.assign({},t)}var Uo=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Lo(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Fo(e)},t.prototype.setAll=function(t){var e=this,n=fo.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Fo(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Lo(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Oo(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Lo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){so(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++)delete t[i[r]]},t.prototype.clone=function(){return new t(Fo(this.value))},t}();function qo(t){var e=[];return so(t.fields,(function(t,n){var r=new fo([t]);if(Lo(n)){var i=qo(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++)e.push(r.child(a[o]))}else e.push(r)})),new po(e)}var Go=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,oo.min(),Uo.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Uo.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Uo.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Uo.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Uo.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Qo=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};function Vo(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Qo(t,e,n,r,i,o,a)}function Bo(t){var e=Ji(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+Po(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),Io(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ra(e.startAt)),e.endAt&&(n+="|ub:",n+=ra(e.endAt)),e.h=n}return e.h}function Ko(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!oa(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!Oo(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sa(t.startAt,e.startAt)&&sa(t.endAt,e.endAt)}function zo(t){return Co.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Wo=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Nt.__extends)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ho(t,n,r):"array-contains"===n?new Jo(t,r):"in"===n?new Zo(t,r):"not-in"===n?new ta(t,r):"array-contains-any"===n?new ea(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Yo(t,n):new Xo(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Ro(e,this.value)):null!==e&&ko(this.value)===ko(e)&&this.m(Ro(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Xi()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ho=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Co.fromName(r.referenceValue),i}return Object(Nt.__extends)(e,t),e.prototype.matches=function(t){var e=Co.comparator(t.key,this.key);return this.m(e)},e}(Wo),Yo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=$o(0,n),r}return Object(Nt.__extends)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Wo),Xo=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=$o(0,n),r}return Object(Nt.__extends)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Wo);function $o(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Co.fromName(t.referenceValue)}))}var Jo=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Nt.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Do(e)&&So(e.arrayValue,this.value)},e}(Wo),Zo=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Nt.__extends)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&So(this.value.arrayValue,e)},e}(Wo),ta=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Nt.__extends)(e,t),e.prototype.matches=function(t){if(So(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!So(this.value.arrayValue,e)},e}(Wo),ea=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Nt.__extends)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Do(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return So(e.value.arrayValue,t)}))},e}(Wo),na=function(t,e){this.position=t,this.before=e};function ra(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Po(t)})).join(",")}var ia=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function oa(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function aa(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?Co.comparator(Co.fromName(a.referenceValue),n.key):Ro(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function sa(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Oo(t.position[n],e.position[n]))return!1;return!0}var ua=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null};function ca(t,e,n,r,i,o,a,s){return new ua(t,e,n,r,i,o,a,s)}function la(t){return new ua(t)}function ha(t){return!Io(t.limit)&&"F"===t.limitType}function fa(t){return!Io(t.limit)&&"L"===t.limitType}function da(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function pa(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function ga(t){return null!==t.collectionGroup}function ma(t){var e=Ji(t);if(null===e.p){e.p=[];var n=pa(e),r=da(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new ia(n)),e.p.push(new ia(fo.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new ia(fo.keyField(),u))}}}return e.p}function va(t){var e=Ji(t);if(!e.T)if("F"===e.limitType)e.T=Vo(e.path,e.collectionGroup,ma(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ma(e);r<i.length;r++){var o=i[r];n.push(new ia(o.field,"desc"===o.dir?"asc":"desc"))}var a=e.endAt?new na(e.endAt.position,!e.endAt.before):null,s=e.startAt?new na(e.startAt.position,!e.startAt.before):null;e.T=Vo(e.path,e.collectionGroup,n,e.filters,e.limit,a,s)}return e.T}function ya(t,e,n){return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ba(t,e){return Ko(va(t),va(e))&&t.limitType===e.limitType}function _a(t){return Bo(va(t))+"|lt:"+t.limitType}function wa(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+Po(e.value);var e})).join(", ")+"]"),Io(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+ra(t.startAt)),t.endAt&&(e+=", endAt: "+ra(t.endAt)),"Target("+e+")"}(va(t))+"; limitType="+t.limitType+")"}function Ia(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Co.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!aa(t.startAt,ma(t),e)||t.endAt&&aa(t.endAt,ma(t),e))}(t,e)}function Ta(t){return function(e,n){for(var r=!1,i=0,o=ma(t);i<o.length;i++){var a=o[i],s=Ea(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Ea(t,e,n){var r=t.field.isKeyField()?Co.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?Ro(r,i):Xi()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Xi()}}function Ca(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:To(e)?"-0":e}}function ka(t){return{integerValue:""+t}}function Oa(t,e){return Eo(e)?ka(e):Ca(t,e)}var Sa=function(){this._=void 0};function Ra(t,e,n){return t instanceof Na?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof xa?Da(t,e):t instanceof ja?Ma(t,e):function(t,e){var n=Pa(t,e),r=Fa(n)+Fa(t.A);return xo(n)&&xo(t.A)?ka(r):Ca(t.R,r)}(t,e)}function Aa(t,e,n){return t instanceof xa?Da(t,e):t instanceof ja?Ma(t,e):n}function Pa(t,e){return t instanceof La?xo(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Na=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nt.__extends)(e,t),e}(Sa),xa=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Nt.__extends)(e,t),e}(Sa);function Da(t,e){for(var n=Ua(e),r=function(t){n.some((function(e){return Oo(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var ja=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Nt.__extends)(e,t),e}(Sa);function Ma(t,e){for(var n=Ua(e),r=function(t){n=n.filter((function(e){return!Oo(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var La=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Nt.__extends)(e,t),e}(Sa);function Fa(t){return yo(t.integerValue||t.doubleValue)}function Ua(t){return Do(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var qa=function(t,e){this.field=t,this.transform=e},Ga=function(t,e){this.version=t,this.transformResults=e},Qa=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Va(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Ba=function(){};function Ka(t,e,n){t instanceof Xa?function(t,e,n){var r=t.value.clone(),i=Za(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof $a?function(t,e,n){if(Va(t.precondition,e)){var r=Za(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Ja(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function za(t,e,n){t instanceof Xa?function(t,e,n){if(Va(t.precondition,e)){var r=t.value.clone(),i=ts(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Ya(e),r).setHasLocalMutations()}}(t,e,n):t instanceof $a?function(t,e,n){if(Va(t.precondition,e)){var r=ts(t.fieldTransforms,n,e),i=e.data;i.setAll(Ja(t)),i.setAll(r),e.convertToFoundDocument(Ya(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Va(t.precondition,e)&&e.convertToNoDocument(oo.min())}(t,e)}function Wa(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=Pa(o.transform,a||null);null!=s&&(null==n&&(n=Uo.empty()),n.set(o.field,s))}return n||null}function Ha(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&no(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof xa&&e instanceof xa||t instanceof ja&&e instanceof ja?no(t.elements,e.elements,Oo):t instanceof La&&e instanceof La?Oo(t.A,e.A):t instanceof Na&&e instanceof Na}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Ya(t){return t.isFoundDocument()?t.version:oo.min()}var Xa=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Nt.__extends)(e,t),e}(Ba),$a=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return Object(Nt.__extends)(e,t),e}(Ba);function Ja(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Za(t,e,n){var r=new Map;$i(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Aa(a,s,n[i]))}return r}function ts(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,Ra(s,u,e))}return r}var es,ns,rs=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Nt.__extends)(e,t),e}(Ba),is=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Nt.__extends)(e,t),e}(Ba),os=function(t){this.count=t};function as(t){switch(t){case Qi.OK:return Xi();case Qi.CANCELLED:case Qi.UNKNOWN:case Qi.DEADLINE_EXCEEDED:case Qi.RESOURCE_EXHAUSTED:case Qi.INTERNAL:case Qi.UNAVAILABLE:case Qi.UNAUTHENTICATED:return!1;case Qi.INVALID_ARGUMENT:case Qi.NOT_FOUND:case Qi.ALREADY_EXISTS:case Qi.PERMISSION_DENIED:case Qi.FAILED_PRECONDITION:case Qi.ABORTED:case Qi.OUT_OF_RANGE:case Qi.UNIMPLEMENTED:case Qi.DATA_LOSS:return!0;default:return Xi()}}function ss(t){if(void 0===t)return Wi("GRPC error has no .code"),Qi.UNKNOWN;switch(t){case es.OK:return Qi.OK;case es.CANCELLED:return Qi.CANCELLED;case es.UNKNOWN:return Qi.UNKNOWN;case es.DEADLINE_EXCEEDED:return Qi.DEADLINE_EXCEEDED;case es.RESOURCE_EXHAUSTED:return Qi.RESOURCE_EXHAUSTED;case es.INTERNAL:return Qi.INTERNAL;case es.UNAVAILABLE:return Qi.UNAVAILABLE;case es.UNAUTHENTICATED:return Qi.UNAUTHENTICATED;case es.INVALID_ARGUMENT:return Qi.INVALID_ARGUMENT;case es.NOT_FOUND:return Qi.NOT_FOUND;case es.ALREADY_EXISTS:return Qi.ALREADY_EXISTS;case es.PERMISSION_DENIED:return Qi.PERMISSION_DENIED;case es.FAILED_PRECONDITION:return Qi.FAILED_PRECONDITION;case es.ABORTED:return Qi.ABORTED;case es.OUT_OF_RANGE:return Qi.OUT_OF_RANGE;case es.UNIMPLEMENTED:return Qi.UNIMPLEMENTED;case es.DATA_LOSS:return Qi.DATA_LOSS;default:return Xi()}}(ns=es||(es={}))[ns.OK=0]="OK",ns[ns.CANCELLED=1]="CANCELLED",ns[ns.UNKNOWN=2]="UNKNOWN",ns[ns.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ns[ns.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ns[ns.NOT_FOUND=5]="NOT_FOUND",ns[ns.ALREADY_EXISTS=6]="ALREADY_EXISTS",ns[ns.PERMISSION_DENIED=7]="PERMISSION_DENIED",ns[ns.UNAUTHENTICATED=16]="UNAUTHENTICATED",ns[ns.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ns[ns.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ns[ns.ABORTED=10]="ABORTED",ns[ns.OUT_OF_RANGE=11]="OUT_OF_RANGE",ns[ns.UNIMPLEMENTED=12]="UNIMPLEMENTED",ns[ns.INTERNAL=13]="INTERNAL",ns[ns.UNAVAILABLE=14]="UNAVAILABLE",ns[ns.DATA_LOSS=15]="DATA_LOSS";var us=function(){function t(t,e){this.comparator=t,this.root=e||ls.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ls.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ls.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new cs(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new cs(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new cs(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new cs(this.root,t,this.comparator,!0)},t}(),cs=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),ls=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Xi();if(this.right.isRed())throw Xi();var t=this.left.check();if(t!==this.right.check())throw Xi();return t+(this.isRed()?0:1)},t}();ls.EMPTY=null,ls.RED=!0,ls.BLACK=!1,ls.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Xi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Xi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Xi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Xi()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Xi()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ls(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var hs=function(){function t(t){this.comparator=t,this.data=new us(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new fs(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new fs(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),fs=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ds=new us(Co.comparator);function ps(){return ds}var gs=new us(Co.comparator);function ms(){return gs}var vs=new us(Co.comparator);function ys(){return vs}var bs=new hs(Co.comparator);function _s(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=bs,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ws=new hs(eo);function Is(){return ws}var Ts=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Es.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(oo.min(),r,Is(),ps(),_s())},t}(),Es=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(go.EMPTY_BYTE_STRING,n,_s(),_s(),_s())},t}(),Cs=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},ks=function(t,e){this.targetId=t,this.V=e},Os=function(t,e,n,r){void 0===n&&(n=go.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Ss=function(){function t(){this.S=0,this.D=Ps(),this.C=go.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=_s(),e=_s(),n=_s();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Xi()}})),new Es(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Ps()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Rs=function(){function t(t){this.W=t,this.G=new Map,this.H=ps(),this.J=As(),this.Y=new hs(eo)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Xi()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(zo(i))if(0===n){var o=new Co(i.path);this.tt(e,o,Go.newNoDocument(o,oo.min()))}else $i(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&zo(o.target)){var a=new Co(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,Go.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=_s();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Ts(t,n,this.Y,this.H,r);return this.H=ps(),this.J=As(),this.Y=new hs(eo),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Ss,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new hs(eo),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||zi("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Ss),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function As(){return new us(Co.comparator)}function Ps(){return new us(Co.comparator)}var Ns={asc:"ASCENDING",desc:"DESCENDING"},xs={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ds=function(t,e){this.databaseId=t,this.I=e};function js(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ms(t,e){return t.I?e.toBase64():e.toUint8Array()}function Ls(t,e){return js(t,e.toTimestamp())}function Fs(t){return $i(!!t),oo.fromTimestamp(function(t){var e=vo(t);return new io(e.seconds,e.nanos)}(t))}function Us(t,e){return function(t){return new lo(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function qs(t){var e=lo.fromString(t);return $i(cu(e)),e}function Gs(t,e){return Us(t.databaseId,e.path)}function Qs(t,e){var n=qs(e);if(n.get(1)!==t.databaseId.projectId)throw new Vi(Qi.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Vi(Qi.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Co(zs(n))}function Vs(t,e){return Us(t.databaseId,e)}function Bs(t){var e=qs(t);return 4===e.length?lo.emptyPath():zs(e)}function Ks(t){return new lo(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function zs(t){return $i(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Ws(t,e,n){return{name:Gs(t,e),fields:n.value.mapValue.fields}}function Hs(t,e,n){var r=Qs(t,e.name),i=Fs(e.updateTime),o=new Uo({mapValue:{fields:e.fields}}),a=Go.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ys(t,e){var n;if(e instanceof Xa)n={update:Ws(t,e.key,e.value)};else if(e instanceof rs)n={delete:Gs(t,e.key)};else if(e instanceof $a)n={update:Ws(t,e.key,e.data),updateMask:uu(e.fieldMask)};else{if(!(e instanceof is))return Xi();n={verify:Gs(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Na)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof xa)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof ja)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof La)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Xi()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ls(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Xi()}(t,e.precondition)),n}function Xs(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Qa.updateTime(Fs(t.updateTime)):void 0!==t.exists?Qa.exists(t.exists):Qa.none()}(e.currentDocument):Qa.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;"setToServerValue"in e?($i("REQUEST_TIME"===e.setToServerValue),n=new Na):"appendMissingElements"in e?n=new xa(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new ja(e.removeAllFromArray.values||[]):"increment"in e?n=new La(t,e.increment):Xi();var r=fo.fromServerFormat(e.fieldPath);return new qa(r,n)}(t,e)})):[];if(e.update){var i=Qs(t,e.update.name),o=new Uo({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){return new po((t.fieldPaths||[]).map((function(t){return fo.fromServerFormat(t)})))}(e.updateMask);return new $a(i,o,a,n,r)}return new Xa(i,o,n,r)}if(e.delete){var s=Qs(t,e.delete);return new rs(s,n)}if(e.verify){var u=Qs(t,e.verify);return new is(u,n)}return Xi()}function $s(t,e){return{documents:[Vs(t,e.path)]}}function Js(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Vs(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Vs(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Mo(t.value))return{unaryFilter:{field:iu(t.field),op:"IS_NAN"}};if(jo(t.value))return{unaryFilter:{field:iu(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Mo(t.value))return{unaryFilter:{field:iu(t.field),op:"IS_NOT_NAN"}};if(jo(t.value))return{unaryFilter:{field:iu(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:iu(t.field),op:ru(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:iu(t.field),direction:nu(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a=function(t,e){return t.I||Io(e)?e:{value:e}}(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=tu(e.startAt)),e.endAt&&(n.structuredQuery.endAt=tu(e.endAt)),n}function Zs(t){var e=Bs(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){$i(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=function t(e){return e?void 0!==e.unaryFilter?[su(e)]:void 0!==e.fieldFilter?[au(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map((function(e){return t(e)})).reduce((function(t,e){return t.concat(e)})):Xi():[]}(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return function(t){return new ia(ou(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return Io(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=eu(n.startAt));var l=null;return n.endAt&&(l=eu(n.endAt)),ca(e,i,s,a,u,"F",c,l)}function tu(t){return{before:t.before,values:t.position}}function eu(t){return new na(t.values||[],!!t.before)}function nu(t){return Ns[t]}function ru(t){return xs[t]}function iu(t){return{fieldPath:t.canonicalString()}}function ou(t){return fo.fromServerFormat(t.fieldPath)}function au(t){return Wo.create(ou(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Xi()}}(t.fieldFilter.op),t.fieldFilter.value)}function su(t){switch(t.unaryFilter.op){case"IS_NAN":var e=ou(t.unaryFilter.field);return Wo.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=ou(t.unaryFilter.field);return Wo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=ou(t.unaryFilter.field);return Wo.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=ou(t.unaryFilter.field);return Wo.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Xi()}}function uu(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function cu(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function lu(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=fu(e)),e=hu(t.get(n),e);return fu(e)}function hu(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function fu(t){return t+"\x01\x01"}function du(t){var e=t.length;if($i(e>=2),2===e)return $i("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),lo.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("\x01",o);switch((a<0||a>n)&&Xi(),t.charAt(a+1)){case"\x01":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"\x10":i+=t.substring(o,a),i+="\0";break;case"\x11":i+=t.substring(o,a+1);break;default:Xi()}o=a+2}return new lo(r)}var pu=function(t,e){this.seconds=t,this.nanoseconds=e},gu=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};gu.store="owner",gu.key="owner";var mu=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};mu.store="mutationQueues",mu.keyPath="userId";var vu=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};vu.store="mutations",vu.keyPath="batchId",vu.userMutationsIndex="userMutationsIndex",vu.userMutationsKeyPath=["userId","batchId"];var yu=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,lu(e)]},t.key=function(t,e,n){return[t,lu(e),n]},t}();yu.store="documentMutations",yu.PLACEHOLDER=new yu;var bu=function(t,e){this.path=t,this.readTime=e},_u=function(t,e){this.path=t,this.version=e},wu=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};wu.store="remoteDocuments",wu.readTimeIndex="readTimeIndex",wu.readTimeIndexPath="readTime",wu.collectionReadTimeIndex="collectionReadTimeIndex",wu.collectionReadTimeIndexPath=["parentPath","readTime"];var Iu=function(t){this.byteSize=t};Iu.store="remoteDocumentGlobal",Iu.key="remoteDocumentGlobalKey";var Tu=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};Tu.store="targets",Tu.keyPath="targetId",Tu.queryTargetsIndexName="queryTargetsIndex",Tu.queryTargetsKeyPath=["canonicalId","targetId"];var Eu=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Eu.store="targetDocuments",Eu.keyPath=["targetId","path"],Eu.documentTargetsIndex="documentTargetsIndex",Eu.documentTargetsKeyPath=["path","targetId"];var Cu=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Cu.key="targetGlobalKey",Cu.store="targetGlobal";var ku=function(t,e){this.collectionId=t,this.parent=e};ku.store="collectionParents",ku.keyPath=["collectionId","parent"];var Ou=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Ou.store="clientMetadata",Ou.keyPath="clientId";var Su=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Su.store="bundles",Su.keyPath="bundleId";var Ru=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ru.store="namedQueries",Ru.keyPath="name";var Au=Object(Nt.__spreadArray)(Object(Nt.__spreadArray)([],Object(Nt.__spreadArray)(Object(Nt.__spreadArray)([],Object(Nt.__spreadArray)(Object(Nt.__spreadArray)([],Object(Nt.__spreadArray)(Object(Nt.__spreadArray)([],[mu.store,vu.store,yu.store,wu.store,Tu.store,gu.store,Cu.store,Eu.store]),[Ou.store])),[Iu.store])),[ku.store])),[Su.store,Ru.store]),Pu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Nu=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),xu=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Du=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Xi(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),ju=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new xu,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Fu(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Vu(e.target.error);n.ft.reject(new Fu(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Fu(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(zi("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new qu(e)},t}(),Mu=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(xt.getUA)())&&Wi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return zi("SimpleDb","Removing database:",t),Gu(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(xt.getUA)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e,n=this;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(zi("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Fu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Vi(Qi.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Fu(t,n))},i.onupgradeneeded=function(t){zi("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next((function(){zi("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,u;return Object(Nt.__generator)(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,l;return Object(Nt.__generator)(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=h.sent(),e=ju.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),Du.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return zi("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Lu=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Gu(this.Pt.delete())},t}(),Fu=function(t){function e(e,n){var r=this;return(r=t.call(this,Qi.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Nt.__extends)(e,t),e}(Vi);function Uu(t){return"IndexedDbTransactionError"===t.name}var qu=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(zi("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(zi("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Gu(n)},t.prototype.add=function(t){return zi("SimpleDb","ADD",this.store.name,t,t),Gu(this.store.add(t))},t.prototype.get=function(t){var e=this;return Gu(this.store.get(t)).next((function(n){return void 0===n&&(n=null),zi("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return zi("SimpleDb","DELETE",this.store.name,t),Gu(this.store.delete(t))},t.prototype.count=function(){return zi("SimpleDb","COUNT",this.store.name),Gu(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){zi("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Du((function(n,r){e.onerror=function(t){var e=Vu(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Du((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Lu(i),a=e(i.primaryKey,i.value,o);if(a instanceof Du){var s=a.catch((function(t){return o.done(),Du.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Du.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Gu(t){return new Du((function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Vu(t.target.error);n(e)}}))}var Qu=!1;function Vu(t){var e=Mu._t(Object(xt.getUA)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Vi("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Qu||(Qu=!0,setTimeout((function(){throw r}),0)),r}}return t}var Bu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Nt.__extends)(e,t),e}(Nu);function Ku(t,e){var n=Ji(t);return Mu.It(n.Mt,e)}var zu=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Ka(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&za(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&za(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(oo.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),_s())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&no(this.mutations,t.mutations,(function(t,e){return Ha(t,e)}))&&no(this.baseMutations,t.baseMutations,(function(t,e){return Ha(t,e)}))},t}(),Wu=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){$i(e.mutations.length===r.length);for(var i=ys(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),Hu=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=oo.min()),void 0===o&&(o=oo.min()),void 0===a&&(a=go.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Yu=function(t){this.Lt=t};function Xu(t,e){if(e.document)return Hs(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Co.fromSegments(e.noDocument.path),r=ec(e.noDocument.readTime),i=Go.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Co.fromSegments(e.unknownDocument.path);return r=ec(e.unknownDocument.version),Go.newUnknownDocument(o,r)}return Xi()}function $u(t,e,n){var r=Ju(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Gs(t,e.key),fields:e.data.value.mapValue.fields,updateTime:js(t,e.version.toTimestamp())}}(t.Lt,e),a=e.hasCommittedMutations;return new wu(null,null,o,a,r,i)}if(e.isNoDocument()){var s=e.key.path.toArray(),u=tc(e.version);return a=e.hasCommittedMutations,new wu(null,new bu(s,u),null,a,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=tc(e.version);return new wu(new _u(c,l),null,null,!0,r,i)}return Xi()}function Ju(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Zu(t){var e=new io(t[0],t[1]);return oo.fromTimestamp(e)}function tc(t){var e=t.toTimestamp();return new pu(e.seconds,e.nanoseconds)}function ec(t){var e=new io(t.seconds,t.nanoseconds);return oo.fromTimestamp(e)}function nc(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Xs(t.Lt,e)})),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map((function(e){return Xs(t.Lt,e)})),o=io.fromMillis(e.localWriteTimeMs);return new zu(e.batchId,o,n,i)}function rc(t){var e,n,r=ec(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?ec(t.lastLimboFreeSnapshotVersion):oo.min();return void 0!==t.query.documents?($i(1===(n=t.query).documents.length),e=va(la(Bs(n.documents[0])))):e=function(t){return va(Zs(t))}(t.query),new Hu(e,t.targetId,0,t.lastListenSequenceNumber,r,i,go.fromBase64String(t.resumeToken))}function ic(t,e){var n,r=tc(e.snapshotVersion),i=tc(e.lastLimboFreeSnapshotVersion);n=zo(e.target)?$s(t.Lt,e.target):Js(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Tu(e.targetId,Bo(e.target),r,o,e.sequenceNumber,i,n)}function oc(t){var e=Zs({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ya(e,e.limit,"L"):e}var ac=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return sc(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:ec(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return sc(t).put({bundleId:(n=e).id,createTime:tc(Fs(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return uc(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:oc(e.bundledQuery),readTime:ec(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return uc(t).put(function(t){return{name:t.name,readTime:tc(Fs(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function sc(t){return Ku(t,Su.store)}function uc(t){return Ku(t,Ru.store)}var cc=function(){function t(){this.Bt=new lc}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Du.resolve()},t.prototype.getCollectionParents=function(t,e){return Du.resolve(this.Bt.getEntries(e))},t}(),lc=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new hs(lo.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new hs(lo.comparator)).toArray()},t}(),hc=function(){function t(){this.qt=new lc}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:lu(i)};return fc(t).put(o)}return Du.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[ro(e),""],!1,!0);return fc(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(du(o.parent))}return n}))},t}();function fc(t){return Ku(t,ku.store)}var dc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},pc=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function gc(t,e,n){var r=t.store(vu.store),i=t.store(yu.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){$i(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=yu.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return Du.waitFor(o).next((function(){return c}))}function mc(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Xi();e=t.noDocument}return JSON.stringify(e).length}pc.DEFAULT_COLLECTION_PERCENTILE=10,pc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pc.DEFAULT=new pc(41943040,pc.DEFAULT_COLLECTION_PERCENTILE,pc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pc.DISABLED=new pc(-1,0,0);var vc=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return $i(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return bc(t).$t({index:vu.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=_c(t),a=bc(t);return a.add({}).next((function(s){$i("number"==typeof s);for(var u=new zu(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Ys(t.Lt,e)})),i=n.mutations.map((function(e){return Ys(t.Lt,e)}));return new vu(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new hs((function(t,e){return eo(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],g=yu.key(i.userId,p.key.path,s);h=h.add(p.key.path.popLast()),l.push(a.put(c)),l.push(o.put(g,yu.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),Du.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return bc(t).get(e).next((function(t){return t?($i(t.userId===n.userId),nc(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Du.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return bc(t).$t({index:vu.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&($i(e.batchId>=r),o=nc(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return bc(t).$t({index:vu.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return bc(t).Nt(vu.userMutationsIndex,n).next((function(t){return t.map((function(t){return nc(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=yu.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return _c(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[2],c=du(r[1]);if(s===n.userId&&e.path.isEqual(c))return bc(t).get(u).next((function(t){if(!t)throw Xi();$i(t.userId===n.userId),o.push(nc(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new hs(eo),i=[];return e.forEach((function(e){var o=yu.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=_c(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[2],u=du(t[1]);a===n.userId&&e.path.isEqual(u)?r=r.add(s):o.done()}));i.push(s)})),Du.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=yu.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new hs(eo);return _c(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[2],c=du(t[1]);a===n.userId&&r.isPrefixOf(c)?c.length===i&&(s=s.add(u)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(bc(t).get(e).next((function(t){if(null===t)throw Xi();$i(t.userId===n.userId),r.push(nc(n.R,t))})))})),Du.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return gc(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Du.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Du.resolve();var r=IDBKeyRange.lowerBound(yu.prefixForUser(e.userId)),i=[];return _c(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=du(t[1]);i.push(o)}else r.done()})).next((function(){$i(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return yc(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return wc(t).get(this.userId).next((function(t){return t||new mu(e.userId,-1,"")}))},t}();function yc(t,e,n){var r=yu.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return _c(t).$t({range:o,kt:!0},(function(t,n,r){t[0]===e&&t[1]===i&&(a=!0),r.done()})).next((function(){return a}))}function bc(t){return Ku(t,vu.store)}function _c(t){return Ku(t,yu.store)}function wc(t){return Ku(t,mu.store)}var Ic=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Tc=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Ic(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return oo.fromTimestamp(new io(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Ec(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return $i(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Ec(t).$t((function(a,s){var u=rc(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Du.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Ec(t).$t((function(t,n){var r=rc(n);e(r)}))},t.prototype.Xt=function(t){return Cc(t).get(Cu.key).next((function(t){return $i(null!==t),t}))},t.prototype.Zt=function(t,e){return Cc(t).put(Cu.key,e)},t.prototype.te=function(t,e){return Ec(t).put(ic(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Bo(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ec(t).$t({range:r,index:Tu.queryTargetsIndexName},(function(t,n,r){var o=rc(n);Ko(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=kc(t);return e.forEach((function(e){var a=lu(e.path);i.push(o.put(new Eu(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),Du.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=kc(t);return Du.forEach(e,(function(e){var o=lu(e.path);return Du.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=kc(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=kc(t),i=_s();return r.$t({range:n,kt:!0},(function(t,e,n){var r=du(t[1]),o=new Co(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=lu(e.path),r=IDBKeyRange.bound([n],[ro(n)],!1,!0),i=0;return kc(t).$t({index:Eu.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){0!==t[0]&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Ec(t).get(e).next((function(t){return t?rc(t):null}))},t}();function Ec(t){return Ku(t,Tu.store)}function Cc(t){return Ku(t,Cu.store)}function kc(t){return Ku(t,Eu.store)}function Oc(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){if(t.code!==Qi.FAILED_PRECONDITION||t.message!==Pu)throw t;return zi("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function Sc(t,e){var n=t[1],r=e[1],i=eo(t[0],e[0]);return 0===i?eo(n,r):i}var Rc=function(){function t(t){this.ne=t,this.buffer=new hs(Sc),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Sc(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Ac=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;zi("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Object(Nt.__awaiter)(e,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Uu(e=n.sent())?(zi("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Oc(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Pc=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Du.resolve(Gi.o);var r=new Rc(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(zi("LruGarbageCollector","Garbage collection skipped; disabled"),Du.resolve(dc)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(zi("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),dc):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(zi("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Ki()<=Dt.LogLevel.DEBUG&&zi("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),Du.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Nc=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Pc(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return xc(t,n)},t.prototype.removeReference=function(t,e,n){return xc(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return xc(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return wc(t).Ot((function(r){return yc(t,r,e).next((function(t){return t&&(n=!0),Du.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),kc(t).delete([0,lu(a.path)])}))}));i.push(u)}})).next((function(){return Du.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return xc(t,e)},t.prototype.we=function(t,e){var n,r=kc(t),i=Gi.o;return r.$t({index:Eu.documentTargetsIndex},(function(t,r){var o=r.path,a=r.sequenceNumber;0===t[0]?(i!==Gi.o&&e(new Co(du(n)),i),i=a,n=o):i=Gi.o})).next((function(){i!==Gi.o&&e(new Co(du(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function xc(t,e){return kc(t).put(function(t,e){return new Eu(0,lu(t.path),e)}(e,t.currentSequenceNumber))}var Dc=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[1];if(this.equalsFn(o[0],t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){so(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}}))},t.prototype.isEmpty=function(){return uo(this.inner)},t}(),jc=function(){function t(){this.changes=new Dc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:oo.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Go.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Du.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Mc=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Uc(t).put(qc(e),n)},t.prototype.removeEntry=function(t,e){var n=Uc(t),r=qc(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Uc(t).get(qc(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Uc(t).get(qc(e)).next((function(t){return{document:n.ye(e,t),size:mc(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=ps();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=ps(),i=new us(Co.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,mc(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Du.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Uc(t).$t({range:r},(function(t,e,r){for(var a=Co.fromSegments(t);o&&Co.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=ps(),o=e.path.length+1,a={};if(n.isEqual(oo.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=Ju(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=wu.collectionReadTimeIndex}return Uc(t).$t(a,(function(t,n,a){if(t.length===o){var s=Xu(r.R,n);e.path.isPrefixOf(s.key.path)?Ia(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Lc(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Fc(t).get(Iu.key).next((function(t){return $i(!!t),t}))},t.prototype.me=function(t,e){return Fc(t).put(Iu.key,e)},t.prototype.ye=function(t,e){if(e){var n=Xu(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(oo.min()))return n}return Go.newInvalidDocument(t)},t}(),Lc=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Dc((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return Object(Nt.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new hs((function(t,e){return eo(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=$u(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=mc(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=$u(e.Ie.R,Go.newNoDocument(o,oo.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Du.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(jc);function Fc(t){return Ku(t,Iu.store)}function Uc(t){return Ku(t,wu.store)}function qc(t){return t.path.toArray()}var Gc=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;$i(n<r&&n>=0&&r<=11);var o=new ju("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(gu.store)}(t),function(t){t.createObjectStore(mu.store,{keyPath:mu.keyPath}),t.createObjectStore(vu.store,{keyPath:vu.keyPath,autoIncrement:!0}).createIndex(vu.userMutationsIndex,vu.userMutationsKeyPath,{unique:!0}),t.createObjectStore(yu.store)}(t),Qc(t),function(t){t.createObjectStore(wu.store)}(t));var a=Du.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Eu.store),t.deleteObjectStore(Tu.store),t.deleteObjectStore(Cu.store)}(t),Qc(t)),a=a.next((function(){return function(t){var e=t.store(Cu.store),n=new Cu(0,0,oo.min().toTimestamp(),0);return e.put(Cu.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return function(t,e){return e.store(vu.store).Nt().next((function(n){t.deleteObjectStore(vu.store),t.createObjectStore(vu.store,{keyPath:vu.keyPath,autoIncrement:!0}).createIndex(vu.userMutationsIndex,vu.userMutationsKeyPath,{unique:!0});var r=e.store(vu.store),i=n.map((function(t){return r.put(t)}));return Du.waitFor(i)}))}(t,o)}))),a=a.next((function(){!function(t){t.createObjectStore(Ou.store,{keyPath:Ou.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Iu.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(wu.store);e.createIndex(wu.readTimeIndex,wu.readTimeIndexPath,{unique:!1}),e.createIndex(wu.collectionReadTimeIndex,wu.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(Su.store,{keyPath:Su.keyPath})}(t),function(t){t.createObjectStore(Ru.store,{keyPath:Ru.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(wu.store).$t((function(t,n){e+=mc(n)})).next((function(){var n=new Iu(e);return t.store(Iu.store).put(Iu.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(mu.store),r=t.store(vu.store);return n.Nt().next((function(n){return Du.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(vu.userMutationsIndex,i).next((function(r){return Du.forEach(r,(function(r){$i(r.userId===n.userId);var i=nc(e.R,r);return gc(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Eu.store),n=t.store(wu.store);return t.store(Cu.store).get(Cu.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new lo(n),a=function(t){return[0,lu(t)]}(o);r.push(e.get(a).next((function(n){return n?Du.resolve():function(n){return e.put(new Eu(0,lu(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return Du.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(ku.store,{keyPath:ku.keyPath});var n=e.store(ku.store),r=new lc,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:lu(i)})}};return e.store(wu.store).$t({kt:!0},(function(t,e){var n=new lo(t);return i(n.popLast())})).next((function(){return e.store(yu.store).$t({kt:!0},(function(t,e){var n=du(t[1]);return i(n.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(Tu.store);return n.$t((function(t,r){var i=rc(r),o=ic(e.R,i);return n.put(o)}))},t}();function Qc(t){t.createObjectStore(Eu.store,{keyPath:Eu.keyPath}).createIndex(Eu.documentTargetsIndex,Eu.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Tu.store,{keyPath:Tu.keyPath}).createIndex(Tu.queryTargetsIndexName,Tu.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Cu.store)}var Vc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Bc=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Vi(Qi.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Nc(this,i),this.Le=n+"main",this.R=new Yu(u),this.Be=new Mu(this.Le,11,new Gc(this.R)),this.qe=new Tc(this.referenceDelegate,this.R),this.Ut=new hc,this.Ue=function(t,e){return new Mc(t,e)}(this.R,this.Ut),this.Ke=new ac,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Wi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Vi(Qi.FAILED_PRECONDITION,Vc);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Gi(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Nt.__awaiter)(e,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Object(Nt.__awaiter)(e,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Object(Nt.__awaiter)(e,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return zc(e).put(new Ou(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Uu(e))return zi("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return zi("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Kc(t).get(gu.key).next((function(t){return Du.resolve(e.tn(t))}))},t.prototype.en=function(t){return zc(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Ku(t,Ou.store);return e.Nt().next((function(t){var n=r.rn(t,18e5),i=t.filter((function(t){return-1===n.indexOf(t)}));return Du.forEach(i,(function(t){return e.delete(t.clientId)})).next((function(){return i}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)this.Qe.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Du.resolve(!0):Kc(t).get(gu.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Vi(Qi.FAILED_PRECONDITION,Vc);return!1}}return!(!e.networkEnabled||!e.inForeground)||zc(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))}))}))})).next((function(t){return e.isPrimary!==t&&zi("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t=this;return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[gu.store,Ou.store],(function(e){var n=new Bu(e,Gi.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return zc(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return vc.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r,i=this;return zi("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Au,(function(o){return r=new Bu(o,i.Ne?i.Ne.next():Gi.o),"readwrite-primary"===e?i.Je(r).next((function(t){return!!t||i.Ye(r)})).next((function(e){if(!e)throw Wi("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable((function(){return i.Me(!1)})),new Vi(Qi.FAILED_PRECONDITION,Pu);return n(r)})).next((function(t){return i.Ze(r).next((function(){return t}))})):i.dn(r).next((function(){return n(r)}))})).then((function(t){return r.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Kc(t).get(gu.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Vi(Qi.FAILED_PRECONDITION,Vc)}))},t.prototype.Ze=function(t){var e=new gu(this.clientId,this.allowTabSynchronization,Date.now());return Kc(t).put(gu.key,e)},t.yt=function(){return Mu.yt()},t.prototype.Xe=function(t){var e=this,n=Kc(t);return n.get(gu.key).next((function(t){return e.tn(t)?(zi("IndexedDbPersistence","Releasing primary lease."),n.delete(gu.key)):Du.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Wi("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),Object(xt.isSafari)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return zi("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Wi("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Wi("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Kc(t){return Ku(t,gu.store)}function zc(t){return Ku(t,Ou.store)}function Wc(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Hc=function(t,e){this.progress=t,this.wn=e},Yc=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Co.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):ga(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Co(e)).next((function(t){var e=ms();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=ms();return this.Ut.getCollectionParents(t,i).next((function(a){return Du.forEach(a,(function(a){var s=function(t,e){return new ua(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,a.child(i));return r.An(t,s,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return o.Rn(t,i=e,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=Go.newInvalidDocument(c),r=r.insert(c,l)),za(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){Ia(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=_s(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof $a&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Xc=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=_s(),i=_s(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),$c=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(oo.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(ha(e)||fa(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(Ki()<=Dt.LogLevel.DEBUG&&zi("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),wa(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new hs(Ta(t));return e.forEach((function(e,r){Ia(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Ki()<=Dt.LogLevel.DEBUG&&zi("QueryEngine","Using full collection scan to execute query:",wa(e)),this.Sn.getDocumentsMatchingQuery(t,e,oo.min())},t}(),Jc=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new us(eo),this.kn=new Dc((function(t){return Bo(t)}),Ko),this.$n=oo.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Yc(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();function Zc(t,e,n,r){return new Jc(t,e,n,r)}function tl(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(Nt.__generator)(this,(function(a){switch(a.label){case 0:return n=Ji(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new Yc(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=_s(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)a=a.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)a=a.add(m[g].key)}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function el(t,e){var n=Ji(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),a=Du.resolve();return o.forEach((function(t){a=a.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);$i(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),a.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function nl(t){var e=Ji(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function rl(t,e){var n=Ji(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s=i.get(o);if(s){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=s.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return $i(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(s,c,e)&&a.push(n.qe.updateTargetData(t,c))}}}));var s=ps();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(il(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(oo.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return Du.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function il(t,e,n,r,i){var o=_s();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=ps();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(oo.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):zi("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function ol(t,e){var n=Ji(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function al(t,e){var n=Ji(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?Du.resolve(r=i):n.qe.allocateTargetId(t).next((function(i){return r=new Hu(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function sl(t,e,n){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a;return Object(Nt.__generator)(this,(function(s){switch(s.label){case 0:r=Ji(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!Uu(a=s.sent()))throw a;return zi("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function ul(t,e,n){var r=Ji(t),i=oo.min(),o=_s();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Ji(t),i=r.kn.get(n);return void 0!==i?Du.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,va(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:oo.min(),n?o:_s())})).next((function(t){return{documents:t,Bn:o}}))}))}function cl(t,e){var n=Ji(t),r=Ji(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function ll(t){var e=Ji(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Ji(t),i=ps(),o=Ju(n),a=Uc(e),s=IDBKeyRange.lowerBound(o,!0);return a.$t({index:wu.readTimeIndex,range:s},(function(t,e){var n=Xu(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:Zu(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn;return e.$n=t.readTime,n}))}function hl(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){return[2,(e=Ji(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=Uc(t),n=oo.min();return e.$t({index:wu.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Zu(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function fl(t,e,n,r){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,d;return Object(Nt.__generator)(this,(function(p){switch(p.label){case 0:for(i=Ji(t),o=_s(),a=ps(),s=ys(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,e.Un(l)),s=s.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,al(i,function(t){return va(la(lo.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return il(t,f,a,oo.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,d.targetId).next((function(){return i.qe.addMatchingKeys(t,o,d.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function dl(t,e,n){return void 0===n&&(n=_s()),Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(Nt.__generator)(this,(function(o){switch(o.label){case 0:return[4,al(t,va(oc(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Ji(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Fs(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var a=r.withResumeToken(go.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var pl=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Du.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Fs(n.createTime)}),Du.resolve()},t.prototype.getNamedQuery=function(t,e){return Du.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:oc(t.bundledQuery),readTime:Fs(t.readTime)}}(e)),Du.resolve()},t}(),gl=function(){function t(){this.Wn=new hs(ml.Gn),this.zn=new hs(ml.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new ml(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new ml(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Co(new lo([])),r=new ml(n,t),i=new ml(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Co(new lo([])),n=new ml(e,t),r=new ml(e,t+1),i=_s();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new ml(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),ml=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Co.comparator(t.key,e.key)||eo(t.ns,e.ns)},t.Hn=function(t,e){return eo(t.ns,e.ns)||Co.comparator(t.key,e.key)},t}(),vl=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new hs(ml.Gn)}return t.prototype.checkEmpty=function(t){return Du.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new zu(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new ml(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Du.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Du.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Du.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Du.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Du.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new ml(e,0),i=new ml(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Du.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new hs(eo);return e.forEach((function(t){var e=new ml(t,0),i=new ml(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Du.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Co.isDocumentKey(i)||(i=i.child(""));var o=new ml(new Co(i),0),a=new hs(eo);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),Du.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;$i(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Du.forEach(e.mutations,(function(i){var o=new ml(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new ml(e,0),r=this.rs.firstAfterOrEqual(n);return Du.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Du.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),yl=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new us(Co.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Du.resolve(n?n.document.clone():Go.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=ps();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Go.newInvalidDocument(t))})),Du.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=ps(),i=new Co(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.value,u=s.document,c=s.readTime;if(!e.path.isPrefixOf(a.key.path))break;c.compareTo(n)<=0||Ia(e,u)&&(r=r.insert(u.key,u.clone()))}return Du.resolve(r)},t.prototype.fs=function(t,e){return Du.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new bl(this)},t.prototype.getSize=function(t){return Du.resolve(this.size)},t}(),bl=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Nt.__extends)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Du.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(jc),_l=function(){function t(t){this.persistence=t,this.ds=new Dc((function(t){return Bo(t)}),Ko),this.lastRemoteSnapshotVersion=oo.min(),this.highestTargetId=0,this.ws=0,this._s=new gl,this.targetCount=0,this.ys=Ic.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Du.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Du.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Du.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Du.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Du.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Ic(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Du.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Du.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Du.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),Du.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Du.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Du.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Du.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Du.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Du.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Du.resolve(n)},t.prototype.containsKey=function(t,e){return Du.resolve(this._s.containsKey(e))},t}(),wl=function(){function t(t,e){var n=this;this.gs={},this.Ne=new Gi(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new _l(this),this.Ut=new cc,this.Ue=function(t,e){return new yl(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Yu(e),this.Ke=new pl(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new vl(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;zi("MemoryPersistence","Starting transaction:",t);var i=new Il(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Du.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Il=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Nt.__extends)(e,t),e}(Nu),Tl=function(){function t(t){this.persistence=t,this.As=new gl,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Xi()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Du.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Du.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Du.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Du.forEach(this.vs,(function(r){var i=Co.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Du.or([function(){return Du.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),El=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function Cl(t,e){return"firestore_clients_"+t+"_"+e}function kl(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Ol(t,e){return"firestore_targets_"+t+"_"+e}El.UNAUTHENTICATED=new El(null),El.GOOGLE_CREDENTIALS=new El("google-credentials-uid"),El.FIRST_PARTY=new El("first-party-uid");var Sl=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Vi(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(Wi("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Rl=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Vi(i.error.code,i.error.message)),o?new t(e,i.state,r):(Wi("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Al=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Is(),a=0;i&&a<r.activeTargetIds.length;++a)i=Eo(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(Wi("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Pl=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Wi("SharedClientState","Failed to parse online state: "+e),null)},t}(),Nl=function(){function t(){this.activeTargetIds=Is()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),xl=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new us(eo),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=Cl(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Nl),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l=this;return Object(Nt.__generator)(this,(function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(Cl(this.persistenceKey,r)))&&(o=Al.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.$s;u<c.length;u++)this.Fs(c[u]);return this.$s=[],this.window.addEventListener("pagehide",(function(){return l.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Ol(this.persistenceKey,t));if(n){var r=Rl.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Ol(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return zi("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){zi("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){zi("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(zi("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Wi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Object(Nt.__awaiter)(e,void 0,void 0,(function(){var t,e,r,i,o,a;return Object(Nt.__generator)(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=Gi.o;if(null!=t)try{var n=JSON.parse(t);$i("number"==typeof n),e=n}catch(t){Wi("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Gi.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Sl(this.currentUser,t,e,n),i=kl(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=kl(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=Ol(this.persistenceKey,t),i=new Rl(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Al.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Sl.Vs(new El(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Rl.Vs(r,e)},t.prototype.js=function(t){return Pl.Vs(t)},t.prototype.ii=function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(zi("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Is();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),Dl=function(){function t(){this.li=new Nl,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Nl,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),jl=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Ml=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){zi("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){zi("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ll={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Fl=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Ul=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return Object(Nt.__extends)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new qi;a.listenOnce(Mi.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case ji.NO_ERROR:var e=a.getResponseJson();zi("Connection","XHR received:",JSON.stringify(e)),i(e);break;case ji.TIMEOUT:zi("Connection",'RPC "'+t+'" timed out'),o(new Vi(Qi.DEADLINE_EXCEEDED,"Request time out"));break;case ji.HTTP_ERROR:var n=a.getStatus();if(zi("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Qi).indexOf(e)>=0?e:Qi.UNKNOWN}(r.status);o(new Vi(s,r.message))}else o(new Vi(Qi.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Vi(Qi.UNAVAILABLE,"Connection failed."));break;default:Xi()}}finally{zi("Connection",'RPC "'+t+'" completed.')}}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Ai,i=En(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Fi({})),this.Fi(o.initMessageHeaders,e),Object(xt.isMobileCordova)()||Object(xt.isReactNative)()||Object(xt.isElectron)()||Object(xt.isIE)()||Object(xt.isUWP)()||Object(xt.isBrowserExtension)()||(o.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");zi("Connection","Creating WebChannel: "+a,o);var s=r.createWebChannel(a,o),u=!1,c=!1,l=new Fl({Ei:function(t){c?zi("Connection","Not sending because WebChannel is closed:",t):(u||(zi("Connection","Opening WebChannel transport."),s.open(),u=!0),zi("Connection","WebChannel sending:",t),s.send(t))},Ti:function(){return s.close()}}),h=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return h(s,Ui.EventType.OPEN,(function(){c||zi("Connection","WebChannel transport opened.")})),h(s,Ui.EventType.CLOSE,(function(){c||(c=!0,zi("Connection","WebChannel transport closed"),l.Vi())})),h(s,Ui.EventType.ERROR,(function(t){c||(c=!0,Hi("Connection","WebChannel transport errored:",t),l.Vi(new Vi(Qi.UNAVAILABLE,"The operation could not be completed")))})),h(s,Ui.EventType.MESSAGE,(function(t){var e;if(!c){var n=t.data[0];$i(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){zi("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=es[t];if(void 0!==e)return ss(e)}(i),a=r.message;void 0===o&&(o=Qi.INTERNAL,a="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Vi(o,a)),s.close()}else zi("Connection","WebChannel received:",n),l.Si(n)}})),h(i,Li.STAT_EVENT,(function(t){10===t.stat?zi("Connection","Detected buffering proxy"):11===t.stat&&zi("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);zi("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return zi("RestConnection","Received: ",t),t}),(function(e){throw Hi("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.8.1",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+Ll[t]},t}());function ql(){return"undefined"!=typeof window?window:null}function Gl(){return"undefined"!=typeof document?document:null}function Ql(t){return new Ds(t,!0)}var Vl=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&zi("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Bl=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Vl(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Qi.RESOURCE_EXHAUSTED?(Wi(e.toString()),Wi("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Qi.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Vi(Qi.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Object(Nt.__awaiter)(t,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return zi("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(zi("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Kl=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return Object(Nt.__extends)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Xi()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?($i(void 0===e||"string"==typeof e),go.fromBase64String(e||"")):($i(void 0===e||e instanceof Uint8Array),go.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(s=e.targetChange.cause)&&function(t){var e=void 0===t.code?Qi.UNKNOWN:ss(t.code);return new Vi(e,t.message||"")}(s);n=new Os(r,i,o,a||null)}else if("documentChange"in e){i=Qs(t,(r=e.documentChange).document.name),o=Fs(r.document.updateTime);var s=new Uo({mapValue:{fields:r.document.fields}}),u=(a=Go.newFoundDocument(i,o,s),r.targetIds||[]);n=new Cs(u,r.removedTargetIds||[],a.key,a)}else if("documentDelete"in e)i=Qs(t,(r=e.documentDelete).document),o=r.readTime?Fs(r.readTime):oo.min(),s=Go.newNoDocument(i,o),n=new Cs([],a=r.removedTargetIds||[],s.key,s);else if("documentRemove"in e)i=Qs(t,(r=e.documentRemove).document),n=new Cs([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Xi();var c=e.filter;i=new os(r=c.count||0),n=new ks(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return oo.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?oo.min():e.readTime?Fs(e.readTime):oo.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=Ks(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=zo(r)?{documents:$s(t,r)}:{query:Js(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Ms(t,e.resumeToken):e.snapshotVersion.compareTo(oo.min())>0&&(n.readTime=js(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Xi()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=Ks(this.R),e.removeTarget=t,this.cr(e)},e}(Bl),zl=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return Object(Nt.__extends)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if($i(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?($i(void 0!==e),t.map((function(t){return function(t,e){var n=Fs(t.updateTime?t.updateTime:e);return n.isEqual(oo.min())&&(n=Fs(e)),new Ga(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=Fs(t.commitTime);return this.listener.Tr(n,e)}return $i(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Ks(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Ys(e.R,t)}))};this.cr(n)},e}(Bl),Wl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Nt.__extends)(e,t),e.prototype.br=function(){if(this.Rr)throw new Vi(Qi.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Qi.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Vi(Qi.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Qi.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Vi(Qi.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Hl=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Wi(e),this.Vr=!1):zi("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Yl=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Object(Nt.__awaiter)(o,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(t){switch(t.label){case 0:return ih(this)?(zi("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return(e=Ji(t)).Or.add(4),[4,$l(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Xl(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Hl(n,r)};function Xl(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e,n;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:if(!ih(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function $l(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e,n;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Jl(t,e){var n=Ji(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),rh(n)?nh(n):bh(n).er()&&th(n,e))}function Zl(t,e){var n=Ji(t),r=bh(n);n.$r.delete(e),r.er()&&eh(n,e),0===n.$r.size&&(r.er()?r.ir():ih(n)&&n.Br.set("Unknown"))}function th(t,e){t.qr.U(e.targetId),bh(t).mr(e)}function eh(t,e){t.qr.U(e),bh(t).yr(e)}function nh(t){t.qr=new Rs({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),bh(t).start(),t.Br.Sr()}function rh(t){return ih(t)&&!bh(t).tr()&&t.$r.size>0}function ih(t){return 0===Ji(t).Or.size}function oh(t){t.qr=void 0}function ah(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){return t.$r.forEach((function(e,n){th(t,e)})),[2]}))}))}function sh(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(n){return oh(t),rh(t)?(t.Br.Nr(e),nh(t)):t.Br.set("Unknown"),[2]}))}))}function uh(t,e,n){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r,i,o;return Object(Nt.__generator)(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof Os&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o;return Object(Nt.__generator)(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?t.$r.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),zi("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,ch(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Cs?t.qr.X(e):e instanceof ks?t.qr.rt(e):t.qr.et(e),n.isEqual(oo.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,nl(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(go.EMPTY_BYTE_STRING,n.snapshotVersion)),eh(t,e);var r=new Hu(n.target,e,1,n.sequenceNumber);th(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return zi("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,ch(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function ch(t,e,n){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r=this;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:if(!Uu(e))throw e;return t.Or.add(1),[4,$l(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return nl(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Object(Nt.__awaiter)(r,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return zi("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Xl(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function lh(t,e){return e().catch((function(n){return ch(t,n,e)}))}function hh(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(Nt.__generator)(this,(function(a){switch(a.label){case 0:e=Ji(t),n=_h(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!function(t){return ih(t)&&t.kr.length<10}(e))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,ol(e.localStore,r)];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=_h(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,ch(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return fh(e)&&dh(e),[2]}}))}))}function fh(t){return ih(t)&&!_h(t).tr()&&t.kr.length>0}function dh(t){_h(t).start()}function ph(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){return _h(t).Ar(),[2]}))}))}function gh(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e,n,r;return Object(Nt.__generator)(this,(function(i){for(e=_h(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]}))}))}function mh(t,e,n){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(Nt.__generator)(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Wu.from(r,e,n),[4,lh(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,hh(t)];case 2:return o.sent(),[2]}}))}))}function vh(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return e&&_h(t).pr?[4,function(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:return as(r=e.code)&&r!==Qi.ABORTED?(n=t.kr.shift(),_h(t).sr(),[4,lh(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,hh(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return fh(t)&&dh(t),[2]}}))}))}function yh(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return n=Ji(t),e?(n.Or.delete(2),[4,Xl(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,$l(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function bh(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Ji(t);return r.br(),new Kl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:ah.bind(null,t),Ri:sh.bind(null,t),_r:uh.bind(null,t)}),t.Mr.push((function(n){return Object(Nt.__awaiter)(e,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),rh(t)?nh(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),oh(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function _h(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Ji(t);return r.br(),new zl(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:ph.bind(null,t),Ri:vh.bind(null,t),Ir:gh.bind(null,t),Tr:mh.bind(null,t)}),t.Mr.push((function(n){return Object(Nt.__awaiter)(e,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,hh(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.kr.length>0&&(zi("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var wh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new xu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Vi(Qi.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Ih(t,e){if(Wi("AsyncQueue",e+": "+t),Uu(t))return new Vi(Qi.UNAVAILABLE,e+": "+t);throw t}var Th=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Co.comparator(e.key,n.key)}:function(t,e){return Co.comparator(t.key,e.key)},this.keyedMap=ms(),this.sortedSet=new us(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Eh=function(){function t(){this.Qr=new us(Co.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Xi():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),Ch=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,Th.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&ba(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),kh=function(){this.Wr=void 0,this.listeners=[]},Oh=function(){this.queries=new Dc((function(t){return _a(t)}),ba),this.onlineState="Unknown",this.Gr=new Set};function Sh(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Object(Nt.__generator)(this,(function(c){switch(c.label){case 0:if(n=Ji(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new kh),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=Ih(s,"Initialization of query '"+wa(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Nh(n),[2]}}))}))}function Rh(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(Nt.__generator)(this,(function(s){return n=Ji(t),i=!1,(o=n.queries.get(r=e.query))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function Ah(t,e){for(var n=Ji(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=n.queries.get(a.query);if(s){for(var u=0,c=s.listeners;u<c.length;u++)c[u].Hr(a)&&(r=!0);s.Wr=a}}r&&Nh(n)}function Ph(t,e,n){var r=Ji(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function Nh(t){t.Gr.forEach((function(t){t.next()}))}var xh=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ch(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=Ch.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Dh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),jh=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Qs(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Hs(this.R,t.document,!1):Go.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Fs(t)},t}(),Mh=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=Lh(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new jh(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||_s()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r,i;return Object(Nt.__generator)(this,(function(o){switch(o.label){case 0:return[4,fl(this.localStore,new jh(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,dl(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Hc(Object.assign({},this.progress),t))]}}))}))},t}();function Lh(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}var Fh=function(t){this.key=t},Uh=function(t){this.key=t},qh=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=_s(),this.mutatedKeys=_s(),this.lo=Ta(t),this.fo=new Th(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Eh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=ha(this.query)&&i.size===this.query.limit?i.last():null,c=fa(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=Ia(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(s=!0)),p&&(h?(a=a.add(h),o=d?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),ha(this.query)||fa(this.query))for(;a.size>this.query.limit;){var l=ha(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Xi()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new Ch(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Eh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=_s(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Uh(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new Fh(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=_s();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return Ch.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Gh=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Qh=function(t){this.key=t,this.bo=!1},Vh=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Dc((function(t){return _a(t)}),ba),this.Vo=new Map,this.So=new Set,this.Do=new us(Co.comparator),this.Co=new Map,this.No=new gl,this.xo={},this.Fo=new Map,this.ko=Ic.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Bh(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(Nt.__generator)(this,(function(s){switch(s.label){case 0:return n=_f(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,al(n.localStore,va(e))];case 2:return o=s.sent(),a=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Kh(n,e,o.targetId,"current"===a)];case 3:r=s.sent(),n.isPrimaryClient&&Jl(n.remoteStore,o),s.label=4;case 4:return[2,r]}}))}))}function Kh(t,e,n,r){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,u,c;return Object(Nt.__generator)(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var i,o,a;return Object(Nt.__generator)(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,ul(t.localStore,e.query,!1).then((function(t){return e.view._o(t.documents,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(of(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,ul(t.localStore,e,!0)];case 1:return i=l.sent(),o=new qh(e,i.Bn),a=o._o(i.documents),s=Es.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),of(t,n,u.To),c=new Gh(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function zh(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(Nt.__generator)(this,(function(o){switch(o.label){case 0:return n=Ji(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!ba(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,sl(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Zl(n.remoteStore,r.targetId),nf(n,r.targetId)})).catch(Oc)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return nf(n,r.targetId),[4,sl(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Wh(t,e,n){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a;return Object(Nt.__generator)(this,(function(s){switch(s.label){case 0:r=wf(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,function(t,e){var n,r=Ji(t),i=io.now(),o=e.reduce((function(t,e){return t.add(e.key)}),_s());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var a=[],s=0,u=e;s<u.length;s++){var c=u[s],l=Wa(c,n.get(c.key));null!=l&&a.push(new $a(c.key,l,qo(l.value.mapValue),Qa.exists(!0)))}return r._n.addMutationBatch(t,i,a,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new us(eo)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,uf(r,i.changes)];case 3:return s.sent(),[4,hh(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=Ih(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Hh(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:n=Ji(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,rl(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&($i(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?$i(r.bo):t.removedDocuments.size>0&&($i(r.bo),r.bo=!1))})),[4,uf(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Oc(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Yh(t,e,n){var r=Ji(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Ji(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&Nh(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Xh(t,e,n){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s,u;return Object(Nt.__generator)(this,(function(c){switch(c.label){case 0:return(r=Ji(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new us(Co.comparator)).insert(o,Go.newNoDocument(o,oo.min())),s=_s().add(o),u=new Ts(oo.min(),new Map,new hs(eo),a,s),[4,Hh(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),sf(r),[3,4];case 2:return[4,sl(r.localStore,e,!1).then((function(){return nf(r,e,n)})).catch(Oc)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function $h(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(Nt.__generator)(this,(function(o){switch(o.label){case 0:n=Ji(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,el(n.localStore,e)];case 2:return i=o.sent(),ef(n,r,null),tf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,uf(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Oc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Jh(t,e,n){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(Nt.__generator)(this,(function(o){switch(o.label){case 0:r=Ji(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Ji(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return $i(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return i=o.sent(),ef(r,e,n),tf(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,uf(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Oc(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Zh(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a;return Object(Nt.__generator)(this,(function(s){switch(s.label){case 0:ih((n=Ji(t)).remoteStore)||zi("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,function(t){var e=Ji(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=Ih(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function tf(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function ef(t,e,n){var r=Ji(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function nf(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||rf(t,e)}))}function rf(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Zl(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),sf(t))}function of(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Fh?(t.No.addReference(o.key,e),af(t,o)):o instanceof Uh?(zi("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||rf(t,o.key)):Xi()}}function af(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(zi("SyncEngine","New document in limbo: "+n),t.So.add(r),sf(t))}function sf(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Co(lo.fromString(e)),r=t.ko.next();t.Co.set(r,new Qh(n)),t.Do=t.Do.insert(n,r),Jl(t.remoteStore,new Hu(va(la(n.path)),r,2,Gi.o))}}function uf(t,e,n){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a;return Object(Nt.__generator)(this,(function(s){switch(s.label){case 0:return r=Ji(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.Oo(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=Xc.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return Object(Nt.__generator)(this,(function(l){switch(l.label){case 0:n=Ji(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Du.forEach(e,(function(e){return Du.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Du.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return l.sent(),[3,4];case 3:if(!Uu(r=l.sent()))throw r;return zi("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=(a=o[i]).targetId,a.fromCache||(u=n.Fn.get(s),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(s,c));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function cf(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:return(n=Ji(t)).currentUser.isEqual(e)?[3,3]:(zi("SyncEngine","User change. New user:",e.toKey()),[4,tl(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach((function(t){t.forEach((function(t){t.reject(new Vi(Qi.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,uf(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function lf(t,e){var n=Ji(t),r=n.Co.get(e);if(r&&r.bo)return _s().add(r.key);var i=_s(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=n.Po.get(s[a]);i=i.unionWith(u.view.wo)}return i}function hf(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(Nt.__generator)(this,(function(o){switch(o.label){case 0:return[4,ul((n=Ji(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&of(n,e.targetId,i.To),i)]}}))}))}function ff(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){return[2,ll((e=Ji(t)).localStore).then((function(t){return uf(e,t)}))]}))}))}function df(t,e,n,r){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var i,o;return Object(Nt.__generator)(this,(function(a){switch(a.label){case 0:return[4,function(t,e){var n=Ji(t),r=Ji(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):Du.resolve(null)}))}))}((i=Ji(t)).localStore,e)];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,hh(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(ef(i,e,r||null),tf(i,e),function(t,e){Ji(Ji(t)._n).Gt(e)}(i.localStore,e)):Xi(),a.label=4;case 4:return[4,uf(i,o)];case 5:return a.sent(),[3,7];case 6:zi("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}}))}))}function pf(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return Object(Nt.__generator)(this,(function(c){switch(c.label){case 0:return _f(n=Ji(t)),wf(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,gf(n,r.toArray())]);case 1:return i=c.sent(),n.$o=!0,[4,yh(n.remoteStore,!0)];case 2:for(c.sent(),o=0,a=i;o<a.length;o++)Jl(n.remoteStore,a[o]);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(s=[],u=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?s.push(e):u=u.then((function(){return nf(n,e),sl(n.localStore,e,!0)})),Zl(n.remoteStore,e)})),[4,u]);case 4:return c.sent(),[4,gf(n,s)];case 5:return c.sent(),function(t){var e=Ji(t);e.Co.forEach((function(t,n){Zl(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new us(Co.comparator)}(n),n.$o=!1,[4,yh(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}}))}))}function gf(t,e,n){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,d,p;return Object(Nt.__generator)(this,(function(g){switch(g.label){case 0:n=Ji(t),r=[],i=[],o=0,a=e,g.label=1;case 1:return o<a.length?(u=void 0,(c=n.Vo.get(s=a[o]))&&0!==c.length?[4,al(n.localStore,va(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.Po.get(h[l]),[4,hf(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,cl(n.localStore,s)];case 8:return p=g.sent(),[4,al(n.localStore,p)];case 9:return u=g.sent(),[4,Kh(n,mf(p),s,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function mf(t){return ca(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function vf(t){var e=Ji(t);return Ji(Ji(e.localStore).persistence).fn()}function yf(t,e,n,r){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var i,o,a;return Object(Nt.__generator)(this,(function(s){switch(s.label){case 0:return(i=Ji(t)).$o?(zi("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ll(i.localStore)];case 3:return o=s.sent(),a=Ts.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,uf(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,sl(i.localStore,e,!0)];case 6:return s.sent(),nf(i,e,r),[3,8];case 7:Xi(),s.label=8;case 8:return[2]}}))}))}function bf(t,e,n){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h;return Object(Nt.__generator)(this,(function(f){switch(f.label){case 0:if(!(r=_f(t)).$o)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.Vo.has(a=o[i])?(zi("SyncEngine","Adding an already active target "+a),[3,5]):[4,cl(r.localStore,a)]:[3,6];case 2:return s=f.sent(),[4,al(r.localStore,s)];case 3:return u=f.sent(),[4,Kh(r,mf(s),u.targetId,!1)];case 4:f.sent(),Jl(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,sl(r.localStore,t,!1).then((function(){Zl(r.remoteStore,t),nf(r,t)})).catch(Oc)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function _f(t){var e=Ji(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Hh.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=lf.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Xh.bind(null,e),e.vo._r=Ah.bind(null,e.eventManager),e.vo.Mo=Ph.bind(null,e.eventManager),e}function wf(t){var e=Ji(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$h.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jh.bind(null,e),e}function If(t,e,n){var r=Ji(t);(function(t,e,n){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s,u;return Object(Nt.__generator)(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,function(t,e){var n=Ji(t),r=Fs(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return n.Ke.getBundleMetadata(t,e.id)})).then((function(t){return!!t&&t.createTime.compareTo(r)>=0}))}(t.localStore,r)];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(r)))];case 4:return n._updateProgress(Lh(r)),i=new Mh(r,t.localStore,e.R),[4,e.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=c.sent())&&n._updateProgress(a),[4,e.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=c.sent(),[4,uf(t,s.wn,void 0)];case 12:return c.sent(),[4,function(t,e){var n=Ji(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Ke.saveBundleMetadata(t,e)}))}(t.localStore,r)];case 13:return c.sent(),n._completeWith(s.progress),[3,15];case 14:return Hi("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}}))}))})(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Tf=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return this.R=Ql(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Zc(this.persistence,new $c,t.initialUser,this.R)},t.prototype.qo=function(t){return new wl(Tl.bs,this.R)},t.prototype.Bo=function(t){return new Dl},t.prototype.terminate=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Ef=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Nt.__extends)(e,t),e.prototype.initialize=function(e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,hl(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,wf(this.Qo.syncEngine)];case 4:return n.sent(),[4,hh(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Zc(this.persistence,new $c,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Ac(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Wc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?pc.withCacheSize(this.cacheSizeBytes):pc.DEFAULT;return new Bc(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,ql(),Gl(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Dl},e}(Tf),Cf=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Nt.__extends)(e,t),e.prototype.initialize=function(e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r=this;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof xl?(this.sharedClientState.syncEngine={ui:df.bind(null,n),ai:yf.bind(null,n),hi:bf.bind(null,n),fn:vf.bind(null,n),ci:ff.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Object(Nt.__awaiter)(r,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return[4,pf(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=ql();if(!xl.yt(e))throw new Vi(Qi.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Wc(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new xl(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Ef),kf=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n=this;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Yh(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=cf.bind(null,this.syncEngine),[4,yh(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new Oh},t.prototype.createDatastore=function(t){var e=Ql(t.databaseInfo.databaseId),n=new Ul(t.databaseInfo);return function(t,e,n){return new Wl(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Yh(a.syncEngine,t,0)},o=Ml.yt()?new Ml:new jl,new Yl(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,a){var s=new Vh(t,e,n,r,i,o);return a&&(s.$o=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return e=Ji(t),zi("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,$l(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();function Of(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r;return Object(Nt.__generator)(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Sf=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Rf=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new xu,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Dh(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t,e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t,e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),Af=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e,n=this;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Vi(Qi.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Object(Nt.__generator)(this,(function(u){switch(u.label){case 0:return n=Ji(t),r=Ks(n.R)+"/documents",i={documents:e.map((function(t){return Gs(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){$i(!!e.found);var n=Qs(t,e.found.name),r=Fs(e.found.updateTime),i=new Uo({mapValue:{fields:e.found.fields}});return Go.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){$i(!!e.missing),$i(!!e.readTime);var n=Qs(t,e.missing),r=Fs(e.readTime);return Go.newNoDocument(n,r)}(t,e):Xi()}(n.R,t);a.set(e.key.toString(),e)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());$i(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new rs(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t,e=this;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Co.fromPath(n);e.mutations.push(new is(r,e.precondition(r)))})),[4,function(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i;return Object(Nt.__generator)(this,(function(o){switch(o.label){case 0:return n=Ji(t),r=Ks(n.R)+"/documents",i={writes:e.map((function(t){return Ys(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Xi();e=oo.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Vi(Qi.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Qa.updateTime(e):Qa.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(oo.min()))throw new Vi(Qi.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qa.updateTime(e)}return Qa.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),Pf=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Vl(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Object(Nt.__awaiter)(t,void 0,void 0,(function(){var t,e,n=this;return Object(Nt.__generator)(this,(function(r){return t=new Af(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Io(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!as(e)}return!1},t}(),Nf=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=El.UNAUTHENTICATED,this.clientId=to.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Object(Nt.__awaiter)(r,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return zi("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Vi(Qi.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new xu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Object(Nt.__awaiter)(t,void 0,void 0,(function(){var t,n;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Ih(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function xf(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i=this;return Object(Nt.__generator)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),zi("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return Object(Nt.__awaiter)(i,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,tl(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Df(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,jf(t)];case 1:return n=i.sent(),zi("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:return(n=Ji(t)).asyncQueue.verifyOperationInProgress(),zi("RemoteStore","RemoteStore received new credentials"),r=ih(n),n.Or.add(3),[4,$l(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Xl(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function jf(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(zi("FirestoreClient","Using default OfflineComponentProvider"),[4,xf(t,new Tf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Mf(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(zi("FirestoreClient","Using default OnlineComponentProvider"),[4,Df(t,new kf)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Lf(t){return jf(t).then((function(t){return t.persistence}))}function Ff(t){return jf(t).then((function(t){return t.localStore}))}function Uf(t){return Mf(t).then((function(t){return t.remoteStore}))}function qf(t){return Mf(t).then((function(t){return t.syncEngine}))}function Gf(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e,n;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return[4,Mf(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Bh.bind(null,e.syncEngine),n.onUnlisten=zh.bind(null,e.syncEngine),n)]}}))}))}function Qf(t,e,n){var r=this;void 0===n&&(n={});var i=new xu;return t.asyncQueue.enqueueAndForget((function(){return Object(Nt.__awaiter)(r,void 0,void 0,(function(){var r;return Object(Nt.__generator)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Sf({next:function(o){e.enqueueAndForget((function(){return Rh(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Vi(Qi.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Vi(Qi.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new xh(la(n.path),o,{includeMetadataChanges:!0,so:!0});return Sh(t,a)},[4,Gf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Vf(t,e,n){var r=this;void 0===n&&(n={});var i=new xu;return t.asyncQueue.enqueueAndForget((function(){return Object(Nt.__awaiter)(r,void 0,void 0,(function(){var r;return Object(Nt.__generator)(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Sf({next:function(n){e.enqueueAndForget((function(){return Rh(t,a)})),n.fromCache&&"server"===r.source?i.reject(new Vi(Qi.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new xh(n,o,{includeMetadataChanges:!0,so:!0});return Sh(t,a)},[4,Gf(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Bf=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},Kf=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),zf=new Map,Wf=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Hf=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(El.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Yf=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Xf=function(){function t(t){var e=this;this.currentUser=El.UNAUTHENTICATED,this.oc=new xu,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){zi("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(zi("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(zi("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?($i("string"==typeof n.accessToken),new Wf(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return Object(Nt.__awaiter)(n,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return $i(null===t||"string"==typeof t),new El(t)},t}(),$f=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=El.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Jf=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new $f(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(El.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Zf(t,e,n){if(!n)throw new Vi(Qi.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function td(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Vi(Qi.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function ed(t,e,n,r){if(!0===e&&!0===r)throw new Vi(Qi.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function nd(t){if(!Co.isDocumentKey(t))throw new Vi(Qi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function rd(t){if(Co.isDocumentKey(t))throw new Vi(Qi.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function id(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Xi()}function od(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Vi(Qi.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=id(t);throw new Vi(Qi.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function ad(t,e){if(e<=0)throw new Vi(Qi.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var sd=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Vi(Qi.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Vi(Qi.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,ed("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),ud=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sd({}),this._settingsFrozen=!1,t instanceof Kf?(this._databaseId=t,this._credentials=new Hf):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Vi(Qi.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kf(t.options.projectId)}(t),this._credentials=new Xf(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Vi(Qi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Vi(Qi.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sd(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Hf;switch(t.type){case"gapi":var e=t.client;return $i(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Jf(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Vi(Qi.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=zf.get(this))&&(zi("ComponentProvider","Removing Datastore"),zf.delete(this),t.terminate()),Promise.resolve();var t},t}(),cd=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new hd(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ld=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),hd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,la(r))||this)._path=r,i.type="collection",i}return Object(Nt.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new cd(this.firestore,null,new Co(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ld);function fd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(xt.getModularInstance)(t),Zf("collection","path",e),t instanceof ud)return rd(n=lo.fromString.apply(lo,Object(Nt.__spreadArray)([e],r))),new hd(t,null,n);if(!(t instanceof cd||t instanceof hd))throw new Vi(Qi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return rd(n=lo.fromString.apply(lo,Object(Nt.__spreadArray)([t.path],r)).child(lo.fromString(e))),new hd(t.firestore,null,n)}function dd(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(xt.getModularInstance)(t),1===arguments.length&&(e=to.u()),Zf("doc","path",e),t instanceof ud)return nd(n=lo.fromString.apply(lo,Object(Nt.__spreadArray)([e],r))),new cd(t,null,new Co(n));if(!(t instanceof cd||t instanceof hd))throw new Vi(Qi.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return nd(n=t._path.child(lo.fromString.apply(lo,Object(Nt.__spreadArray)([e],r)))),new cd(t.firestore,t instanceof hd?t.converter:null,new Co(n))}function pd(t,e){return t=Object(xt.getModularInstance)(t),e=Object(xt.getModularInstance)(e),(t instanceof cd||t instanceof hd)&&(e instanceof cd||e instanceof hd)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function gd(t,e){return t=Object(xt.getModularInstance)(t),e=Object(xt.getModularInstance)(e),t instanceof ld&&e instanceof ld&&t.firestore===e.firestore&&ba(t._query,e._query)&&t.converter===e.converter}var md=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Vl(this,"async_queue_retry"),this.Ic=function(){var e=Gl();e&&zi("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Gl();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Gl();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new xu;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t,e=this;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Uu(t=n.sent()))throw t;return zi("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Wi("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=wh.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Xi()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t;return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function vd(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var yd=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new xu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),bd=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new md,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Nt.__extends)(e,t),e.prototype._terminate=function(){return this._firestoreClient||wd(this),this._firestoreClient.terminate()},e}(ud);function _d(t){return t._firestoreClient||wd(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function wd(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Bf(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Nf(t._credentials,t._queue,r)}function Id(t,e,n){var r=this,i=new xu;return t.asyncQueue.enqueue((function(){return Object(Nt.__awaiter)(r,void 0,void 0,(function(){var r;return Object(Nt.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,xf(t,n)];case 1:return o.sent(),[4,Df(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Qi.FAILED_PRECONDITION||t.code===Qi.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return i.promise}))}function Td(t){if(t._initialized||t._terminated)throw new Vi(Qi.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Ed=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Vi(Qi.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fo(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Cd=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(go.fromBase64String(e))}catch(e){throw new Vi(Qi.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(go.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),kd=function(t){this._methodName=t},Od=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Vi(Qi.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Vi(Qi.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return eo(this._lat,t._lat)||eo(this._long,t._long)},t}(),Sd=/^__.*__$/,Rd=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new $a(t,this.data,this.fieldMask,e,this.fieldTransforms):new Xa(t,this.data,e,this.fieldTransforms)},t}(),Ad=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new $a(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Pd(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Xi()}}var Nd=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Fc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,kc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,kc:!0})},t.prototype.Lc=function(t){return Jd(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(Pd(this.Nc)&&Sd.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),xd=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Ql(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new Nd({Nc:t,methodName:e,qc:n,path:fo.emptyPath(),kc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Dd(t){var e=t._freezeSettings(),n=Ql(t._databaseId);return new xd(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jd(t,e,n,r,i,o){void 0===o&&(o={});var a=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Hd("Data must be an object, but it was:",a,r);var s,u,c=zd(r,a);if(o.merge)s=new po(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Yd(e,f[h],n);if(!a.contains(d))throw new Vi(Qi.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Zd(l,d)||l.push(d)}s=new po(l),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new Rd(new Uo(c),s,u)}var Md=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nt.__extends)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw t.Lc(1===t.Nc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(kd);function Ld(t,e,n){return new Nd({Nc:3,qc:e.settings.qc,methodName:t._methodName,kc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Fd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nt.__extends)(e,t),e.prototype._toFieldTransform=function(t){return new qa(t.path,new Na)},e.prototype.isEqual=function(t){return t instanceof e},e}(kd),Ud=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(Nt.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=Ld(this,t,!0),n=this.Kc.map((function(t){return Kd(t,e)})),r=new xa(n);return new qa(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(kd),qd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return Object(Nt.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=Ld(this,t,!0),n=this.Kc.map((function(t){return Kd(t,e)})),r=new ja(n);return new qa(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(kd),Gd=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return Object(Nt.__extends)(e,t),e.prototype._toFieldTransform=function(t){var e=new La(t.R,Oa(t.R,this.Qc));return new qa(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(kd);function Qd(t,e,n,r){var i=t.Uc(1,e,n);Hd("Data must be an object, but it was:",i,r);var o=[],a=Uo.empty();so(r,(function(t,r){var s=$d(e,t,n);r=Object(xt.getModularInstance)(r);var u=i.Oc(s);if(r instanceof Md)o.push(s);else{var c=Kd(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new po(o);return new Ad(a,s,i.fieldTransforms)}function Vd(t,e,n,r,i,o){var a=t.Uc(1,e,n),s=[Yd(e,r,n)],u=[i];if(o.length%2!=0)throw new Vi(Qi.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(Yd(e,o[c])),u.push(o[c+1]);for(var l=[],h=Uo.empty(),f=s.length-1;f>=0;--f)if(!Zd(l,s[f])){var d=s[f],p=u[f];p=Object(xt.getModularInstance)(p);var g=a.Oc(d);if(p instanceof Md)l.push(d);else{var m=Kd(p,g);null!=m&&(l.push(d),h.set(d,m))}}var v=new po(l);return new Ad(h,v,a.fieldTransforms)}function Bd(t,e,n,r){return void 0===r&&(r=!1),Kd(n,t.Uc(r?4:3,e))}function Kd(t,e){if(Wd(t=Object(xt.getModularInstance)(t)))return Hd("Unsupported field value:",e,t),zd(t,e);if(t instanceof kd)return function(t,e){if(!Pd(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.kc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Kd(o[i],e.Mc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(xt.getModularInstance)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Oa(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=io.fromDate(t);return{timestampValue:js(e.R,n)}}if(t instanceof io)return n=new io(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:js(e.R,n)};if(t instanceof Od)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Cd)return{bytesValue:Ms(e.R,t._byteString)};if(t instanceof cd){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Us(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+id(t))}(t,e)}function zd(t,e){var n={};return uo(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):so(t,(function(t,r){var i=Kd(r,e.Fc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Wd(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof io||t instanceof Od||t instanceof Cd||t instanceof cd||t instanceof kd)}function Hd(t,e,n){if(!Wd(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=id(n);throw e.Lc("an object"===r?t+" a custom object":t+" "+r)}}function Yd(t,e,n){if((e=Object(xt.getModularInstance)(e))instanceof Ed)return e._internalPath;if("string"==typeof e)return $d(t,e);throw Jd("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Xd=new RegExp("[~\\*/\\[\\]]");function $d(t,e,n){if(e.search(Xd)>=0)throw Jd("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Ed.bind.apply(Ed,Object(Nt.__spreadArray)([void 0],e.split(".")))))._internalPath}catch(Jp){throw Jd("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Jd(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Vi(Qi.INVALID_ARGUMENT,(s+=". ")+t+u)}function Zd(t,e){return t.some((function(t){return t.isEqual(e)}))}var tp=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new cd(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new ep(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(np("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),ep=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nt.__extends)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(tp);function np(t,e){return"string"==typeof e?$d(t,e):e instanceof Ed?e._internalPath:e._delegate._internalPath}var rp=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),ip=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return Object(Nt.__extends)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new op(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(np("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(tp),op=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nt.__extends)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(ip),ap=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new rp(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new op(n._firestore,n._userDataWriter,r.key,r,new rp(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Vi(Qi.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new op(t._firestore,t._userDataWriter,e.doc.key,e.doc,new rp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new op(t._firestore,t._userDataWriter,e.doc.key,e.doc,new rp(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:sp(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function sp(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Xi()}}function up(t,e){return t instanceof ip&&e instanceof ip?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof ap&&e instanceof ap&&t._firestore===e._firestore&&gd(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function cp(t){if(fa(t)&&0===t.explicitOrderBy.length)throw new Vi(Qi.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var lp=function(){};function hp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var fp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return Object(Nt.__extends)(e,t),e.prototype._apply=function(t){var e=Dd(t.firestore),n=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Vi(Qi.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){bp(a,o);for(var u=[],c=0,l=a;c<l.length;c++)u.push(yp(r,t,l[c]));s={arrayValue:{values:u}}}else s=yp(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||bp(a,o),s=Bd(n,"where",a,"in"===o||"not-in"===o);var h=Wo.create(i,o,s);return function(t,e){if(e.g()){var n=pa(t);if(null!==n&&!n.isEqual(e.field))throw new Vi(Qi.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=da(t);null!==r&&_p(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Vi(Qi.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new ld(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(lp),dp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return Object(Nt.__extends)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Vi(Qi.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Vi(Qi.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ia(e,n);return function(t,e){if(null===da(t)){var n=pa(t);null!==n&&_p(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new ld(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new ua(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(lp),pp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Nt.__extends)(e,t),e.prototype._apply=function(t){return new ld(t.firestore,t.converter,ya(t._query,this.Hc,this.Jc))},e}(lp),gp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(Nt.__extends)(e,t),e.prototype._apply=function(t){var e=vp(t,this.type,this.Yc,this.Xc);return new ld(t.firestore,t.converter,function(t,e){return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(lp),mp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return Object(Nt.__extends)(e,t),e.prototype._apply=function(t){var e=vp(t,this.type,this.Yc,this.Xc);return new ld(t.firestore,t.converter,function(t,e){return new ua(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(lp);function vp(t,e,n,r){if(n[0]=Object(xt.getModularInstance)(n[0]),n[0]instanceof tp)return function(t,e,n,r,i){if(!r)throw new Vi(Qi.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=ma(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(No(e,r.key));else{var c=r.data.field(u.field);if(_o(c))throw new Vi(Qi.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Vi(Qi.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new na(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Dd(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Vi(Qi.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Vi(Qi.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!ga(t)&&-1!==c.indexOf("/"))throw new Vi(Qi.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(lo.fromString(c));if(!Co.isDocumentKey(l))throw new Vi(Qi.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Co(l);s.push(No(e,h))}else{var f=Bd(n,r,c);s.push(f)}}return new na(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function yp(t,e,n){if("string"==typeof(n=Object(xt.getModularInstance)(n))){if(""===n)throw new Vi(Qi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!ga(e)&&-1!==n.indexOf("/"))throw new Vi(Qi.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(lo.fromString(n));if(!Co.isDocumentKey(r))throw new Vi(Qi.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return No(t,new Co(r))}if(n instanceof cd)return No(t,n._key);throw new Vi(Qi.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+id(n)+".")}function bp(t,e){if(!Array.isArray(t)||0===t.length)throw new Vi(Qi.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Vi(Qi.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function _p(t,e,n){if(!n.isEqual(e))throw new Vi(Qi.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var wp=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),ko(t)){case 0:return null;case 1:return t.booleanValue;case 2:return yo(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(bo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Xi()}},t.prototype.convertObject=function(t,e){var n=this,r={};return so(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Od(yo(t.latitude),yo(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=function t(e){var n=e.mapValue.fields.__previous_value__;return _o(n)?t(n):n}(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(wo(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=vo(t);return new io(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=lo.fromString(t);$i(cu(n));var r=new Kf(n.get(1),n.get(3)),i=new Co(n.popFirst(5));return r.isEqual(e)||Wi("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Ip(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Tp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Nt.__extends)(e,t),e.prototype.convertBytes=function(t){return new Cd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new cd(this.firestore,null,e)},e}(wp),Ep=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Dd(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=Cp(t,this._firestore),i=Ip(r.converter,e,n),o=jd(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Qa.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=Cp(t,this._firestore);return o="string"==typeof(e=Object(xt.getModularInstance)(e))||e instanceof Ed?Vd(this._dataReader,"WriteBatch.update",a._key,e,n,r):Qd(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,Qa.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=Cp(t,this._firestore);return this._mutations=this._mutations.concat(new rs(e._key,Qa.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Vi(Qi.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function Cp(t,e){if((t=Object(xt.getModularInstance)(t)).firestore!==e)throw new Vi(Qi.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var kp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Nt.__extends)(e,t),e.prototype.convertBytes=function(t){return new Cd(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new cd(this.firestore,null,e)},e}(wp);function Op(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=od(t,cd);var o=od(t.firestore,bd),a=Dd(o);return Rp(o,[("string"==typeof(e=Object(xt.getModularInstance)(e))||e instanceof Ed?Vd(a,"updateDoc",t._key,e,n,r):Qd(a,"updateDoc",t._key,e)).toMutation(t._key,Qa.exists(!0))])}function Sp(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(xt.getModularInstance)(t);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||vd(i[s])||(a=i[s],s++);var u,c,l,h={includeMetadataChanges:a.includeMetadataChanges};if(vd(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof cd)c=od(t.firestore,bd),l=la(t._key.path),u={next:function(e){i[s]&&i[s](Ap(c,t,e))},error:i[s+1],complete:i[s+2]};else{var d=od(t,ld);c=od(d.firestore,bd),l=d._query;var p=new kp(c);u={next:function(t){i[s]&&i[s](new ap(c,p,d,t))},error:i[s+1],complete:i[s+2]},cp(t._query)}return function(t,e,n,r){var i=this,o=new Sf(r),a=new xh(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Object(Nt.__awaiter)(i,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return e=Sh,[4,Gf(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(Nt.__awaiter)(i,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return e=Rh,[4,Gf(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(_d(c),l,h,u)}function Rp(t,e){return function(t,e){var n=this,r=new xu;return t.asyncQueue.enqueueAndForget((function(){return Object(Nt.__awaiter)(n,void 0,void 0,(function(){var n;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:return n=Wh,[4,qf(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(_d(t),e)}function Ap(t,e,n){var r=n.docs.get(e._key),i=new kp(t);return new ip(t,i,e._key,r,new rp(n.hasPendingWrites,n.fromCache),e.converter)}var Pp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Nt.__extends)(e,t),e.prototype.get=function(e){var n=this,r=Cp(e,this._firestore),i=new kp(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new ip(n._firestore,i,r._key,t._document,new rp(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Dd(t)}return t.prototype.get=function(t){var e=this,n=Cp(t,this._firestore),r=new Tp(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Xi();var i=t[0];if(i.isFoundDocument())return new tp(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new tp(e._firestore,r,n._key,null,n.converter);throw Xi()}))},t.prototype.set=function(t,e,n){var r=Cp(t,this._firestore),i=Ip(r.converter,e,n),o=jd(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=Cp(t,this._firestore);return o="string"==typeof(e=Object(xt.getModularInstance)(e))||e instanceof Ed?Vd(this._dataReader,"Transaction.update",a._key,e,n,r):Qd(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=Cp(t,this._firestore);return this._transaction.delete(e._key),this},t}());function Np(){if("undefined"==typeof Uint8Array)throw new Vi(Qi.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function xp(){if("undefined"==typeof atob)throw new Vi(Qi.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var Dp=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return xp(),new t(Cd.fromBase64String(e))},t.fromUint8Array=function(e){return Np(),new t(Cd.fromUint8Array(e))},t.prototype.toBase64=function(){return xp(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return Np(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),jp=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Td(t=od(t,bd));var n=_d(t),r=t._freezeSettings(),i=new kf;return Id(n,i,new Ef(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Td(t=od(t,bd));var e=_d(t),n=t._freezeSettings(),r=new kf;return Id(e,r,new Cf(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Vi(Qi.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new xu;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Object(Nt.__awaiter)(e,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return Mu.yt()?[4,Mu.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}}))}))}(Wc(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),Mp=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Kf||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Hi("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=od(t,ud))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Hi("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(xt.createMockUserToken)(r.mockUserToken),a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new Vi(Qi.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Yf(new Wf(o,new El(a)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(Nt.__awaiter)(e,void 0,void 0,(function(){var e,n;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return[4,Lf(t)];case 1:return e=r.sent(),[4,Uf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Ji(t);return e.Or.delete(0),Xl(e)}(n))]}}))}))}))}(_d(od(this._delegate,bd)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Object(Nt.__awaiter)(e,void 0,void 0,(function(){var e,n;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return[4,Lf(t)];case 1:return e=r.sent(),[4,Uf(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return(e=Ji(t)).Or.add(0),[4,$l(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(_d(od(this._delegate,bd)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&ed("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new xu;return t.asyncQueue.enqueueAndForget((function(){return Object(Nt.__awaiter)(e,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return e=Zh,[4,qf(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(_d(od(this._delegate,bd)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Sf(e);return t.asyncQueue.enqueueAndForget((function(){return Object(Nt.__awaiter)(n,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ji(t).Gr.add(e),e.next()},[4,Gf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Object(Nt.__awaiter)(n,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Ji(t).Gr.delete(e)},[4,Gf(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(_d(t=od(t,bd)),vd(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Vi(Qi.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Xp(this,fd(this._delegate,t))}catch(t){throw Qp(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new Gp(this,dd(this._delegate,t))}catch(t){throw Qp(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Wp(this,function(t,e){if(t=od(t,ud),Zf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Vi(Qi.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ld(t,null,function(t){return new ua(lo.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Qp(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new xu;return t.asyncQueue.enqueueAndForget((function(){return Object(Nt.__awaiter)(n,void 0,void 0,(function(){var n;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:return[4,function(t){return Mf(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new Pf(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}(_d(t),(function(n){return e(new Pp(t,n))}))}(this._delegate,(function(n){return t(new Fp(e,n))}))},t.prototype.batch=function(){var t=this;return _d(this._delegate),new Up(new Ep(this._delegate,(function(e){return Rp(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Vi(Qi.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Vi(Qi.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),Lp=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Nt.__extends)(e,t),e.prototype.convertBytes=function(t){return new Dp(new Cd(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return Gp.eu(e,this.firestore,null)},e}(wp),Fp=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new Lp(t)}return t.prototype.get=function(t){var e=this,n=$p(t);return this._delegate.get(n).then((function(t){return new Kp(e._firestore,new ip(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=$p(t);return n?(td("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=$p(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,Object(Nt.__spreadArray)([a,e,n],i)),this},t.prototype.delete=function(t){var e=$p(t);return this._delegate.delete(e),this},t}(),Up=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=$p(t);return n?(td("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=$p(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,Object(Nt.__spreadArray)([a,e,n],i)),this},t.prototype.delete=function(t){var e=$p(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),qp=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new op(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new zp(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new Lp(e),n),i.set(n,o)),o},t}();qp.su=new WeakMap;var Gp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Lp(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Vi(Qi.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new cd(n._delegate,r,new Co(e)))},t.eu=function(e,n,r){return new t(n,new cd(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Xp(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Xp(this.firestore,fd(this._delegate,t))}catch(t){throw Qp(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(xt.getModularInstance)(t))instanceof cd&&pd(this._delegate,t)},t.prototype.set=function(t,e){e=td("DocumentReference.set",e);try{return function(t,e,n){t=od(t,cd);var r=od(t.firestore,bd),i=Ip(t.converter,e,n);return Rp(r,[jd(Dd(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Qa.none())])}(this._delegate,t,e)}catch(t){throw Qp(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Op(this._delegate,t):Op.apply(void 0,Object(Nt.__spreadArray)([this._delegate,t,e],n))}catch(t){throw Qp(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return Rp(od((t=this._delegate).firestore,bd),[new rs(t._key,Qa.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Vp(e),i=Bp(e,(function(e){return new Kp(t.firestore,new ip(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return Sp(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=od(t,cd);var e=od(t.firestore,bd),n=_d(e),r=new kp(e);return function(t,e){var n=this,r=new xu;return t.asyncQueue.enqueueAndForget((function(){return Object(Nt.__awaiter)(n,void 0,void 0,(function(){var n;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r,i;return Object(Nt.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Ji(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Vi(Qi.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Ih(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}}))}))},[4,Ff(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new ip(e,r,t._key,n,new rp(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=od(t,cd);var e=od(t.firestore,bd);return Qf(_d(e),t._key,{source:"server"}).then((function(n){return Ap(e,t,n)}))}(this._delegate):function(t){t=od(t,cd);var e=od(t.firestore,bd);return Qf(_d(e),t._key).then((function(n){return Ap(e,t,n)}))}(this._delegate)).then((function(t){return new Kp(e.firestore,new ip(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?qp.nu(this.firestore,e):null))},t}();function Qp(t,e,n){return t.message=t.message.replace(e,n),t}function Vp(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!vd(r))return r}return{}}function Bp(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=vd(t[0])?t[0]:vd(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Kp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new Gp(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return up(this._delegate,t._delegate)},t}(),zp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Nt.__extends)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Kp),Wp=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new Lp(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,hp(this._delegate,function(t,e,n){var r=e,i=np("where",t);return new fp(i,r,n)}(e,n,r)))}catch(e){throw Qp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,hp(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=np("orderBy",t);return new dp(r,n)}(e,n)))}catch(e){throw Qp(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,hp(this._delegate,function(t){return ad("limit",t),new pp("limit",t,"F")}(e)))}catch(e){throw Qp(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,hp(this._delegate,function(t){return ad("limitToLast",t),new pp("limitToLast",t,"L")}(e)))}catch(e){throw Qp(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,hp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new gp("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw Qp(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,hp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new gp("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw Qp(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,hp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new mp("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw Qp(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,hp(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new mp("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw Qp(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return gd(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=od(t,ld);var e=od(t.firestore,bd),n=_d(e),r=new kp(e);return function(t,e){var n=this,r=new xu;return t.asyncQueue.enqueueAndForget((function(){return Object(Nt.__awaiter)(n,void 0,void 0,(function(){var n;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s;return Object(Nt.__generator)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,ul(t,e,!0)];case 1:return s=u.sent(),r=new qh(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=Ih(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,Ff(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new ap(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=od(t,ld);var e=od(t.firestore,bd),n=_d(e),r=new kp(e);return Vf(n,t._query,{source:"server"}).then((function(n){return new ap(e,r,t,n)}))}(this._delegate):function(t){t=od(t,ld);var e=od(t.firestore,bd),n=_d(e),r=new kp(e);return cp(t._query),Vf(n,t._query).then((function(n){return new ap(e,r,t,n)}))}(this._delegate)).then((function(t){return new Yp(e.firestore,new ap(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=Vp(e),i=Bp(e,(function(e){return new Yp(t.firestore,new ap(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return Sp(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?qp.nu(this.firestore,e):null))},t}(),Hp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new zp(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Yp=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Wp(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new zp(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Hp(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new zp(n._firestore,r))}))},t.prototype.isEqual=function(t){return up(this._delegate,t._delegate)},t}(),Xp=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Nt.__extends)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new Gp(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new Gp(this.firestore,void 0===t?dd(this._delegate):dd(this._delegate,t))}catch(t){throw Qp(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=od(t.firestore,bd),r=dd(t),i=Ip(t.converter,e);return Rp(n,[jd(Dd(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Qa.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new Gp(e.firestore,t)}))},e.prototype.isEqual=function(t){return pd(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?qp.nu(this.firestore,t):null))},e}(Wp);function $p(t){return od(t,cd)}var Jp,Zp,tg=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Ed.bind.apply(Ed,Object(Nt.__spreadArray)([void 0],t)))}return t.documentId=function(){return new t(fo.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(xt.getModularInstance)(t))instanceof Ed&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),eg=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Fd("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Md("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ud("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new qd("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Gd("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),ng=n("/6Yf"),rg={Firestore:Mp,GeoPoint:Od,Timestamp:io,Blob:Dp,Transaction:Fp,WriteBatch:Up,DocumentReference:Gp,DocumentSnapshot:Kp,Query:Wp,QueryDocumentSnapshot:zp,QuerySnapshot:Yp,CollectionReference:Xp,FieldPath:tg,FieldValue:eg,setLogLevel:function(t){Bi.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new ng.Component("firestore",(function(t){return function(t,e){return new Mp(t,new bd(t,e),new jp)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},rg)))})(Jp=Pt.default),Jp.registerVersion("@firebase/firestore","2.3.10"),(Zp=Mp).prototype.loadBundle=function(t){return function(t,e){var n=_d(t=od(t,bd)),r=new yd;return function(t,e,n,r){var i=this,o=function(t,e){return function(t,e){return new Rf(t,e)}(function(t,e){if(t instanceof Uint8Array)return Of(t,e);if(t instanceof ArrayBuffer)return Of(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof t?(new TextEncoder).encode(t):t),e)}(n,Ql(e));t.asyncQueue.enqueueAndForget((function(){return Object(Nt.__awaiter)(i,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return e=If,[4,qf(t)];case 1:return e.apply(void 0,[n.sent(),o,r]),[2]}}))}))}))}(n,t._databaseId,e,r),r}(this._delegate,t)},Zp.prototype.namedQuery=function(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return Object(Nt.__awaiter)(n,void 0,void 0,(function(){var n;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=Ji(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Ke.getNamedQuery(t,e)}))},[4,Ff(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(_d(e=od(e,bd)),n).then((function(t){return t?new ld(e,null,t.query):null}))).then((function(t){return t?new Wp(r,t):null}))};var ig={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},og=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return Object(Nt.__extends)(e,t),e}(Error),ag=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t;return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getContext=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t,e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();function sg(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var ug,cg,lg,hg=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return sg(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?sg(t,(function(t){return e.decode(t)})):t},t}(),fg=function(){function t(t,e,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new hg,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new ag(e,n),this.cancelAllRequests=new Promise((function(t){a.deleteService=function(){return t()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(Jp){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r,i,o;return Object(Nt.__generator)(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},t.prototype.getAppCheckToken=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t;return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype.call=function(t,e,n){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f;return Object(Nt.__generator)(this,(function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(a=d.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new og("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(n.timeout||7e4),u=s.timer,c=s.promise,[4,Promise.race([dg(u,this.postJSON(r,i,o)),c,dg(u,this.cancelAllRequests)])];case 2:if(!(l=d.sent()))throw new og("cancelled","Firebase Functions instance was deleted.");if(h=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!ig[s])return new og("internal","internal");r=ig[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(Jp){}return"ok"===r?null:new og(r,i,o)}(l.status,l.json,this.serializer))throw h;if(!l.json)throw new og("internal","Response is not valid JSON object.");if(void 0===(f=l.json.data)&&(f=l.json.result),void 0===f)throw new og("internal","Response is missing data field.");return[2,{data:this.serializer.decode(f)}]}}))}))},t}();function dg(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}ug=Pt.default,cg=fetch.bind(self),lg={Functions:fg},ug.INTERNAL.registerComponent(new ng.Component("functions",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal"),a=t.getProvider("messaging");return new fg(r,i,a,o,n,cg)}),"PUBLIC").setServiceProps(lg).setMultipleInstances(!0)),Pt.default.registerVersion("@firebase/functions","0.6.14"),n("gHGA");var pg=function(t){function e(n,r){var i=t.call(this,gg(n),"Firebase Storage: "+r+" ("+gg(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Object(Nt.__extends)(e,t),e.prototype._codeEquals=function(t){return gg(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(xt.FirebaseError);function gg(t){return"storage/"+t}function mg(){return new pg("unknown","An unknown error occurred, please check the error payload for server response.")}function vg(){return new pg("canceled","User canceled the upload/download.")}function yg(){return new pg("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function bg(t){return new pg("invalid-argument",t)}function _g(){return new pg("app-deleted","The Firebase app was deleted.")}function wg(t){return new pg("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ig(t,e){return new pg("invalid-format","String does not match format '"+t+"': "+e)}function Tg(t){throw new pg("internal-error","Internal error: "+t)}var Eg={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Cg=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function kg(t,e){switch(t){case Eg.RAW:return new Cg(Og(e));case Eg.BASE64:case Eg.BASE64URL:return new Cg(Sg(t,e));case Eg.DATA_URL:return new Cg((n=new Rg(e)).base64?Sg(Eg.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Jp){throw Ig(Eg.DATA_URL,"Malformed data URL.")}return Og(e)}(n.rest),function(t){return new Rg(t).contentType}(e))}var n;throw mg()}function Og(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Sg(t,e){switch(t){case Eg.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Ig(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Eg.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Ig(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(Jp){throw Ig(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var Rg=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Ig(Eg.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=r).length>=";base64".length&&";base64"===n.substring(n.length-";base64".length),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}}(),Ag={STATE_CHANGED:"state_changed"},Pg={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ng(t){switch(t){case"running":case"pausing":case"canceling":return Pg.RUNNING;case"paused":return Pg.PAUSED;case"success":return Pg.SUCCESS;case"canceled":return Pg.CANCELED;case"error":default:return Pg.ERROR}}var xg=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),Dg=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=xg.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=xg.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=xg.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Tg("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Tg("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Tg("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Jp){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Tg("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),jg=function(){function t(){}return t.prototype.createConnection=function(){return new Dg},t}(),Mg=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(Jp){return new t(e,"")}if(""===r.path)return r;throw new pg("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function o(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:o}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(e);if(l){var h=l[c.indices.path];h||(h=""),r=new t(l[c.indices.bucket],h),c.postModify(r);break}}if(null==r)throw function(t){return new pg("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),Lg=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function Fg(t){return"string"==typeof t||t instanceof String}function Ug(t){return qg()&&t instanceof Blob}function qg(){return"undefined"!=typeof Blob}function Gg(t,e,n,r){if(r<e)throw bg("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw bg("Invalid value for '"+t+"'. Expected "+n+" or less.")}function Qg(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function Vg(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var Bg=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,a=n.connection;if(n.wasSuccessCode)try{var s=t.callback_(a,a.getResponseText());void 0!==s?i(s):i()}catch(Jp){o(Jp)}else null!==a?((r=mg()).serverResponse=a.getResponseText(),o(t.errorCallback_?t.errorCallback_(a,r):r)):o(r=n.canceled?t.appDelete_?_g():vg():new pg("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new Kg(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,a=!1,s=0;function u(){return 2===s}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout((function(){o=null,function(e,n){if(n)e(!1,new Kg(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===xg.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new Kg(a,r))}else{var s=r.getErrorCode()===xg.ABORT;e(!1,new Kg(!1,null,s))}}))}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(f,u())}),e)}function f(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(Nt.__spreadArray)([null,t],e));else{var r,o=u()||a;o?l.call.apply(l,Object(Nt.__spreadArray)([null,t],e)):(i<64&&(i*=2),1===s?(s=2,r=0):r=1e3*(i+Math.random()),h(r))}}var d=!1;function p(t){d||(d=!0,c||(null!==o?(t||(s=2),clearTimeout(o),h(0)):t||(s=1)))}return h(0),setTimeout((function(){a=!0,p(!0)}),r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),Kg=function(){return function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n}}();function zg(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function Wg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=zg();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(qg())return new Blob(t);throw new pg("unsupported-environment","This browser doesn't seem to support creating Blobs")}var Hg=function(){function t(t,e){var n=0,r="";Ug(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(Ug(this.data_)){var r=(o=e,a=n,(i=this.data_).webkitSlice?i.webkitSlice(o,a):i.mozSlice?i.mozSlice(o,a):i.slice?i.slice(o,a):null);return null===r?null:new t(r)}var i,o,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(qg()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(Wg.apply(null,r))}var i=e.map((function(t){return Fg(t)?kg(Eg.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();function Yg(t){var e,n;try{e=JSON.parse(t)}catch(Jp){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function Xg(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function $g(t,e){return e}var Jg=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||$g}}(),Zg=null;function tm(){if(Zg)return Zg;var t=[];t.push(new Jg("bucket")),t.push(new Jg("generation")),t.push(new Jg("metageneration")),t.push(new Jg("name","fullPath",!0));var e=new Jg("name");e.xform=function(t,e){return function(t){return!Fg(t)||t.length<2?t:Xg(t)}(e)},t.push(e);var n=new Jg("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new Jg("timeCreated")),t.push(new Jg("updated")),t.push(new Jg("md5Hash",null,!0)),t.push(new Jg("cacheControl",null,!0)),t.push(new Jg("contentDisposition",null,!0)),t.push(new Jg("contentEncoding",null,!0)),t.push(new Jg("contentLanguage",null,!0)),t.push(new Jg("contentType",null,!0)),t.push(new Jg("metadata","customMetadata",!0)),Zg=t}function em(t,e,n){var r=Yg(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new Mg(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function nm(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var rm=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function im(t){if(!t)throw mg()}function om(t,e){return function(n,r){var i=em(t,r,e);return im(null!==i),i}}function am(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new pg("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new pg("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new pg("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new pg("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function sm(t){var e=am(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new pg("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function um(t,e,n){var r=Qg(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new rm(r,"GET",om(t,n),i);return o.errorHandler=sm(e),o}function cm(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var lm=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function hm(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Jp){im(!1)}return im(!!n&&-1!==(e||["active"]).indexOf(n)),n}var fm=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function dm(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var pm=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=tm(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=cm(e,r,i),s={name:a.fullPath},u=Qg(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=nm(a,n),h=new rm(u,"POST",(function(t){var e;hm(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Jp){im(!1)}return im(Fg(e)),e}),t.maxUploadRetryTime);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=am(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=new rm(n,"POST",(function(t){var e=hm(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Jp){im(!1)}n||im(!1);var i=Number(n);return im(!isNaN(i)),new lm(i,r.size(),"final"===e)}),t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=am(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new lm(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=function(t,e,n,r,i,o,a,s){var u=new lm(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new pg("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(h,h+l);if(null===d)throw yg();var p=new rm(n,"POST",(function(t,n){var i,a=hm(t,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?om(e,o)(t,n):null,new lm(s,c,"final"===a,i)}),e.maxUploadRetryTime);return p.headers=f,p.body=d.uploadData(),p.progressCallback=s||null,p.errorHandler=am(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Jp){return t._error=Jp,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=um(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=cm(e,r,i),c=nm(u,n),l=Hg.getBlob("--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+s+"--");if(null===l)throw yg();var h={name:u.fullPath},f=Qg(o,t.host),d=t.maxUploadRetryTime,p=new rm(f,"POST",om(t,n),d);return p.urlParams=h,p.headers=a,p.body=l.uploadData(),p.errorHandler=am(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=vg(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=Ng(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new fm(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(Ng(this._state)){case Pg.SUCCESS:dm(this._resolve.bind(null,this.snapshot))();break;case Pg.CANCELED:case Pg.ERROR:dm(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(Ng(this._state)){case Pg.RUNNING:case Pg.PAUSED:t.next&&dm(t.next.bind(t,this.snapshot))();break;case Pg.SUCCESS:t.complete&&dm(t.complete.bind(t))();break;case Pg.CANCELED:case Pg.ERROR:t.error&&dm(t.error.bind(t,this._error))();break;default:t.error&&dm(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),gm=function(){function t(t,e){this._service=t,this._location=e instanceof Mg?e:Mg.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new Mg(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return Xg(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new Mg(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw wg(t)},t}();function mm(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&Gg("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=Qg(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new rm(a,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=Yg(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new Mg(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)s=t._makeStorageReference(new Mg(e,c[u].name)),r.items.push(s);return r}(t,e,r)}(t,e,r);return im(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=am(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function vm(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new Mg(t._location.bucket,n);return new gm(t.storage,r)}function ym(t){return/^[A-Za-z]+:\/\//.test(t)}function bm(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:Mg.makeFromBucketSpec(n,t)}var _m=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Mg.makeFromBucketSpec(i,this._host):bm(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?Mg.makeFromBucketSpec(this._url,t):bm(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){Gg("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){Gg("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t,e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t;return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new gm(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new Lg(_g());var i=function(t,e,n,r,i,o){var a=Vg(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new Bg(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}}))}))},t}();function wm(t,e){return function(t,e){if(e&&ym(e)){if(t instanceof _m)return new gm(t,e);throw bg("To use ref(service, url), the first argument must be a Storage instance.")}return function t(e,n){if(e instanceof _m){var r=e;if(null==r._bucket)throw new pg("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var i=new gm(r,r._bucket);return null!=n?t(i,n):i}if(void 0!==n){if(n.includes(".."))throw bg('`path` param cannot contain ".."');return vm(e,n)}return e}(t,e)}(t=Object(xt.getModularInstance)(t),e)}var Im=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),Tm=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Im(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Im(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Im(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Im(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),Em=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new Cm(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new Cm(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),Cm=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return vm(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new Tm(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new pm(t,new Hg(e),n)}(t=Object(xt.getModularInstance)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Eg.RAW),this._throwIfRoot("putString");var r=kg(e,t),i=Object(Nt.__assign)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Tm(new pm(this._delegate,new Hg(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,function(t){var e={prefixes:[],items:[]};return function t(e,n,r){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var i,o,a;return Object(Nt.__generator)(this,(function(s){switch(s.label){case 0:return[4,mm(e,{pageToken:r})];case 1:return i=s.sent(),(o=n.prefixes).push.apply(o,i.prefixes),(a=n.items).push.apply(a,i.items),null==i.nextPageToken?[3,3]:[4,t(e,n,i.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}(t,e).then((function(){return e}))}(t=Object(xt.getModularInstance)(t))).then((function(t){return new Em(t,e.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return mm(t=Object(xt.getModularInstance)(t),e)}(this._delegate,t||void 0).then((function(t){return new Em(t,e.storage)}))},t.prototype.getMetadata=function(){return t=this._delegate,function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=um(t.storage,t._location,tm()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=Object(xt.getModularInstance)(t));var t},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=Qg(e.fullServerUrl(),t.host),o=nm(n,r),a=t.maxOperationRetryTime,s=new rm(i,"PATCH",om(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=sm(e),s}(t.storage,t._location,e,tm()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}(t=Object(xt.getModularInstance)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=Qg(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new rm(r,"GET",function(t,e){return function(n,r){var i=em(t,r,e);return im(null!==i),function(t,e,n){var r=Yg(e);if(null===r)return null;if(!Fg(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.fullPath;return Qg("/b/"+o(t.bucket)+"/o/"+o(r),n)+Vg({alt:"media",token:e})}))[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=sm(e),o}(t.storage,t._location,tm()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new pg("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}(t=Object(xt.getModularInstance)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=Qg(e.fullServerUrl(),t.host),r=new rm(n,"DELETE",(function(t,e){}),t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=sm(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=Object(xt.getModularInstance)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw wg(t)},t}(),km=function(){function t(t,e){this.app=t,this._delegate=e}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(ym(t))throw bg("ref() expected a child path but got a URL, use refFromURL instead.");return new Cm(wm(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!ym(t))throw bg("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Mg.makeFromUrl(t,this._delegate.host)}catch(Jp){throw bg("refFromUrl() expected a valid full URL but got an invalid one.")}return new Cm(wm(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){!function(t,e,n){t.host="http://"+e+":"+n}(t,e,n)}(this._delegate,t,e)},t}();function Om(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new km(r,new _m(r,i,o,new jg,n,Pt.default.SDK_VERSION))}!function(t){var e={TaskState:Pg,TaskEvent:Ag,StringFormat:Eg,Storage:_m,Reference:Cm};t.INTERNAL.registerComponent(new ng.Component("storage",Om,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.6.2")}(Pt.default),n("fSjL");var Sm,Rm,Am,Pm=((Sm={})["trace started"]="Trace {$traceName} was started before.",Sm["trace stopped"]="Trace {$traceName} is not running.",Sm["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",Sm["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",Sm["no window"]="Window is not available.",Sm["no app id"]="App id is not available.",Sm["no project id"]="Project id is not available.",Sm["no api key"]="Api key is not available.",Sm["invalid cc log"]="Attempted to queue invalid cc event",Sm["FB not default"]="Performance can only start when Firebase app instance is the default one.",Sm["RC response not ok"]="RC response is not ok",Sm["invalid attribute name"]="Attribute name {$attributeName} is invalid.",Sm["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",Sm["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",Sm["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",Sm),Nm=new xt.ErrorFactory("performance","Performance",Pm),xm=new Dt.Logger("Performance");xm.logLevel=Dt.LogLevel.INFO;var Dm,jm=function(){function t(t){if(this.window=t,!t)throw Nm.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Object(xt.isIndexedDBAvailable)()||(xm.info("IndexedDB is not supported by current browswer"),!1):(xm.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++)e(r[n])})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===Rm&&(Rm=new t(Am)),Rm},t}();function Mm(t,e){var n=t.length-e.length;if(n<0||n>1)throw Nm.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var Lm,Fm=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Mm("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Mm("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw Nm.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw Nm.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw Nm.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===Dm&&(Dm=new t),Dm},t}();function Um(){return Lm}var qm=function(t){return t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t}({}),Gm=["firebase_","google_","ga_"],Qm=new RegExp("^[a-zA-Z]\\w*$");function Vm(){var t=jm.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function Bm(){switch(jm.getInstance().document.visibilityState){case"visible":return qm.VISIBLE;case"hidden":return qm.HIDDEN;default:return qm.UNKNOWN}}function Km(){var t=jm.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function zm(t){if(!t)return t;var e=Fm.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=Wm(e.tracesSamplingRate),e.logNetworkAfterSampling=Wm(e.networkRequestsSamplingRate),t}function Wm(t){return Math.random()<=t}var Hm,Ym=1;function Xm(){return Ym=2,Hm=Hm||function(){var t=jm.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return(t=Fm.getInstance().installationsService.getId()).then((function(t){Lm=t})),t;var t})).then((function(t){return function(t){var e=function(){var t=jm.getInstance().localStorage;if(t){var e=t.getItem("@firebase/performance/configexpire");if(e&&Number(e)>Date.now()){var n=t.getItem("@firebase/performance/config");if(n)try{return JSON.parse(n)}catch(r){return}}}}();return e?(zm(e),Promise.resolve()):function(t){return(e=Fm.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+Fm.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+Fm.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:Fm.getInstance().getAppId(),app_version:"0.4.17",sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw Nm.create("RC response not ok")}))})).catch((function(){xm.info("Could not fetch config, will use default configs")}));var e}(t).then(zm).then((function(t){return function(t){var e=jm.getInstance().localStorage;t&&e&&(e.setItem("@firebase/performance/config",JSON.stringify(t)),e.setItem("@firebase/performance/configexpire",String(Date.now()+60*Fm.getInstance().configTimeToLive*60*1e3)))}(t)}),(function(){}))}(t)})).then((function(){return $m()}),(function(){return $m()}))}function $m(){Ym=3}var Jm,Zm=3,tv=[],ev=!1;function nv(t){if(!t.eventTime||!t.message)throw Nm.create("invalid cc log");tv=Object(Nt.__spreadArray)(Object(Nt.__spreadArray)([],tv),[t])}function rv(t,e){Jm||(Jm=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=t.apply(void 0,e);nv({message:r,eventTime:Date.now()})}}(av)),Jm(t,e)}function iv(t){var e=Fm.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&jm.getInstance().requiredApisAvailable()&&(t.isAuto&&Bm()!==qm.VISIBLE||(3===Ym?ov(t):Xm().then((function(){return ov(t)}),(function(){return ov(t)}))))}function ov(t){if(Um()){var e=Fm.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return rv(t,1)}),0)}}function av(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:sv(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:sv(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function sv(){return{google_app_id:Fm.getInstance().getAppId(),app_instance_id:Um(),web_app_info:{sdk_version:"0.4.17",page_url:jm.getInstance().getUrl(),service_worker_status:Vm(),visibility_state:Bm(),effective_connection_type:Km()},application_process_state:0}}var uv=["_fp","_fcp","_fid"],cv=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=jm.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw Nm.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw Nm.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),iv(this)},t.prototype.record=function(t,e,n){if(t<=0)throw Nm.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw Nm.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=Object(Nt.__assign)({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}iv(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),this.putMetric(t,void 0===this.counters[t]?e:this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(o=this.name,0===(i=t).length||i.length>100||!(o&&o.startsWith("_wt_")&&uv.indexOf(i)>-1)&&i.startsWith("_"))throw Nm.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&xm.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||Gm.some((function(t){return n.startsWith(t)}))||!n.match(Qm)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw Nm.create("invalid attribute name",{attributeName:t});if(!i)throw Nm.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return Object(Nt.__assign)({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=jm.getInstance().getUrl();if(i){var o=new t("_wt_"+i,!0),a=Math.floor(1e3*jm.getInstance().getTimeOrigin());if(o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),n){var s=n.find((function(t){return"first-paint"===t.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric("_fcp",Math.floor(1e3*u.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}iv(o)}},t.createUserTimingTrace=function(e){iv(new t(e,!1,e))},t}();function lv(t){var e=t;if(e&&void 0!==e.responseStart){var n=jm.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=Fm.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return rv(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}function hv(){Um()&&(setTimeout((function(){return function(){var t=jm.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){cv.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),cv.createOobTrace(e,n,t))}))}else cv.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=jm.getInstance(),e=0,n=t.getEntriesByType("resource");e<n.length;e++)lv(n[e]);t.setupObserver("resource",lv)}()}),0),setTimeout((function(){return function(){for(var t=jm.getInstance(),e=0,n=t.getEntriesByType("measure");e<n.length;e++)fv(n[e]);t.setupObserver("measure",fv)}()}),0))}function fv(t){var e=t.name;"FB-PERF-TRACE-MEASURE"!==e.substring(0,"FB-PERF-TRACE-MEASURE".length)&&cv.createUserTimingTrace(e)}var dv=function(){function t(t){this.app=t,jm.getInstance().requiredApisAvailable()&&Object(xt.validateIndexedDBOpenable)().then((function(t){t&&(ev||(function t(e){setTimeout((function(){var e,n;if(0!==Zm)return tv.length?(n=(e=tv.splice(0,1e3)).map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(e,n){return function(t){var e=Fm.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(e).then((function(t){return t.ok||xm.info("Call to Firebase backend failed."),t.json()})).then((function(e){var r=Number(e.nextRequestWaitMillis),i=1e4;isNaN(r)||(i=Math.max(r,i));var o=e.logResponseDetails;Array.isArray(o)&&o.length>0&&"RETRY_REQUEST_LATER"===o[0].responseAction&&(tv=Object(Nt.__spreadArray)(Object(Nt.__spreadArray)([],n),tv),xm.info("Retry transport request later.")),Zm=3,t(i)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Fm.getInstance().logSource,log_event:n},e).catch((function(){tv=Object(Nt.__spreadArray)(Object(Nt.__spreadArray)([],e),tv),Zm--,xm.info("Tries left: "+Zm+"."),t(1e4)}))):t(1e4)}),e)}(5500),ev=!0),Xm().then(hv,hv))})).catch((function(t){xm.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new cv(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return Fm.getInstance().instrumentationEnabled},set:function(t){Fm.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return Fm.getInstance().dataCollectionEnabled},set:function(t){Fm.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();!function(t){t.INTERNAL.registerComponent(new ng.Component("performance",(function(t){return function(t,e){if("[DEFAULT]"!==t.name)throw Nm.create("FB not default");if("undefined"==typeof window)throw Nm.create("no window");return function(t){Am=t}(window),Fm.getInstance().firebaseAppInstance=t,Fm.getInstance().installationsService=e,new dv(t)}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC")),t.registerVersion("@firebase/performance","0.4.17")}(Pt.default);var pv,gv="https://www.googletagmanager.com/gtag/js",mv=function(t){return t.EVENT="event",t.SET="set",t.CONFIG="config",t}({}),vv=function(t){return t.ADD_SHIPPING_INFO="add_shipping_info",t.ADD_PAYMENT_INFO="add_payment_info",t.ADD_TO_CART="add_to_cart",t.ADD_TO_WISHLIST="add_to_wishlist",t.BEGIN_CHECKOUT="begin_checkout",t.CHECKOUT_PROGRESS="checkout_progress",t.EXCEPTION="exception",t.GENERATE_LEAD="generate_lead",t.LOGIN="login",t.PAGE_VIEW="page_view",t.PURCHASE="purchase",t.REFUND="refund",t.REMOVE_FROM_CART="remove_from_cart",t.SCREEN_VIEW="screen_view",t.SEARCH="search",t.SELECT_CONTENT="select_content",t.SELECT_ITEM="select_item",t.SELECT_PROMOTION="select_promotion",t.SET_CHECKOUT_OPTION="set_checkout_option",t.SHARE="share",t.SIGN_UP="sign_up",t.TIMING_COMPLETE="timing_complete",t.VIEW_CART="view_cart",t.VIEW_ITEM="view_item",t.VIEW_ITEM_LIST="view_item_list",t.VIEW_PROMOTION="view_promotion",t.VIEW_SEARCH_RESULTS="view_search_results",t}({}),yv=new Dt.Logger("@firebase/analytics");function bv(t,e,n,r,i,o){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var a,s,u,c;return Object(Nt.__generator)(this,(function(l){switch(l.label){case 0:a=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=l.sent(),(u=s.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),yv.error(c),[3,8];case 8:return t(mv.CONFIG,i,o),[2]}}))}))}function _v(t,e,n,r,i){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var o,a,s,u,c,l,h;return Object(Nt.__generator)(this,(function(f){switch(f.label){case 0:return f.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=f.sent(),u=function(t){var n=s.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=a;c<l.length&&"break"!==u(l[c]);c++);f.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return f.sent(),t(mv.EVENT,r,i||{}),[3,5];case 4:return h=f.sent(),yv.error(h),[3,5];case 5:return[2]}}))}))}var wv=((pv={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",pv["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",pv["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",pv["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",pv["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",pv["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",pv["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",pv["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',pv["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',pv),Iv=new xt.ErrorFactory("analytics","Analytics",wv),Tv=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function Ev(t){var e;return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s;return Object(Nt.__generator)(this,(function(u){switch(u.label){case 0:return n=t.appId,r={method:"GET",headers:(c=t.apiKey,new Headers({Accept:"application/json","x-goog-api-key":c}))},i="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(i,r)];case 1:if(200===(o=u.sent()).status||304===o.status)return[3,6];a="",u.label=2;case 2:return u.trys.push([2,4,,5]),[4,o.json()];case 3:return s=u.sent(),(null===(e=s.error)||void 0===e?void 0:e.message)&&(a=s.error.message),[3,5];case 4:return u.sent(),[3,5];case 5:throw Iv.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a});case 6:return[2,o.json()]}var c}))}))}function Cv(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=Tv),Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e,a,s,u,c,l,h;return Object(Nt.__generator)(this,(function(f){switch(f.label){case 0:e=t.appId,a=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,kv(n,i)];case 2:return f.sent(),[3,4];case 3:if(s=f.sent(),a)return yv.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:a}];throw s;case 4:return f.trys.push([4,6,,7]),[4,Ev(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof xt.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),a)return yv.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:a}];throw c}return l=503===Number(c.customData.httpStatus)?Object(xt.calculateBackoffMillis)(o,r.intervalMillis,30):Object(xt.calculateBackoffMillis)(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),yv.debug("Calling attemptFetch again in "+l+" millis"),[2,Cv(t,h,n,r)];case 7:return[2]}}))}))}function kv(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Iv.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var Ov,Sv,Rv=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),Av={},Pv=[],Nv={},xv="dataLayer",Dv="gtag",jv=!1;function Mv(t){if(jv)throw Iv.create("already-initialized");t.dataLayerName&&(xv=t.dataLayerName),t.gtagName&&(Dv=t.gtagName)}function Lv(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(t){switch(t.label){case 0:if(Object(xt.isBrowserExtension)())return[2,!1];if(!Object(xt.areCookiesEnabled)())return[2,!1];if(!Object(xt.isIndexedDBAvailable)())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,Object(xt.validateIndexedDBOpenable)()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}!function(t){t.INTERNAL.registerComponent(new ng.Component("analytics",(function(t){return function(t,e){!function(){var t=[];if(Object(xt.isBrowserExtension)()&&t.push("This is a browser extension environment."),Object(xt.areCookiesEnabled)()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=Iv.create("invalid-analytics-context",{errorInfo:e});yv.warn(n.message)}}();var n,r,i=t.options.appId;if(!i)throw Iv.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw Iv.create("no-api-key");yv.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Av[i])throw Iv.create("already-exists",{id:i});if(!jv){n=xv,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=function(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,a){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var s;return Object(Nt.__generator)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==mv.EVENT?[3,2]:[4,_v(t,e,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==mv.CONFIG?[3,4]:[4,bv(t,e,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:t(mv.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),yv.error(s),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}(Av,Pv,Nv,xv,Dv);Sv=o.wrappedGtag,Ov=o.gtagCore,jv=!0}return Av[i]=function(t,e,n,r,i,o){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var a,s,u,c,l,h,f;return Object(Nt.__generator)(this,(function(d){switch(d.label){case 0:return(a=function(t,e,n){return void 0===e&&(e=Tv),Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r,i,o,a,s,u=this;return Object(Nt.__generator)(this,(function(c){if(i=(n=t.options).apiKey,o=n.measurementId,!(r=n.appId))throw Iv.create("no-app-id");if(!i){if(o)return[2,{measurementId:o,appId:r}];throw Iv.create("no-api-key")}return a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},s=new Rv,setTimeout((function(){return Object(Nt.__awaiter)(u,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(t){return s.abort(),[2]}))}))}),6e4),[2,Cv({appId:r,apiKey:i,measurementId:o},a,s,e)]}))}))}(t)).then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&yv.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return yv.error(t)})),e.push(a),s=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t;return Object(Nt.__generator)(this,(function(e){switch(e.label){case 0:return Object(xt.isIndexedDBAvailable)()?[3,1]:(yv.warn(Iv.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,Object(xt.validateIndexedDBOpenable)()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),yv.warn(Iv.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=d.sent(),c=u[0],l=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(gv))return r}return null}()||function(t,e){var n=document.createElement("script");n.src=gv+"?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(mv.CONFIG,c.measurementId,h),[2,c.measurementId]}}))}))}(t,Pv,Nv,e,Ov,xv),{app:t,logEvent:function(t,e,n){(function(t,e,n,r,i){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var o,a;return Object(Nt.__generator)(this,(function(s){switch(s.label){case 0:return i&&i.global?(t(mv.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=s.sent(),a=Object(Nt.__assign)(Object(Nt.__assign)({},r),{send_to:o}),t(mv.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})(Sv,Av[i],t,e,n).catch((function(t){return yv.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var i;return Object(Nt.__generator)(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(mv.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(mv.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(Sv,Av[i],t,e).catch((function(t){return yv.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var i;return Object(Nt.__generator)(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(mv.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(mv.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(Sv,Av[i],t,e).catch((function(t){return yv.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var i,o,a,s,u;return Object(Nt.__generator)(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)i["user_properties."+(s=a[o])]=n[s];return t(mv.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(mv.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(Sv,Av[i],t,e).catch((function(t){return yv.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(Av[i],t).catch((function(t){return yv.error(t)}))},INTERNAL:{delete:function(){return delete Av[i],Promise.resolve()}}}}(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:Mv,EventName:vv,isSupported:Lv})),t.INTERNAL.registerComponent(new ng.Component("analytics-internal",(function(t){try{return{logEvent:t.getProvider("analytics").getImmediate().logEvent}}catch(Jp){throw Iv.create("interop-component-reg-failed",{reason:Jp})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.17")}(Pt.default);var Fv,Uv=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i,o;return Object(Nt.__generator)(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=a.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},t}(),qv=((Fv={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Fv["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Fv["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Fv["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Fv["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Fv["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Fv["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Fv["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Fv["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Fv["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Fv["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Fv["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Fv["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Fv),Gv=new xt.ErrorFactory("remoteconfig","Remote Config",qv),Qv=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,h,f,d,p,g,m;return Object(Nt.__generator)(this,(function(v){switch(v.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=v.sent(),n=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",r=n+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,i={sdk_version:this.sdkVersion,app_instance_id:e[0],app_instance_id_token:e[1],app_id:this.appId,language_code:(void 0===y&&(y=navigator),y.languages&&y.languages[0]||y.language)},o={method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},body:JSON.stringify(i)},a=fetch(r,o),s=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),v.label=2;case 2:return v.trys.push([2,5,,6]),[4,Promise.race([a,s])];case 3:return v.sent(),[4,a];case 4:return u=v.sent(),[3,6];case 5:throw c=v.sent(),l="fetch-client-network","AbortError"===c.name&&(l="fetch-timeout"),Gv.create(l,{originalErrorMessage:c.message});case 6:if(h=u.status,f=u.headers.get("ETag")||void 0,200!==u.status)return[3,11];g=void 0,v.label=7;case 7:return v.trys.push([7,9,,10]),[4,u.json()];case 8:return g=v.sent(),[3,10];case 9:throw m=v.sent(),Gv.create("fetch-client-parse",{originalErrorMessage:m.message});case 10:d=g.entries,p=g.state,v.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===p?h=500:"NO_CHANGE"===p?h=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(d={}),304!==h&&200!==h)throw Gv.create("fetch-status",{httpStatus:h});return[2,{status:h,eTag:f,config:d}]}var y}))}))},t}(),Vv=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),Bv=["1","true","t","yes","y","on"],Kv=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&Bv.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),zv=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Dt.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=Dt.LogLevel.SILENT;break;default:this._logger.logLevel=Dt.LogLevel.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t,e,n;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),n=t[1],(e=t[0])&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r=this;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:t=new Vv,setTimeout((function(){return Object(Nt.__awaiter)(r,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),n=function(t,e){return t instanceof xt.FirebaseError&&-1!==t.code.indexOf("fetch-throttle")}(e)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}}))}))},t.prototype.fetchAndActivate=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){return Object(Nt.__generator)(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t,e,n=this;return(t=this._storageCache.getActiveConfig(),e=this.defaultConfig,void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(Object(Nt.__assign)(Object(Nt.__assign)({},t),e))).reduce((function(t,e){return t[e]=n.getValue(e),t}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new Kv("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new Kv("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new Kv("static"))},t}();function Wv(t,e){var n=t.target.error||void 0;return Gv.create(e,{originalErrorMessage:n&&n.message})}var Hv=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(Wv(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e,n=this;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(Wv(t,"storage-get"))},s.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(Jp){i(Gv.create("storage-get",{originalErrorMessage:Jp&&Jp.message}))}}))]}}))}))},t.prototype.set=function(t,e){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var n,r=this;return Object(Nt.__generator)(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(Wv(t,"storage-set"))},u.onsuccess=function(){i()}}catch(Jp){o(Gv.create("storage-set",{originalErrorMessage:Jp&&Jp.message}))}}))]}}))}))},t.prototype.delete=function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e,n=this;return Object(Nt.__generator)(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(Wv(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(Jp){i(Gv.create("storage-delete",{originalErrorMessage:Jp&&Jp.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),Yv=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var t,e,n,r,i,o;return Object(Nt.__generator)(this,(function(a){switch(a.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();function Xv(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Gv.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var $v,Jv=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e;return Object(Nt.__generator)(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return Object(Nt.__awaiter)(this,void 0,void 0,(function(){var e,i,o;return Object(Nt.__generator)(this,(function(a){switch(a.label){case 0:return[4,Xv(t.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof xt.FirebaseError&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+Object(xt.calculateBackoffMillis)(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}();function Zv(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Please enter transaction pin. "),o.Qb())}function ty(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Transaction pin must be 6 characters long. "),o.Qb())}function ey(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Transaction pin must be 6 characters long. "),o.Qb())}function ny(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Spaces not allowed. "),o.Qb())}function ry(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Please enter confirm transaction pin. "),o.Qb())}function iy(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Confirm transaction pin does not match with transaction pin. "),o.Qb())}($v=Pt.default).INTERNAL.registerComponent(new ng.Component("remoteConfig",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw Gv.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw Gv.create("registration-project-id");if(!s)throw Gv.create("registration-api-key");if(!u)throw Gv.create("registration-app-id");var c=new Hv(u,r.name,n=n||"firebase"),l=new Yv(c),h=new Dt.Logger("@firebase/remote-config");h.logLevel=Dt.LogLevel.ERROR;var f=new Qv(i,$v.SDK_VERSION,n,a,s,u),d=new Jv(f,c),p=new Uv(d,c,l,h),g=new zv(r,p,l,c,h);return g.ensureInitialized(),g}),"PUBLIC").setMultipleInstances(!0)),$v.registerVersion("@firebase/remote-config","0.1.42"),n("X8/r"),Pt.default.registerVersion("firebase","8.9.1","app"),Pt.default.SDK_VERSION="8.9.1",console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),Pt.default.registerVersion("firebase","8.9.1");let oy=(()=>{class t{constructor(t,e,n){this._router=t,this._fb=e,this._auth=n,this._router.getCurrentNavigation().extras.state&&void 0!==this._router.getCurrentNavigation().extras.state.profileForm?this.profileForm=this._router.getCurrentNavigation().extras.state.profileForm:this._router.navigate(["/auth/signup"])}ngOnInit(){this.transactionForm=this._fb.group({transaction_pin:[null,[u.t.required,u.t.minLength(6),u.t.maxLength(6),K.a]],transaction_pin_confirm:[null,u.t.required]},{validators:Object(p.a)("transaction_pin","transaction_pin_confirm")})}sumitFrm(){this._auth.updateDetails(Object.assign(Object.assign(Object.assign({},this.profileForm),this.transactionForm.value),{token:this._auth.firebaseToken,"device-token":this._auth.firebaseToken,"device-type":"WEB"}),this._auth.userId).subscribe(t=>{c.Block.remove("#transaction-pin-set"),c.Notify.success("Account create successfully."),localStorage.setItem(b.a.storageKey,JSON.stringify(t.data)),this._router.navigate(["/dashboard"])},t=>{c.Block.remove("#transaction-pin-set")})}submitAllDetails(){if(this.transactionForm.valid){c.Block.circle("#transaction-pin-set");const t=Pt.default.messaging();t.requestPermission().then(()=>{t.getToken().then(t=>{this._auth.firebaseToken=t,this.sumitFrm()}),t.onMessage(()=>{})}).catch(t=>{c.Notify.failure("Unable to get permission to notify."),this.sumitFrm()})}else this.transactionForm.markAllAsTouched()}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(i.b),o.Lb(u.d),o.Lb(_.a))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-transactionpin"]],decls:33,vars:7,consts:[[1,"auth-main","d-flex"],[1,"auth-img"],[1,"auth-form"],["routerLink","/landingpage",1,"auth-logo","cursor-pointer"],["src","assets/images/nav-logo.png","alt",""],[1,"d-flex","auth-title"],[1,"auth-title__h3"],[1,"d-block"],[1,"auth-form-bx","my-forms",3,"formGroup","ngSubmit"],["appearance","outline",1,"example-full-width"],["matPrefix",""],[1,"input-icon"],["src","assets/images/auth/address.png","alt",""],["type","password","formControlName","transaction_pin","name","transaction_pin","matInput","","placeholder","Transaction pin"],[4,"ngIf"],["type","password","matInput","","formControlName","transaction_pin_confirm","name","transaction_pin_confirm","placeholder","Confirm transaction pin"],[1,"btn-outer","mt-40"],["id","transaction-pin-set",1,"border-plus"],["type","submit",1,"btn","btn-primary"]],template:function(t,e){if(1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Mb(2,"login-svg-image"),o.Qb(),o.Rb(3,"div",2),o.Rb(4,"div",3),o.Rb(5,"figure"),o.Mb(6,"img",4),o.Qb(),o.Qb(),o.Rb(7,"div",5),o.Rb(8,"h3",6),o.Fc(9,"Transaction Pin "),o.Rb(10,"span",7),o.Fc(11," Set your transaction pin to continue "),o.Qb(),o.Qb(),o.Qb(),o.Rb(12,"form",8),o.Yb("ngSubmit",(function(){return e.submitAllDetails()})),o.Rb(13,"mat-form-field",9),o.Rb(14,"span",10),o.Rb(15,"figure",11),o.Mb(16,"img",12),o.Qb(),o.Qb(),o.Mb(17,"input",13),o.Dc(18,Zv,2,0,"mat-error",14),o.Dc(19,ty,2,0,"mat-error",14),o.Dc(20,ey,2,0,"mat-error",14),o.Dc(21,ny,2,0,"mat-error",14),o.Qb(),o.Rb(22,"mat-form-field",9),o.Rb(23,"span",10),o.Rb(24,"figure",11),o.Mb(25,"img",12),o.Qb(),o.Qb(),o.Mb(26,"input",15),o.Dc(27,ry,2,0,"mat-error",14),o.Dc(28,iy,2,0,"mat-error",14),o.Qb(),o.Rb(29,"div",16),o.Rb(30,"div",17),o.Rb(31,"button",18),o.Fc(32,"Submit"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t){var n=null,r=null,i=null,a=null,s=null,u=null;o.zb(12),o.ic("formGroup",e.transactionForm),o.zb(6),o.ic("ngIf",!(null!=(n=e.transactionForm.get("transaction_pin"))&&n.hasError("removeSpaces"))&&(null==(n=e.transactionForm.get("transaction_pin"))?null:n.hasError("required"))),o.zb(1),o.ic("ngIf",!(null!=(r=e.transactionForm.get("transaction_pin"))&&r.hasError("removeSpaces"))&&(null==(r=e.transactionForm.get("transaction_pin"))?null:r.hasError("maxlength"))),o.zb(1),o.ic("ngIf",!(null!=(i=e.transactionForm.get("transaction_pin"))&&i.hasError("removeSpaces"))&&(null==(i=e.transactionForm.get("transaction_pin"))?null:i.hasError("minlength"))),o.zb(1),o.ic("ngIf",null==(a=e.transactionForm.get("transaction_pin"))?null:a.hasError("removeSpaces")),o.zb(6),o.ic("ngIf",null==(s=e.transactionForm.get("transaction_pin_confirm"))?null:s.hasError("required")),o.zb(1),o.ic("ngIf",null==(u=e.transactionForm.get("transaction_pin_confirm"))?null:u.hasError("mustMatch"))}},directives:[I.a,i.c,u.u,u.o,u.h,T.c,T.g,u.b,E.a,u.n,u.g,r.m,T.b],styles:[""]}),t})(),ay=(()=>{class t{constructor(t){this.router=t,this.selectedType="forgot-password"}ngOnInit(){}gotoNext(){this.router.navigate("forgot-password"!=this.selectedType?["/auth/oldphone"]:["/auth/forgotpassword"])}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(i.b))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-troublelogin"]],decls:32,vars:4,consts:[[1,"auth-main","d-flex"],[1,"auth-img"],["src","assets/images/auth/trogin.png","alt",""],[1,"auth-form"],["routerLink","/landingpage",1,"auth-logo","cursor-pointer"],["src","assets/images/nav-logo.png","alt",""],[1,"d-flex","auth-title"],[1,"auth-title__h3"],[1,"d-block"],["routerLink","/auth/support",1,"auth-link__title"],[1,"auth-form-bx"],[1,"trouble-bx","d-flex"],[1,"trouble__bx","active-bx",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","34.762","height","34.762","viewBox","0 0 34.762 34.762"],["id","Icon_awesome-key","data-name","Icon awesome-key","d","M32.762,11.262A11.268,11.268,0,0,1,19.4,22.328l-1.536,1.729a1.536,1.536,0,0,1-1.148.515H14.333v2.56A1.536,1.536,0,0,1,12.8,28.667h-2.56v2.56A1.536,1.536,0,0,1,8.7,32.762H1.536A1.536,1.536,0,0,1,0,31.226V26.232a1.536,1.536,0,0,1,.45-1.086L10.8,14.792a11.263,11.263,0,1,1,21.959-3.53ZM21.5,8.191a3.071,3.071,0,1,0,3.071-3.071A3.071,3.071,0,0,0,21.5,8.191Z","transform","translate(1 1)","fill","none","stroke","#17c2ec","stroke-width","2"],[1,"trouble__bx",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","24.704","height","34.762","viewBox","0 0 24.704 34.762"],["id","Group_185031","data-name","Group 185031","transform","translate(-6.5 -2)"],["id","Path_27381","data-name","Path 27381","d","M10.743,3H26.961A3.26,3.26,0,0,1,30.2,6.276v26.21a3.26,3.26,0,0,1-3.243,3.276H10.743A3.26,3.26,0,0,1,7.5,32.486V6.276A3.26,3.26,0,0,1,10.743,3Z","fill","none","stroke","#17c2ec","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],["id","Path_27382","data-name","Path 27382","d","M18,27h0","transform","translate(0.852 2.21)","fill","none","stroke","#17c2ec","stroke-linecap","round","stroke-linejoin","round","stroke-width","2"],[1,"btn-outer","mt-40"],[1,"btn","btn-primary",3,"click"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"figure"),o.Mb(3,"img",2),o.Qb(),o.Qb(),o.Rb(4,"div",3),o.Rb(5,"div",4),o.Rb(6,"figure"),o.Mb(7,"img",5),o.Qb(),o.Qb(),o.Rb(8,"div",6),o.Rb(9,"h3",7),o.Fc(10,"Trouble loging in "),o.Rb(11,"span",8),o.Fc(12," Choose the accurate reason why you are not able to log in. "),o.Qb(),o.Qb(),o.Rb(13,"p",9),o.Fc(14,"Contact Support"),o.Qb(),o.Qb(),o.Rb(15,"div",10),o.Rb(16,"div",11),o.Rb(17,"div",12),o.Yb("click",(function(){return e.selectedType="forgot-password"})),o.bc(),o.Rb(18,"svg",13),o.Mb(19,"path",14),o.Qb(),o.ac(),o.Rb(20,"p"),o.Fc(21,"Forgot password"),o.Qb(),o.Qb(),o.Rb(22,"div",15),o.Yb("click",(function(){return e.selectedType="lost-phone"})),o.bc(),o.Rb(23,"svg",16),o.Rb(24,"g",17),o.Mb(25,"path",18),o.Mb(26,"path",19),o.Qb(),o.Qb(),o.ac(),o.Rb(27,"p"),o.Fc(28,"Lost phone no."),o.Qb(),o.Qb(),o.Qb(),o.Rb(29,"div",20),o.Rb(30,"button",21),o.Yb("click",(function(){return e.gotoNext()})),o.Fc(31,"Continue"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t&&(o.zb(17),o.Db("active-bx","forgot-password"==e.selectedType),o.zb(5),o.Db("active-bx","lost-phone"==e.selectedType))},directives:[i.c],styles:[""]}),t})();var sy=n("kIsx");let uy=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Fb({type:t,selectors:[["app-verfiyaccount"]],decls:22,vars:0,consts:[[1,"auth-main","d-flex"],[1,"auth-img"],["src","assets/images/auth/email-img.png","alt",""],[1,"auth-form"],["routerLink","/landingpage",1,"auth-logo","cursor-pointer"],["src","assets/images/nav-logo.png","alt",""],[1,"d-flex","auth-title"],[1,"auth-title__h3"],[1,"d-block"],[1,"auth-form-bx"],[1,"d-flex","otp"],["type","text"],[1,"btn-outer","mt-40"],["routerLink","/auth/resetpassword",1,"btn","btn-primary"]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Rb(2,"figure"),o.Mb(3,"img",2),o.Qb(),o.Qb(),o.Rb(4,"div",3),o.Rb(5,"div",4),o.Rb(6,"figure"),o.Mb(7,"img",5),o.Qb(),o.Qb(),o.Rb(8,"div",6),o.Rb(9,"h3",7),o.Fc(10,"Activate your account "),o.Rb(11,"span",8),o.Fc(12," Enter 4 digit code sent on your registered phone number "),o.Qb(),o.Qb(),o.Qb(),o.Rb(13,"div",9),o.Rb(14,"div",10),o.Mb(15,"input",11),o.Mb(16,"input",11),o.Mb(17,"input",11),o.Mb(18,"input",11),o.Qb(),o.Rb(19,"div",12),o.Rb(20,"button",13),o.Fc(21,"Submit"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb())},directives:[i.c],styles:[""]}),t})();var cy=n("cp0P");const ly=function(t){return{background:t}};function hy(t,e){if(1&t){const t=o.Sb();o.Rb(0,"div",13),o.Rb(1,"div",14),o.Fc(2,"+"),o.Qb(),o.Rb(3,"p"),o.Fc(4),o.Qb(),o.Rb(5,"input",15,16),o.Yb("change",(function(){o.uc(t);const n=e.index,r=o.sc(6);return o.cc().preview(r.files,n)})),o.Qb(),o.Qb()}if(2&t){const t=e.$implicit;o.ic("ngStyle",o.nc(2,ly,"url("+t.base64+")")),o.zb(4),o.Gc(null==t?null:t.title)}}let fy=(()=>{class t{constructor(t,e){this._router=t,this._common=e,this.documents=[{type:"driving",title:"Driving License",image:null,base64:null},{type:"votor",title:"Voter Card",image:null,base64:null},{type:"passport",title:"International Passport",image:null,base64:null},{type:"national_id",title:"National ID",image:null,base64:null}],this._router.getCurrentNavigation().extras.state&&void 0!==this._router.getCurrentNavigation().extras.state.profileForm?(this.profileForm=this._router.getCurrentNavigation().extras.state.profileForm,console.log("this.profileForm",this.profileForm)):this._router.navigate(["/auth/signup"])}ngOnInit(){}preview(t,e){0!==t.length&&Object(f.a)(t[0]).then(n=>{this.documents[e].image=t[0],this.documents[e].base64=n})}goToNext(){let t=this.documents.find(t=>null==t.image);null!=t?c.Notify.failure("Please upload "+t.title):this.uploadDocuments()}uploadDocuments(){c.Block.circle("#verifyDocument-button"),Object(cy.a)(this.documents.map(t=>{const e=new FormData;return e.append("media",t.image,t.image.name),this._common.uploadMedia(e)})).subscribe(t=>{const e=[];t.forEach(t=>{e.push({document:t.data[0].id})}),c.Block.remove("#verifyDocument-button"),this._router.navigate(["/auth/transtionpin"],{state:{profileForm:Object.assign(Object.assign({},this.profileForm),{user_documents:e})}})})}skipIt(){this._router.navigate(["/auth/transtionpin"],{state:{profileForm:Object.assign(Object.assign({},this.profileForm),{user_documents:[]})}})}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(i.b),o.Lb(w.a))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-verify-doc"]],decls:20,vars:1,consts:[[1,"auth-main","d-flex"],[1,"auth-img"],[1,"auth-form","start"],["routerLink","/landingpage",1,"auth-logo","cursor-pointer"],["src","assets/images/nav-logo.png","alt",""],[1,"d-flex","auth-title"],[1,"auth-title__h3"],[1,"auth-form-bx"],["class","upload-bx",3,"ngStyle",4,"ngFor","ngForOf"],[1,"btn-outer","mt-40"],["id","verifyDocument-button",1,"btn","btn-primary",3,"click"],[1,"mt-2","text-center"],["href","javascript:void(0)",3,"click"],[1,"upload-bx",3,"ngStyle"],[1,"plus-icon"],["type","file","accept","image/*",3,"change"],["file",""]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Mb(2,"login-svg-image"),o.Qb(),o.Rb(3,"div",2),o.Rb(4,"div",3),o.Rb(5,"figure"),o.Mb(6,"img",4),o.Qb(),o.Qb(),o.Rb(7,"div",5),o.Rb(8,"h3",6),o.Fc(9,"Verify Documents "),o.Rb(10,"p"),o.Fc(11,"International Passport, Voter's Card, National ID Card, Driving Licences"),o.Qb(),o.Qb(),o.Qb(),o.Rb(12,"div",7),o.Dc(13,hy,7,4,"div",8),o.Rb(14,"div",9),o.Rb(15,"button",10),o.Yb("click",(function(){return e.goToNext()})),o.Fc(16,"Submit"),o.Qb(),o.Rb(17,"p",11),o.Rb(18,"a",12),o.Yb("click",(function(){return e.skipIt()})),o.Fc(19,"Skip"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t&&(o.zb(13),o.ic("ngForOf",e.documents))},directives:[I.a,i.c,r.l,r.n],styles:[".upload-bx[_ngcontent-%COMP%]{background-size:cover!important;background-position:50%!important}"]}),t})(),dy=(()=>{class t{constructor(t){this._router=t}ngOnInit(){this.timoutIns=setTimeout(()=>{this._router.navigate(["/auth/login"])},3e3)}ngOnDestroy(){this.timoutIns&&clearTimeout(this.timoutIns)}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(i.b))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-welcome"]],decls:3,vars:0,consts:[["routerLink","/dashboard",1,"auth-main","d-flex"],[1,"m-auto"],["src","assets/images/auth/welcome.png","alt",""]],template:function(t,e){1&t&&(o.Rb(0,"div",0),o.Rb(1,"figure",1),o.Mb(2,"img",2),o.Qb(),o.Qb())},directives:[i.c],styles:[""]}),t})();var py=n("4KSJ");function gy(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Please enter email address. "),o.Qb())}function my(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Please enter valid email address. "),o.Qb())}function vy(t,e){1&t&&(o.Rb(0,"mat-error"),o.Fc(1," Please enter refer code. "),o.Qb())}function yy(t,e){1&t&&(o.Rb(0,"mat-error",25),o.Fc(1,"Please accept terms and conditions to continue."),o.Qb())}const by=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:_t},{path:"signup",component:Rt},{path:"emailid",component:(()=>{class t{constructor(t,e,n){this._auth=t,this._router=e,this._fb=n}ngOnInit(){this._auth.userId||this._router.navigate(["/auth/signup"]),this.emailForm=this._fb.group({email:[null,[u.t.required,u.t.email,py.a,K.a]],referred_by:[null],tos:[!0,u.t.requiredTrue]})}submitEmail(){this.emailForm.valid?(c.Block.circle("#validate-email-button"),this._auth.validateEmail(this.emailForm.value,this._auth.userId).subscribe(t=>{c.Block.remove("#validate-email-button"),this._router.navigate(["/auth/createprofie"],{state:{emailForm:Object.assign(Object.assign({},this.emailForm.value),{email:this.emailForm.value.email.trim()})}})},t=>{c.Block.remove("#validate-email-button")})):this.emailForm.markAllAsTouched()}}return t.\u0275fac=function(e){return new(e||t)(o.Lb(_.a),o.Lb(i.b),o.Lb(u.d))},t.\u0275cmp=o.Fb({type:t,selectors:[["app-whats-emailid"]],decls:41,vars:6,consts:[[1,"auth-main","d-flex"],[1,"auth-img"],[1,"auth-form"],["routerLink","/landingpage",1,"auth-logo","cursor-pointer"],["src","assets/images/nav-logo.png","alt",""],[1,"d-flex","auth-title"],[1,"auth-title__h3"],[1,"d-block"],[1,"auth-form-bx","my-forms",3,"formGroup","ngSubmit"],["appearance","outline",1,"example-full-width"],["matPrefix",""],[1,"input-icon"],["src","assets/images/auth/a.png","alt",""],["type","email","formControlName","email","name","email","matInput","","placeholder","Email"],[4,"ngIf"],["src","assets/images/auth/mail.png","alt",""],["type","text","formControlName","referred_by","name","referred_by","matInput","","placeholder","Referral Code (optional)"],[1,"checkbox-text"],[1,"custom-checkbx"],["formControlName","tos","name","tos","type","checkbox",3,"value"],[1,"checkmark"],["style","font-size: 13px;",4,"ngIf"],[1,"btn-outer","mt-40"],["id","validate-email-button",1,"border-plus"],["type","submit",1,"btn","btn-primary"],[2,"font-size","13px"]],template:function(t,e){if(1&t&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Mb(2,"login-svg-image"),o.Qb(),o.Rb(3,"div",2),o.Rb(4,"div",3),o.Rb(5,"figure"),o.Mb(6,"img",4),o.Qb(),o.Qb(),o.Rb(7,"div",5),o.Rb(8,"h3",6),o.Fc(9,"What's Your email id ? "),o.Rb(10,"span",7),o.Fc(11," Please enter your email id to continue "),o.Qb(),o.Qb(),o.Qb(),o.Rb(12,"form",8),o.Yb("ngSubmit",(function(){return e.submitEmail()})),o.Rb(13,"mat-form-field",9),o.Rb(14,"span",10),o.Rb(15,"figure",11),o.Mb(16,"img",12),o.Qb(),o.Qb(),o.Mb(17,"input",13),o.Dc(18,gy,2,0,"mat-error",14),o.Dc(19,my,2,0,"mat-error",14),o.Qb(),o.Rb(20,"mat-form-field",9),o.Rb(21,"span",10),o.Rb(22,"figure",11),o.Mb(23,"img",15),o.Qb(),o.Qb(),o.Mb(24,"input",16),o.Dc(25,vy,2,0,"mat-error",14),o.Qb(),o.Rb(26,"div",17),o.Rb(27,"label",18),o.Fc(28,"Agree with "),o.Rb(29,"a"),o.Fc(30,"Terms of User"),o.Qb(),o.Fc(31," and"),o.Rb(32,"a"),o.Fc(33,"Privacy Policy"),o.Qb(),o.Mb(34,"input",19),o.Mb(35,"span",20),o.Qb(),o.Dc(36,yy,2,0,"mat-error",21),o.Qb(),o.Rb(37,"div",22),o.Rb(38,"div",23),o.Rb(39,"button",24),o.Fc(40,"Submit"),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb(),o.Qb()),2&t){var n=null,r=null,i=null;o.zb(12),o.ic("formGroup",e.emailForm),o.zb(6),o.ic("ngIf",null==(n=e.emailForm.get("email"))?null:n.hasError("required")),o.zb(1),o.ic("ngIf",!(null!=(r=e.emailForm.get("email"))&&r.hasError("required"))&&((null==(r=e.emailForm.get("email"))?null:r.hasError("email"))||(null==(r=e.emailForm.get("email"))?null:r.hasError("validEmail"))||e.emailForm.get("email").hasError("removeSpaces"))),o.zb(6),o.ic("ngIf",null==(i=e.emailForm.get("referred_by"))?null:i.hasError("required")),o.zb(9),o.ic("value",!0),o.zb(2),o.ic("ngIf",e.emailForm.get("tos").hasError("required"))}},directives:[I.a,i.c,u.u,u.o,u.h,T.c,T.g,u.b,E.a,u.n,u.g,r.m,u.a,T.b],styles:[""]}),t})()},{path:"createprofie",component:G},{path:"transtionpin",component:oy},{path:"welcome",component:dy},{path:"troublelogin",component:ay},{path:"forgotpassword",component:ft},{path:"verifyaccount",component:uy},{path:"resetpassword",component:Et},{path:"oldphone",component:Tt},{path:"confirmaccount",component:s.a},{path:"updatephone",component:sy.a},{path:"support",component:At},{path:"chat",component:a},{path:"verify-doc",component:fy}];let _y=(()=>{class t{}return t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({factory:function(e){return new(e||t)},imports:[[i.f.forChild(by)],i.f]}),t})();var wy=n("99Ob"),Iy=n("17aj"),Ty=n("kpy9"),Ey=n("PCNd");let Cy=(()=>{class t{}return t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({factory:function(e){return new(e||t)},providers:[Q.c],imports:[[r.c,_y,wy.a,u.i,u.s,Iy.a,Q.d,Ty.b,Ey.a,C.b]]}),t})()}}]);